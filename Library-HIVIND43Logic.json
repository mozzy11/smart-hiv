{
  "resourceType" : "Library",
  "id" : "HIVIND43Logic",
  "meta" : {
    "profile" : ["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary",
    "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary",
    "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library",
    "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-module"]
  },
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: Library HIVIND43Logic</b></p><a name=\"HIVIND43Logic\"> </a><a name=\"hcHIVIND43Logic\"> </a><a name=\"hcHIVIND43Logic-en-US\"> </a><h2>Contents</h2><p><code>text/cql</code></p><pre><code class=\"language-sql\">/*\n * Library: HIV.IND.43 Logic\n * Ref No: VER.7\n * Short Name: HIV prevalence among women attending ANC\n *\n * Definition: % of pregnant women who are HIV-positive at the time of their first test during the current pregnancy\n *\n * Numerator: Number of ANC attendees who tested HIV-positive at their first test during the current pregnancy plus number of ANC attendees known to be HIV-positive before their first ANC visit\n * Numerator Calculation: COUNT of &quot;Currently pregnant&quot; clients with &quot;HIV test result&quot;='HIV-positive' AND &quot;HIV test date&quot; on &quot;ANC contact date&quot; is EARLIEST within current pregnancy | PLUS | COUNT of clients with &quot;HIV status&quot;='HIV-positive' on first &quot;ANC contact date&quot;\n * Numerator Exclusions: \n *\n * Denominator: Number of ANC attendees receiving their first HIV test during pregnancy plus number of ANC attendees known to be HIV-positive before first ANC visit\n * Denominator Calculation: COUNT of &quot;Currently pregnant&quot; clients with &quot;HIV test date&quot; on a &quot;ANC contact date&quot; during current pregnancy | PLUS | COUNT of clients with &quot;HIV status&quot;='HIV-positive' on first &quot;ANC contact date&quot;\n * Denominator Exclusions: \n *\n * Disaggregations:\n * • Age (&lt;15, 15–19, 20–24, 25–29, 30–34, 35–39, 40–49, 50+ years)\n * •\u00a0HIV status at first test during current pregnancy (known positive, tested HIV-negative, tested HIV-positive, not tested)\n * •\u00a0Cities and other administrative regions of epidemiologic importance\n * \n * Disaggregation Elements: Age | HIV status at first HIV test during current pregnancy\n *\n * Numerator and Denominator Elements:\n * ANC contact date | Currently pregnant | HIV status | HIV test date | HIV test result\n *\n * Reference: Consolidated guidelines on person-centred HIV strategic information: strengthening routine data for impact. Geneva: World Health Organization; 2022\n * \n * Data Concepts:\n *  \n * HIV.A.DE17: Age | Calculated age (number of years) of the client based on date of birth \n * HIV.B.DE29: Currently pregnant | Client is currently pregnant \n * HIV.B.DE110: HIV test date | Date of the HIV test \n * HIV.B.DE111: HIV test result | The result from HIV testing after applying the testing algorithm \n * HIV.B.DE112: HIV-positive | Test result is HIV-positive \n * HIV.B.DE113: HIV-negative | Test result is HIV-negative \n * HIV.B.DE114: HIV-inconclusive | Test result is HIV-inconclusive \n * HIV.B.DE115: HIV status | HIV status reported after applying the national HIV testing algorithm. No single HIV test can provide an HIV-positive diagnosis. \n * HIV.B.DE116: HIV-positive | Client is HIV-positive \n * HIV.B.DE117: HIV-negative | Client is HIV-negative \n * HIV.B.DE118: Unknown | Client has unknown HIV status \n * HIV.D.DE31: Currently pregnant | Client is currently pregnant \n * HIV.E.DE85: ANC contact date | The date and time of the client's ANC contact (in the ANC DAK this is called 'Contact date') \n * HIV.E.DE224: HIV test date | Date of the HIV test\n *\n * Additional Context\n * - what it measures: HIV prevalence among pregnant women attending ANC, including those who were diagnosed with HIV before their first ANC visit and those testing positive during their current pregnancy.\n * - rationale: HIV prevalence among ANC attendees is used for surveillance to measure HIV prevalence and incidence and to monitor trends in HIV infection when the following conditions are met to ensure that HIV prevalence among ANC clients is consistently representative of HIV prevalence among all pregnant women: | • ANC attendance is high and all women are recorded (for example, not missing large private-sector ANC services). | •\u00a0HIV testing is offered to all pregnant women and not restricted to only higher-risk women or interrupted due to stock-outs of test kits. | •\u00a0Only the first HIV test result is used to calculate HIV prevalence during a single pregnancy. | •\u00a0Women who are already known to be HIV-positive and/or are already on ART prior to their first ANC visit during a pregnancy and, therefore, are not tested for HIV, are recorded | and included in routine reporting. All HIV-positive women must be included in both the numerator and denominator when calculating HIV prevalence among pregnant women. |  | See section 5.2 4 on WHO's 2022 HIV SI Guidelines on routine antenatal HIV testing for more detail. | This indicator is also useful for estimating the number of women in need of PMTCT services for programme planning purposes.\n * - method: ANC registers, patient monitoring tools, EMRs (for example, patient records). |  | The recommended reporting period is 12 months.\n * \n * Suggested Scoring Method: proportion | http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm\n */\n\nlibrary HIVIND43Logic\n\n// Included Libraries\nusing FHIR version '4.0.1'\n\ninclude HIVIndicatorCommon version '0.0.1' called HIC\ninclude FHIRHelpers version '4.0.1'\ninclude WHOCommon called WCom\ninclude FHIRCommon called FC\n\n// Indicator Definition\n</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>"
  },
  "extension" : [{
    "url" : "http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability",
    "valueCode" : "computable"
  }],
  "url" : "http://smart.who.int/HIV/Library/HIVIND43Logic",
  "version" : "0.1.0",
  "name" : "HIVIND43Logic",
  "title" : "HIV.IND.43 Logic",
  "status" : "draft",
  "experimental" : true,
  "type" : {
    "coding" : [{
      "system" : "http://terminology.hl7.org/CodeSystem/library-type",
      "code" : "logic-library"
    }]
  },
  "date" : "2024-07-01T05:12:03+00:00",
  "publisher" : "WHO",
  "contact" : [{
    "name" : "WHO",
    "telecom" : [{
      "system" : "url",
      "value" : "http://who.int"
    }]
  }],
  "description" : "% of pregnant women who are HIV-positive at the time of their first test during the current pregnancy",
  "content" : [{
    "contentType" : "text/cql",
    "data" : "LyoKICogTGlicmFyeTogSElWLklORC40MyBMb2dpYwogKiBSZWYgTm86IFZFUi43CiAqIFNob3J0IE5hbWU6IEhJViBwcmV2YWxlbmNlIGFtb25nIHdvbWVuIGF0dGVuZGluZyBBTkMKICoKICogRGVmaW5pdGlvbjogJSBvZiBwcmVnbmFudCB3b21lbiB3aG8gYXJlIEhJVi1wb3NpdGl2ZSBhdCB0aGUgdGltZSBvZiB0aGVpciBmaXJzdCB0ZXN0IGR1cmluZyB0aGUgY3VycmVudCBwcmVnbmFuY3kKICoKICogTnVtZXJhdG9yOiBOdW1iZXIgb2YgQU5DIGF0dGVuZGVlcyB3aG8gdGVzdGVkIEhJVi1wb3NpdGl2ZSBhdCB0aGVpciBmaXJzdCB0ZXN0IGR1cmluZyB0aGUgY3VycmVudCBwcmVnbmFuY3kgcGx1cyBudW1iZXIgb2YgQU5DIGF0dGVuZGVlcyBrbm93biB0byBiZSBISVYtcG9zaXRpdmUgYmVmb3JlIHRoZWlyIGZpcnN0IEFOQyB2aXNpdAogKiBOdW1lcmF0b3IgQ2FsY3VsYXRpb246IENPVU5UIG9mICJDdXJyZW50bHkgcHJlZ25hbnQiIGNsaWVudHMgd2l0aCAiSElWIHRlc3QgcmVzdWx0Ij0nSElWLXBvc2l0aXZlJyBBTkQgIkhJViB0ZXN0IGRhdGUiIG9uICJBTkMgY29udGFjdCBkYXRlIiBpcyBFQVJMSUVTVCB3aXRoaW4gY3VycmVudCBwcmVnbmFuY3kgfCBQTFVTIHwgQ09VTlQgb2YgY2xpZW50cyB3aXRoICJISVYgc3RhdHVzIj0nSElWLXBvc2l0aXZlJyBvbiBmaXJzdCAiQU5DIGNvbnRhY3QgZGF0ZSIKICogTnVtZXJhdG9yIEV4Y2x1c2lvbnM6IAogKgogKiBEZW5vbWluYXRvcjogTnVtYmVyIG9mIEFOQyBhdHRlbmRlZXMgcmVjZWl2aW5nIHRoZWlyIGZpcnN0IEhJViB0ZXN0IGR1cmluZyBwcmVnbmFuY3kgcGx1cyBudW1iZXIgb2YgQU5DIGF0dGVuZGVlcyBrbm93biB0byBiZSBISVYtcG9zaXRpdmUgYmVmb3JlIGZpcnN0IEFOQyB2aXNpdAogKiBEZW5vbWluYXRvciBDYWxjdWxhdGlvbjogQ09VTlQgb2YgIkN1cnJlbnRseSBwcmVnbmFudCIgY2xpZW50cyB3aXRoICJISVYgdGVzdCBkYXRlIiBvbiBhICJBTkMgY29udGFjdCBkYXRlIiBkdXJpbmcgY3VycmVudCBwcmVnbmFuY3kgfCBQTFVTIHwgQ09VTlQgb2YgY2xpZW50cyB3aXRoICJISVYgc3RhdHVzIj0nSElWLXBvc2l0aXZlJyBvbiBmaXJzdCAiQU5DIGNvbnRhY3QgZGF0ZSIKICogRGVub21pbmF0b3IgRXhjbHVzaW9uczogCiAqCiAqIERpc2FnZ3JlZ2F0aW9uczoKICog4oCiIEFnZSAoPDE1LCAxNeKAkzE5LCAyMOKAkzI0LCAyNeKAkzI5LCAzMOKAkzM0LCAzNeKAkzM5LCA0MOKAkzQ5LCA1MCsgeWVhcnMpCiAqIOKAosKgSElWIHN0YXR1cyBhdCBmaXJzdCB0ZXN0IGR1cmluZyBjdXJyZW50IHByZWduYW5jeSAoa25vd24gcG9zaXRpdmUsIHRlc3RlZCBISVYtbmVnYXRpdmUsIHRlc3RlZCBISVYtcG9zaXRpdmUsIG5vdCB0ZXN0ZWQpCiAqIOKAosKgQ2l0aWVzIGFuZCBvdGhlciBhZG1pbmlzdHJhdGl2ZSByZWdpb25zIG9mIGVwaWRlbWlvbG9naWMgaW1wb3J0YW5jZQogKiAKICogRGlzYWdncmVnYXRpb24gRWxlbWVudHM6IEFnZSB8IEhJViBzdGF0dXMgYXQgZmlyc3QgSElWIHRlc3QgZHVyaW5nIGN1cnJlbnQgcHJlZ25hbmN5CiAqCiAqIE51bWVyYXRvciBhbmQgRGVub21pbmF0b3IgRWxlbWVudHM6CiAqIEFOQyBjb250YWN0IGRhdGUgfCBDdXJyZW50bHkgcHJlZ25hbnQgfCBISVYgc3RhdHVzIHwgSElWIHRlc3QgZGF0ZSB8IEhJViB0ZXN0IHJlc3VsdAogKgogKiBSZWZlcmVuY2U6IENvbnNvbGlkYXRlZCBndWlkZWxpbmVzIG9uIHBlcnNvbi1jZW50cmVkIEhJViBzdHJhdGVnaWMgaW5mb3JtYXRpb246IHN0cmVuZ3RoZW5pbmcgcm91dGluZSBkYXRhIGZvciBpbXBhY3QuIEdlbmV2YTogV29ybGQgSGVhbHRoIE9yZ2FuaXphdGlvbjsgMjAyMgogKiAKICogRGF0YSBDb25jZXB0czoKICogIAogKiBISVYuQS5ERTE3OiBBZ2UgfCBDYWxjdWxhdGVkIGFnZSAobnVtYmVyIG9mIHllYXJzKSBvZiB0aGUgY2xpZW50IGJhc2VkIG9uIGRhdGUgb2YgYmlydGggCiAqIEhJVi5CLkRFMjk6IEN1cnJlbnRseSBwcmVnbmFudCB8IENsaWVudCBpcyBjdXJyZW50bHkgcHJlZ25hbnQgCiAqIEhJVi5CLkRFMTEwOiBISVYgdGVzdCBkYXRlIHwgRGF0ZSBvZiB0aGUgSElWIHRlc3QgCiAqIEhJVi5CLkRFMTExOiBISVYgdGVzdCByZXN1bHQgfCBUaGUgcmVzdWx0IGZyb20gSElWIHRlc3RpbmcgYWZ0ZXIgYXBwbHlpbmcgdGhlIHRlc3RpbmcgYWxnb3JpdGhtIAogKiBISVYuQi5ERTExMjogSElWLXBvc2l0aXZlIHwgVGVzdCByZXN1bHQgaXMgSElWLXBvc2l0aXZlIAogKiBISVYuQi5ERTExMzogSElWLW5lZ2F0aXZlIHwgVGVzdCByZXN1bHQgaXMgSElWLW5lZ2F0aXZlIAogKiBISVYuQi5ERTExNDogSElWLWluY29uY2x1c2l2ZSB8IFRlc3QgcmVzdWx0IGlzIEhJVi1pbmNvbmNsdXNpdmUgCiAqIEhJVi5CLkRFMTE1OiBISVYgc3RhdHVzIHwgSElWIHN0YXR1cyByZXBvcnRlZCBhZnRlciBhcHBseWluZyB0aGUgbmF0aW9uYWwgSElWIHRlc3RpbmcgYWxnb3JpdGhtLiBObyBzaW5nbGUgSElWIHRlc3QgY2FuIHByb3ZpZGUgYW4gSElWLXBvc2l0aXZlIGRpYWdub3Npcy4gCiAqIEhJVi5CLkRFMTE2OiBISVYtcG9zaXRpdmUgfCBDbGllbnQgaXMgSElWLXBvc2l0aXZlIAogKiBISVYuQi5ERTExNzogSElWLW5lZ2F0aXZlIHwgQ2xpZW50IGlzIEhJVi1uZWdhdGl2ZSAKICogSElWLkIuREUxMTg6IFVua25vd24gfCBDbGllbnQgaGFzIHVua25vd24gSElWIHN0YXR1cyAKICogSElWLkQuREUzMTogQ3VycmVudGx5IHByZWduYW50IHwgQ2xpZW50IGlzIGN1cnJlbnRseSBwcmVnbmFudCAKICogSElWLkUuREU4NTogQU5DIGNvbnRhY3QgZGF0ZSB8IFRoZSBkYXRlIGFuZCB0aW1lIG9mIHRoZSBjbGllbnQncyBBTkMgY29udGFjdCAoaW4gdGhlIEFOQyBEQUsgdGhpcyBpcyBjYWxsZWQgJ0NvbnRhY3QgZGF0ZScpIAogKiBISVYuRS5ERTIyNDogSElWIHRlc3QgZGF0ZSB8IERhdGUgb2YgdGhlIEhJViB0ZXN0CiAqCiAqIEFkZGl0aW9uYWwgQ29udGV4dAogKiAtIHdoYXQgaXQgbWVhc3VyZXM6IEhJViBwcmV2YWxlbmNlIGFtb25nIHByZWduYW50IHdvbWVuIGF0dGVuZGluZyBBTkMsIGluY2x1ZGluZyB0aG9zZSB3aG8gd2VyZSBkaWFnbm9zZWQgd2l0aCBISVYgYmVmb3JlIHRoZWlyIGZpcnN0IEFOQyB2aXNpdCBhbmQgdGhvc2UgdGVzdGluZyBwb3NpdGl2ZSBkdXJpbmcgdGhlaXIgY3VycmVudCBwcmVnbmFuY3kuCiAqIC0gcmF0aW9uYWxlOiBISVYgcHJldmFsZW5jZSBhbW9uZyBBTkMgYXR0ZW5kZWVzIGlzIHVzZWQgZm9yIHN1cnZlaWxsYW5jZSB0byBtZWFzdXJlIEhJViBwcmV2YWxlbmNlIGFuZCBpbmNpZGVuY2UgYW5kIHRvIG1vbml0b3IgdHJlbmRzIGluIEhJViBpbmZlY3Rpb24gd2hlbiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldCB0byBlbnN1cmUgdGhhdCBISVYgcHJldmFsZW5jZSBhbW9uZyBBTkMgY2xpZW50cyBpcyBjb25zaXN0ZW50bHkgcmVwcmVzZW50YXRpdmUgb2YgSElWIHByZXZhbGVuY2UgYW1vbmcgYWxsIHByZWduYW50IHdvbWVuOiB8IOKAoiBBTkMgYXR0ZW5kYW5jZSBpcyBoaWdoIGFuZCBhbGwgd29tZW4gYXJlIHJlY29yZGVkIChmb3IgZXhhbXBsZSwgbm90IG1pc3NpbmcgbGFyZ2UgcHJpdmF0ZS1zZWN0b3IgQU5DIHNlcnZpY2VzKS4gfCDigKLCoEhJViB0ZXN0aW5nIGlzIG9mZmVyZWQgdG8gYWxsIHByZWduYW50IHdvbWVuIGFuZCBub3QgcmVzdHJpY3RlZCB0byBvbmx5IGhpZ2hlci1yaXNrIHdvbWVuIG9yIGludGVycnVwdGVkIGR1ZSB0byBzdG9jay1vdXRzIG9mIHRlc3Qga2l0cy4gfCDigKLCoE9ubHkgdGhlIGZpcnN0IEhJViB0ZXN0IHJlc3VsdCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSBISVYgcHJldmFsZW5jZSBkdXJpbmcgYSBzaW5nbGUgcHJlZ25hbmN5LiB8IOKAosKgV29tZW4gd2hvIGFyZSBhbHJlYWR5IGtub3duIHRvIGJlIEhJVi1wb3NpdGl2ZSBhbmQvb3IgYXJlIGFscmVhZHkgb24gQVJUIHByaW9yIHRvIHRoZWlyIGZpcnN0IEFOQyB2aXNpdCBkdXJpbmcgYSBwcmVnbmFuY3kgYW5kLCB0aGVyZWZvcmUsIGFyZSBub3QgdGVzdGVkIGZvciBISVYsIGFyZSByZWNvcmRlZCB8IGFuZCBpbmNsdWRlZCBpbiByb3V0aW5lIHJlcG9ydGluZy4gQWxsIEhJVi1wb3NpdGl2ZSB3b21lbiBtdXN0IGJlIGluY2x1ZGVkIGluIGJvdGggdGhlIG51bWVyYXRvciBhbmQgZGVub21pbmF0b3Igd2hlbiBjYWxjdWxhdGluZyBISVYgcHJldmFsZW5jZSBhbW9uZyBwcmVnbmFudCB3b21lbi4gfCAgfCBTZWUgc2VjdGlvbiA1LjIgNCBvbiBXSE8ncyAyMDIyIEhJViBTSSBHdWlkZWxpbmVzIG9uIHJvdXRpbmUgYW50ZW5hdGFsIEhJViB0ZXN0aW5nIGZvciBtb3JlIGRldGFpbC4gfCBUaGlzIGluZGljYXRvciBpcyBhbHNvIHVzZWZ1bCBmb3IgZXN0aW1hdGluZyB0aGUgbnVtYmVyIG9mIHdvbWVuIGluIG5lZWQgb2YgUE1UQ1Qgc2VydmljZXMgZm9yIHByb2dyYW1tZSBwbGFubmluZyBwdXJwb3Nlcy4KICogLSBtZXRob2Q6IEFOQyByZWdpc3RlcnMsIHBhdGllbnQgbW9uaXRvcmluZyB0b29scywgRU1ScyAoZm9yIGV4YW1wbGUsIHBhdGllbnQgcmVjb3JkcykuIHwgIHwgVGhlIHJlY29tbWVuZGVkIHJlcG9ydGluZyBwZXJpb2QgaXMgMTIgbW9udGhzLgogKiAKICogU3VnZ2VzdGVkIFNjb3JpbmcgTWV0aG9kOiBwcm9wb3J0aW9uIHwgaHR0cDovL2hsNy5vcmcvZmhpci91cy9jcWZtZWFzdXJlcy9TdHJ1Y3R1cmVEZWZpbml0aW9uL3Byb3BvcnRpb24tbWVhc3VyZS1jcWZtCiAqLwoKbGlicmFyeSBISVZJTkQ0M0xvZ2ljCgovLyBJbmNsdWRlZCBMaWJyYXJpZXMKdXNpbmcgRkhJUiB2ZXJzaW9uICc0LjAuMScKCmluY2x1ZGUgSElWSW5kaWNhdG9yQ29tbW9uIHZlcnNpb24gJzAuMC4xJyBjYWxsZWQgSElDCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC4wLjEnCmluY2x1ZGUgV0hPQ29tbW9uIGNhbGxlZCBXQ29tCmluY2x1ZGUgRkhJUkNvbW1vbiBjYWxsZWQgRkMKCi8vIEluZGljYXRvciBEZWZpbml0aW9uCg=="
  },
  {
    "contentType" : "application/elm+xml"
  }]
}