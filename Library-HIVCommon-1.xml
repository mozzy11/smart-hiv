<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="None" xsi:type="a:CqlToElmInfo"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="2680">
         <a:s>library HIVCommon version '0.0.1'</a:s>
      </a:s>
   </annotation>
   <identifier id="HIVCommon" system="http://smart.who.int/hiv" version="0.0.1"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="6:1-6:29" localIdentifier="WCom" path="http://smart.who.int/hiv/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="8:1-8:29" localIdentifier="HC" path="http://smart.who.int/hiv/HIVConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>//include FHIRCommon called FC
include </a:s>
               <a:s>
                  <a:s>HIVConcepts</a:s>
               </a:s>
               <a:s> called HC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="9:1-9:36" localIdentifier="HCC" path="http://smart.who.int/hiv/HIVConceptsCustom">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVConceptsCustom</a:s>
               </a:s>
               <a:s> called HCC</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="11" locator="11:1-11:88" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="11">
               <a:s>parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="10">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="9">
                     <a:s>Date</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> default </a:s>
               <a:s r="8">
                  <a:s r="6">Interval[@2020-01-01, @2020-12-31]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="8" locator="11:55-11:88" lowClosed="true" highClosed="true" xsi:type="Interval">
            <low localId="6" locator="11:64-11:74" xsi:type="Date">
               <year valueType="t:Integer" value="2020" xsi:type="Literal"/>
               <month valueType="t:Integer" value="1" xsi:type="Literal"/>
               <day valueType="t:Integer" value="1" xsi:type="Literal"/>
            </low>
            <high localId="7" locator="11:77-11:87" xsi:type="Date">
               <year valueType="t:Integer" value="2020" xsi:type="Literal"/>
               <month valueType="t:Integer" value="12" xsi:type="Literal"/>
               <day valueType="t:Integer" value="31" xsi:type="Literal"/>
            </high>
         </default>
         <parameterTypeSpecifier localId="10" locator="11:32-11:45" xsi:type="IntervalTypeSpecifier">
            <pointType localId="9" locator="11:41-11:44" name="t:Date" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
      <def localId="14" locator="12:1-12:53" name="Measurement Date" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="14">
               <a:s>parameter &quot;Measurement Date&quot; </a:s>
               <a:s r="13">
                  <a:s>Date</a:s>
               </a:s>
               <a:s r="12"> default @2020-01-01</a:s>
            </a:s>
         </annotation>
         <default localId="12" locator="12:43-12:53" xsi:type="Date">
            <year valueType="t:Integer" value="2020" xsi:type="Literal"/>
            <month valueType="t:Integer" value="1" xsi:type="Literal"/>
            <day valueType="t:Integer" value="1" xsi:type="Literal"/>
         </default>
         <parameterTypeSpecifier localId="13" locator="12:30-12:33" name="t:Date" xsi:type="NamedTypeSpecifier"/>
      </def>
   </parameters>
   <contexts>
      <def locator="14:1-14:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="14:1-14:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="14:1-14:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="38" locator="24:1-28:48" name="HIV Positive Condition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="38">
               <a:s>/*
 * HIV Positive during the measurement period
 * Does issued imply that results returned to tester
 * or should use communication or encounter resource to specify?
 */



define &quot;HIV Positive Condition&quot;:
</a:s>
               <a:s r="37">
                  <a:s>
                     <a:s r="16">
                        <a:s r="15">
                           <a:s r="15">
                              <a:s>[Condition]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="36">
                     <a:s>where </a:s>
                     <a:s r="36">
                        <a:s r="30">
                           <a:s r="21">
                              <a:s r="18">
                                 <a:s r="17">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="18">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="20">
                                 <a:s r="19">
                                    <a:s>HCC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="20">
                                    <a:s>&quot;active&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="29">
                              <a:s>exists</a:s>
                              <a:s r="28">
                                 <a:s>(</a:s>
                                 <a:s r="28">
                                    <a:s>
                                       <a:s r="23">
                                          <a:s r="22">
                                             <a:s>
                                                <a:s>C.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> CC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="27">
                                       <a:s>where </a:s>
                                       <a:s r="27">
                                          <a:s r="24">
                                             <a:s>CC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="26">
                                             <a:s r="25">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="26">
                                                <a:s>&quot;encounter-diagnosis&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="35">
                           <a:s r="32">
                              <a:s r="31">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="32">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="34">
                              <a:s r="33">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="34">
                                 <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="37" locator="25:1-28:48" xsi:type="Query">
            <source localId="16" locator="25:1-25:13" alias="C">
               <expression localId="15" locator="25:1-25:11" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
            </source>
            <where localId="36" locator="26:5-28:48" xsi:type="And">
               <operand localId="30" locator="26:11-27:66" xsi:type="And">
                  <operand localId="21" locator="26:11-26:41" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="18" locator="26:11-26:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="20" locator="26:30-26:41" name="active" libraryName="HCC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand localId="29" locator="27:9-27:66" xsi:type="Exists">
                     <operand localId="28" locator="27:15-27:66" xsi:type="Query">
                        <source localId="23" locator="27:16-27:28" alias="CC">
                           <expression localId="22" locator="27:16-27:25" path="category" scope="C" xsi:type="Property"/>
                        </source>
                        <where localId="27" locator="27:30-27:65" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="24" locator="27:36-27:37" name="CC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="26" locator="27:41-27:65" name="encounter-diagnosis" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="35" locator="28:9-28:48" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="32" locator="28:9-28:14" path="code" scope="C" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="34" locator="28:18-28:48" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="60" locator="30:1-34:49" name="HIV Positive Observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="60">
               <a:s>define &quot;HIV Positive Observation&quot;:
</a:s>
               <a:s r="59">
                  <a:s>
                     <a:s r="40">
                        <a:s r="39">
                           <a:s r="39">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="58">
                     <a:s>where </a:s>
                     <a:s r="58">
                        <a:s r="52">
                           <a:s r="46">
                              <a:s r="42">
                                 <a:s r="41">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="42">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="45">
                                 <a:s>{</a:s>
                                 <a:s r="43">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="44">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="51">
                              <a:s r="48">
                                 <a:s r="47">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="48">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="50">
                                 <a:s r="49">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="50">
                                    <a:s>&quot;HIV status&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="57">
                           <a:s r="54">
                              <a:s r="53">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="54">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="56">
                              <a:s r="55">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="56">
                                 <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="59" locator="31:1-34:49" xsi:type="Query">
            <source localId="40" locator="31:1-31:15" alias="O">
               <expression localId="39" locator="31:1-31:13" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="58" locator="32:5-34:49" xsi:type="And">
               <operand localId="52" locator="32:11-33:32" xsi:type="And">
                  <operand localId="46" locator="32:11-32:42" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="42" locator="32:11-32:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="45" locator="32:23-32:42" xsi:type="List">
                        <element localId="43" locator="32:24-32:30" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="44" locator="32:33-32:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="51" locator="33:9-33:32" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="48" locator="33:9-33:14" path="code" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="50" locator="33:18-33:32" name="HIV status" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="57" locator="34:9-34:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="54" locator="34:9-34:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="56" locator="34:19-34:49" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="82" locator="36:1-40:49" name="HIV Positive Observation - HIV Self Test" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="82">
               <a:s>define &quot;HIV Positive Observation - HIV Self Test&quot;:
</a:s>
               <a:s r="81">
                  <a:s>
                     <a:s r="62">
                        <a:s r="61">
                           <a:s r="61">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="80">
                     <a:s>where </a:s>
                     <a:s r="80">
                        <a:s r="74">
                           <a:s r="68">
                              <a:s r="64">
                                 <a:s r="63">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="64">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="67">
                                 <a:s>{</a:s>
                                 <a:s r="65">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="66">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="73">
                              <a:s r="70">
                                 <a:s r="69">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="70">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="72">
                                 <a:s r="71">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="72">
                                    <a:s>&quot;HIV self-test&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="79">
                           <a:s r="76">
                              <a:s r="75">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="76">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="78">
                              <a:s r="77">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="78">
                                 <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="81" locator="37:1-40:49" xsi:type="Query">
            <source localId="62" locator="37:1-37:15" alias="O">
               <expression localId="61" locator="37:1-37:13" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="80" locator="38:5-40:49" xsi:type="And">
               <operand localId="74" locator="38:11-39:35" xsi:type="And">
                  <operand localId="68" locator="38:11-38:42" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="64" locator="38:11-38:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="67" locator="38:23-38:42" xsi:type="List">
                        <element localId="65" locator="38:24-38:30" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="66" locator="38:33-38:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="73" locator="39:9-39:35" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="70" locator="39:9-39:14" path="code" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="72" locator="39:18-39:35" name="HIV self-test" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="79" locator="40:9-40:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="76" locator="40:9-40:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="78" locator="40:19-40:49" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="104" locator="42:1-46:49" name="HIV Negative Observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="104">
               <a:s>define &quot;HIV Negative Observation&quot;:
</a:s>
               <a:s r="103">
                  <a:s>
                     <a:s r="84">
                        <a:s r="83">
                           <a:s r="83">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="102">
                     <a:s>where </a:s>
                     <a:s r="102">
                        <a:s r="96">
                           <a:s r="90">
                              <a:s r="86">
                                 <a:s r="85">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="86">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="89">
                                 <a:s>{</a:s>
                                 <a:s r="87">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="88">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="95">
                              <a:s r="92">
                                 <a:s r="91">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="92">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="94">
                                 <a:s r="93">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="94">
                                    <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="101">
                           <a:s r="98">
                              <a:s r="97">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="98">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="100">
                              <a:s r="99">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="100">
                                 <a:s>&quot;HIV-negative - HIV.B.DE117&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="103" locator="43:1-46:49" xsi:type="Query">
            <source localId="84" locator="43:1-43:15" alias="O">
               <expression localId="83" locator="43:1-43:13" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="102" locator="44:5-46:49" xsi:type="And">
               <operand localId="96" locator="44:11-45:64" xsi:type="And">
                  <operand localId="90" locator="44:11-44:42" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="86" locator="44:11-44:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="89" locator="44:23-44:42" xsi:type="List">
                        <element localId="87" locator="44:24-44:30" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="88" locator="44:33-44:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="95" locator="45:9-45:64" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="92" locator="45:9-45:14" path="code" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="94" locator="45:18-45:64" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="101" locator="46:9-46:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="98" locator="46:9-46:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="100" locator="46:19-46:49" name="HIV-negative - HIV.B.DE117" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="120" locator="48:1-51:64" name="HIV test resulted" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="120">
               <a:s>define &quot;HIV test resulted&quot;:
  </a:s>
               <a:s r="119">
                  <a:s>
                     <a:s r="106">
                        <a:s r="105">
                           <a:s r="105">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="118">
                     <a:s>where </a:s>
                     <a:s r="118">
                        <a:s r="112">
                           <a:s r="108">
                              <a:s r="107">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="108">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="111">
                              <a:s>{</a:s>
                              <a:s r="109">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="110">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>}</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="117">
                           <a:s r="114">
                              <a:s r="113">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="114">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="116">
                              <a:s r="115">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="116">
                                 <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="119" locator="49:3-51:64" xsi:type="Query">
            <source localId="106" locator="49:3-49:17" alias="O">
               <expression localId="105" locator="49:3-49:15" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="118" locator="50:5-51:64" xsi:type="And">
               <operand localId="112" locator="50:11-50:42" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="108" locator="50:11-50:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="111" locator="50:23-50:42" xsi:type="List">
                     <element localId="109" locator="50:24-50:30" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="110" locator="50:33-50:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="117" locator="51:9-51:64" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="114" locator="51:9-51:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="116" locator="51:18-51:64" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="137" locator="53:1-56:66" name="HIV Treatment Active" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="137">
               <a:s>define &quot;HIV Treatment Active&quot;:
</a:s>
               <a:s r="136">
                  <a:s>
                     <a:s r="122">
                        <a:s r="121">
                           <a:s r="121">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="135">
                     <a:s>where </a:s>
                     <a:s r="135">
                        <a:s r="126">
                           <a:s r="124">
                              <a:s r="123">
                                 <a:s>MS</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="124">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="125">
                              <a:s>'recorded'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="134">
                           <a:s>exists</a:s>
                           <a:s r="133">
                              <a:s>(</a:s>
                              <a:s r="133">
                                 <a:s>
                                    <a:s r="128">
                                       <a:s r="127">
                                          <a:s>
                                             <a:s>MS.reasonCode</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="132">
                                    <a:s>where </a:s>
                                    <a:s r="132">
                                       <a:s r="129">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="131">
                                          <a:s r="130">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="131">
                                             <a:s>&quot;On ART - HIV.H.DE47&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="136" locator="54:1-56:66" xsi:type="Query">
            <source localId="122" locator="54:1-54:24" alias="MS">
               <expression localId="121" locator="54:1-54:21" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <where localId="135" locator="55:5-56:66" xsi:type="And">
               <operand localId="126" locator="55:11-55:32" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="124" locator="55:11-55:19" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="125" locator="55:23-55:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
               </operand>
               <operand localId="134" locator="56:9-56:66" xsi:type="Exists">
                  <operand localId="133" locator="56:15-56:66" xsi:type="Query">
                     <source localId="128" locator="56:16-56:30" alias="C">
                        <expression localId="127" locator="56:16-56:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="132" locator="56:32-56:65" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="129" locator="56:38" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="131" locator="56:42-56:65" name="On ART - HIV.H.DE47" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="154" locator="59:1-62:70" name="HIV PREP Active" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="154">
               <a:s>define &quot;HIV PREP Active&quot;:
</a:s>
               <a:s r="153">
                  <a:s>
                     <a:s r="139">
                        <a:s r="138">
                           <a:s r="138">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="152">
                     <a:s>where </a:s>
                     <a:s r="152">
                        <a:s r="143">
                           <a:s r="141">
                              <a:s r="140">
                                 <a:s>MS</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="141">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="142">
                              <a:s>'recorded'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="151">
                           <a:s>exists</a:s>
                           <a:s r="150">
                              <a:s>(</a:s>
                              <a:s r="150">
                                 <a:s>
                                    <a:s r="145">
                                       <a:s r="144">
                                          <a:s>
                                             <a:s>MS.reasonCode</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="149">
                                    <a:s>where </a:s>
                                    <a:s r="149">
                                       <a:s r="146">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="148">
                                          <a:s r="147">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="148">
                                             <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="153" locator="60:1-62:70" xsi:type="Query">
            <source localId="139" locator="60:1-60:24" alias="MS">
               <expression localId="138" locator="60:1-60:21" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <where localId="152" locator="61:5-62:70" xsi:type="And">
               <operand localId="143" locator="61:11-61:32" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="141" locator="61:11-61:19" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="142" locator="61:23-61:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
               </operand>
               <operand localId="151" locator="62:9-62:70" xsi:type="Exists">
                  <operand localId="150" locator="62:15-62:70" xsi:type="Query">
                     <source localId="145" locator="62:16-62:30" alias="C">
                        <expression localId="144" locator="62:16-62:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="149" locator="62:32-62:69" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="146" locator="62:38" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="148" locator="62:42-62:69" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="180" locator="64:2-68:72" name="Client is at elevated risk for HIV acquisition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="180">
               <a:s>define &quot;Client is at elevated risk for HIV acquisition&quot;:
    </a:s>
               <a:s r="179">
                  <a:s>
                     <a:s r="156">
                        <a:s r="155">
                           <a:s r="155">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="178">
                     <a:s>where </a:s>
                     <a:s r="178">
                        <a:s r="172">
                           <a:s r="163">
                              <a:s r="158">
                                 <a:s r="157">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="158">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="162">
                                 <a:s>{ </a:s>
                                 <a:s r="159">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="160">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="161">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="171">
                              <a:s>exists</a:s>
                              <a:s r="170">
                                 <a:s>(</a:s>
                                 <a:s r="170">
                                    <a:s>
                                       <a:s r="165">
                                          <a:s r="164">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="169">
                                       <a:s>where </a:s>
                                       <a:s r="169">
                                          <a:s r="166">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="168">
                                             <a:s r="167">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="168">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="177">
                           <a:s r="174">
                              <a:s r="173">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="174">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="176">
                              <a:s r="175">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="176">
                                 <a:s>&quot;At elevated risk for HIV acquisition - HIV.B.DE225&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="179" locator="65:5-68:72" xsi:type="Query">
            <source localId="156" locator="65:5-65:19" alias="O">
               <expression localId="155" locator="65:5-65:17" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="178" locator="66:5-68:72" xsi:type="And">
               <operand localId="172" locator="66:11-67:61" xsi:type="And">
                  <operand localId="163" locator="66:11-66:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="158" locator="66:11-66:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="162" locator="66:23-66:57" xsi:type="List">
                        <element localId="159" locator="66:25-66:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="160" locator="66:34-66:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="161" locator="66:45-66:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="171" locator="67:9-67:61" xsi:type="Exists">
                     <operand localId="170" locator="67:15-67:61" xsi:type="Query">
                        <source localId="165" locator="67:16-67:28" alias="OC">
                           <expression localId="164" locator="67:16-67:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="169" locator="67:30-67:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="166" locator="67:36-67:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="168" locator="67:41-67:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="177" locator="68:9-68:72" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="174" locator="68:9-68:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="176" locator="68:18-68:72" name="At elevated risk for HIV acquisition - HIV.B.DE225" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="199" locator="70:1-74:56" name="PREP Prescription" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="199">
               <a:s>define &quot;PREP Prescription&quot;:
    </a:s>
               <a:s r="198">
                  <a:s>
                     <a:s r="182">
                        <a:s r="181">
                           <a:s r="181">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="197">
                     <a:s>where </a:s>
                     <a:s r="197">
                        <a:s r="191">
                           <a:s r="186">
                              <a:s r="184">
                                 <a:s r="183">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="184">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="185">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="190">
                              <a:s r="188">
                                 <a:s r="187">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="188">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="189">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="196">
                           <a:s r="193">
                              <a:s r="192">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="193">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="195">
                              <a:s r="194">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="195">
                                 <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="198" locator="71:5-74:56" xsi:type="Query">
            <source localId="182" locator="71:5-71:26" alias="MR">
               <expression localId="181" locator="71:5-71:23" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="197" locator="72:9-74:56" xsi:type="And">
               <operand localId="191" locator="72:15-73:31" xsi:type="And">
                  <operand localId="186" locator="72:15-72:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="184" locator="72:15-72:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="185" locator="72:27-72:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="190" locator="73:13-73:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="188" locator="73:13-73:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="189" locator="73:25-73:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="196" locator="74:13-74:56" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="193" locator="74:13-74:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="195" locator="74:29-74:56" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="218" locator="76:1-80:55" name="PEP Prescription" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="218">
               <a:s>define &quot;PEP Prescription&quot;:
    </a:s>
               <a:s r="217">
                  <a:s>
                     <a:s r="201">
                        <a:s r="200">
                           <a:s r="200">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="216">
                     <a:s>where </a:s>
                     <a:s r="216">
                        <a:s r="210">
                           <a:s r="205">
                              <a:s r="203">
                                 <a:s r="202">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="203">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="204">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="209">
                              <a:s r="207">
                                 <a:s r="206">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="207">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="208">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="215">
                           <a:s r="212">
                              <a:s r="211">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="212">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="214">
                              <a:s r="213">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="214">
                                 <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="217" locator="77:5-80:55" xsi:type="Query">
            <source localId="201" locator="77:5-77:26" alias="MR">
               <expression localId="200" locator="77:5-77:23" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="216" locator="78:9-80:55" xsi:type="And">
               <operand localId="210" locator="78:15-79:31" xsi:type="And">
                  <operand localId="205" locator="78:15-78:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="203" locator="78:15-78:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="204" locator="78:27-78:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="209" locator="79:13-79:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="207" locator="79:13-79:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="208" locator="79:25-79:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="215" locator="80:13-80:55" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="212" locator="80:13-80:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="214" locator="80:29-80:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="264" locator="82:1-91:3" name="PEP Prescribed before start of Measurement Period and Completed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="264">
               <a:s>define &quot;PEP Prescribed before start of Measurement Period and Completed&quot;:
  </a:s>
               <a:s r="263">
                  <a:s>
                     <a:s r="220">
                        <a:s r="219">
                           <a:s r="219">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="249">
                     <a:s>with </a:s>
                     <a:s r="222">
                        <a:s r="221">
                           <a:s r="221">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="248">
                        <a:s r="242">
                           <a:s r="236">
                              <a:s r="231">
                                 <a:s r="226">
                                    <a:s r="224">
                                       <a:s r="223">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="224">
                                          <a:s>basedOn</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="226">
                                       <a:s>references(</a:s>
                                       <a:s r="225">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="230">
                                    <a:s r="228">
                                       <a:s r="227">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="228">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="229">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="235">
                                 <a:s r="233">
                                    <a:s r="232">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="233">
                                       <a:s>intent</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="234">
                                    <a:s>'order'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="241">
                              <a:s r="238">
                                 <a:s r="237">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="238">
                                    <a:s>medication</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="240">
                                 <a:s r="239">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="240">
                                    <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="247">
                           <a:s r="244">
                              <a:s r="243">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="244">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="247"> before </a:s>
                           <a:s r="246">
                              <a:s>end of </a:s>
                              <a:s r="245">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="262">
                     <a:s>where </a:s>
                     <a:s r="262">
                        <a:s>(</a:s>
                        <a:s r="262">
                           <a:s r="253">
                              <a:s r="251">
                                 <a:s r="250">
                                    <a:s>MS</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="251">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="252">
                                 <a:s>'recorded'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  and </a:s>
                           <a:s r="261">
                              <a:s>exists</a:s>
                              <a:s r="260">
                                 <a:s>(</a:s>
                                 <a:s r="260">
                                    <a:s>
                                       <a:s r="255">
                                          <a:s r="254">
                                             <a:s>
                                                <a:s>MS.reasonCode</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="259">
                                       <a:s>where </a:s>
                                       <a:s r="259">
                                          <a:s r="256">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="258">
                                             <a:s r="257">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="258">
                                                <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="263" locator="83:3-91:3" xsi:type="Query">
            <source localId="220" locator="83:3-83:26" alias="MS">
               <expression localId="219" locator="83:3-83:23" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <relationship localId="249" locator="84:5-88:60" alias="MR" xsi:type="With">
               <expression localId="221" locator="84:10-84:28" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
               <suchThat localId="248" locator="85:17-88:60" xsi:type="And">
                  <operand localId="242" locator="85:17-87:55" xsi:type="And">
                     <operand localId="236" locator="85:17-86:31" xsi:type="And">
                        <operand localId="231" locator="85:17-85:69" xsi:type="And">
                           <operand localId="226" locator="85:17-85:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                              <operand localId="224" locator="85:17-85:26" path="basedOn" scope="MS" xsi:type="Property"/>
                              <operand localId="225" locator="85:39-85:40" name="MR" xsi:type="AliasRef"/>
                           </operand>
                           <operand localId="230" locator="85:47-85:69" xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="228" locator="85:47-85:55" path="status" scope="MR" xsi:type="Property"/>
                              </operand>
                              <operand localId="229" locator="85:59-85:69" valueType="t:String" value="completed" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="235" locator="86:13-86:31" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="233" locator="86:13-86:21" path="intent" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand localId="234" locator="86:25-86:31" valueType="t:String" value="order" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="241" locator="87:13-87:55" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="238" locator="87:13-87:25" path="medication" scope="MR" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="240" locator="87:29-87:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="247" locator="88:13-88:60" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="244" locator="88:13-88:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="246" locator="88:34-88:60" xsi:type="End">
                           <operand localId="245" locator="88:41-88:60" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="262" locator="89:3-91:3" xsi:type="And">
               <operand localId="253" locator="89:10-89:31" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="251" locator="89:10-89:18" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="252" locator="89:22-89:31" valueType="t:String" value="recorded" xsi:type="Literal"/>
               </operand>
               <operand localId="261" locator="90:7-90:68" xsi:type="Exists">
                  <operand localId="260" locator="90:13-90:68" xsi:type="Query">
                     <source localId="255" locator="90:14-90:28" alias="C">
                        <expression localId="254" locator="90:14-90:26" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="259" locator="90:30-90:67" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="256" locator="90:36" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="258" locator="90:40-90:67" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="316" locator="93:1-103:3" name="PEP Prescribed during Measurement Period and Completed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="316">
               <a:s>define &quot;PEP Prescribed during Measurement Period and Completed&quot;:
  </a:s>
               <a:s r="315">
                  <a:s>
                     <a:s r="266">
                        <a:s r="265">
                           <a:s r="265">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="301">
                     <a:s>with </a:s>
                     <a:s r="268">
                        <a:s r="267">
                           <a:s r="267">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="300">
                        <a:s r="294">
                           <a:s r="288">
                              <a:s r="282">
                                 <a:s r="277">
                                    <a:s r="272">
                                       <a:s r="270">
                                          <a:s r="269">
                                             <a:s>MS</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="270">
                                             <a:s>basedOn</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="272">
                                          <a:s>references(</a:s>
                                          <a:s r="271">
                                             <a:s>MR</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> and </a:s>
                                    <a:s r="276">
                                       <a:s r="274">
                                          <a:s r="273">
                                             <a:s>MR</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="274">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="275">
                                          <a:s>'completed'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        and </a:s>
                                 <a:s r="281">
                                    <a:s r="279">
                                       <a:s r="278">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="279">
                                          <a:s>intent</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="280">
                                       <a:s>'order'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="287">
                                 <a:s r="284">
                                    <a:s r="283">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="284">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="286">
                                    <a:s r="285">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="286">
                                       <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="293">
                              <a:s r="290">
                                 <a:s r="289">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="290">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="293"> after </a:s>
                              <a:s r="292">
                                 <a:s>start of </a:s>
                                 <a:s r="291">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="299">
                           <a:s r="296">
                              <a:s r="295">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="296">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="299"> before </a:s>
                           <a:s r="298">
                              <a:s>end of </a:s>
                              <a:s r="297">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="314">
                     <a:s>where </a:s>
                     <a:s r="314">
                        <a:s>(</a:s>
                        <a:s r="314">
                           <a:s r="305">
                              <a:s r="303">
                                 <a:s r="302">
                                    <a:s>MS</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="303">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="304">
                                 <a:s>'recorded'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  and </a:s>
                           <a:s r="313">
                              <a:s>exists</a:s>
                              <a:s r="312">
                                 <a:s>(</a:s>
                                 <a:s r="312">
                                    <a:s>
                                       <a:s r="307">
                                          <a:s r="306">
                                             <a:s>
                                                <a:s>MS.reasonCode</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="311">
                                       <a:s>where </a:s>
                                       <a:s r="311">
                                          <a:s r="308">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="310">
                                             <a:s r="309">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="310">
                                                <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="315" locator="94:3-103:3" xsi:type="Query">
            <source localId="266" locator="94:3-94:26" alias="MS">
               <expression localId="265" locator="94:3-94:23" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <relationship localId="301" locator="95:5-100:60" alias="MR" xsi:type="With">
               <expression localId="267" locator="95:10-95:28" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
               <suchThat localId="300" locator="96:17-100:60" xsi:type="And">
                  <operand localId="294" locator="96:17-99:61" xsi:type="And">
                     <operand localId="288" locator="96:17-98:55" xsi:type="And">
                        <operand localId="282" locator="96:17-97:31" xsi:type="And">
                           <operand localId="277" locator="96:17-96:69" xsi:type="And">
                              <operand localId="272" locator="96:17-96:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="270" locator="96:17-96:26" path="basedOn" scope="MS" xsi:type="Property"/>
                                 <operand localId="271" locator="96:39-96:40" name="MR" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="276" locator="96:47-96:69" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="274" locator="96:47-96:55" path="status" scope="MR" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="275" locator="96:59-96:69" valueType="t:String" value="completed" xsi:type="Literal"/>
                              </operand>
                           </operand>
                           <operand localId="281" locator="97:13-97:31" xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="279" locator="97:13-97:21" path="intent" scope="MR" xsi:type="Property"/>
                              </operand>
                              <operand localId="280" locator="97:25-97:31" valueType="t:String" value="order" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="287" locator="98:13-98:55" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:CodeableConcept" xsi:type="As">
                                 <operand localId="284" locator="98:13-98:25" path="medication" scope="MR" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="286" locator="98:29-98:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="293" locator="99:13-99:61" xsi:type="After">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="290" locator="99:13-99:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="292" locator="99:33-99:61" xsi:type="Start">
                              <operand localId="291" locator="99:42-99:61" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="299" locator="100:13-100:60" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="296" locator="100:13-100:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="298" locator="100:34-100:60" xsi:type="End">
                           <operand localId="297" locator="100:41-100:60" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="314" locator="101:3-103:3" xsi:type="And">
               <operand localId="305" locator="101:10-101:31" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="303" locator="101:10-101:18" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="304" locator="101:22-101:31" valueType="t:String" value="recorded" xsi:type="Literal"/>
               </operand>
               <operand localId="313" locator="102:7-102:68" xsi:type="Exists">
                  <operand localId="312" locator="102:13-102:68" xsi:type="Query">
                     <source localId="307" locator="102:14-102:28" alias="C">
                        <expression localId="306" locator="102:14-102:26" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="311" locator="102:30-102:67" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="308" locator="102:36" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="310" locator="102:40-102:67" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="375" locator="105:1-116:3" name="HIV Test Positive After PEP Prescribed during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="375">
               <a:s>define &quot;HIV Test Positive After PEP Prescribed during Measurement Period&quot;:
  </a:s>
               <a:s r="374">
                  <a:s>
                     <a:s r="318">
                        <a:s r="317">
                           <a:s r="317">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;HIV test result - HIV.B.DE111&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="361">
                     <a:s>with </a:s>
                     <a:s r="320">
                        <a:s r="319">
                           <a:s r="319">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="360">
                        <a:s r="352">
                           <a:s r="346">
                              <a:s r="340">
                                 <a:s r="334">
                                    <a:s r="329">
                                       <a:s r="324">
                                          <a:s r="322">
                                             <a:s r="321">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="322">
                                                <a:s>basedOn</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="324">
                                             <a:s>references(</a:s>
                                             <a:s r="323">
                                                <a:s>MR</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="328">
                                          <a:s r="326">
                                             <a:s r="325">
                                                <a:s>MR</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="326">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="327">
                                             <a:s>'completed'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
        and </a:s>
                                    <a:s r="333">
                                       <a:s r="331">
                                          <a:s r="330">
                                             <a:s>MR</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="331">
                                             <a:s>intent</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="332">
                                          <a:s>'order'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        and </a:s>
                                 <a:s r="339">
                                    <a:s r="336">
                                       <a:s r="335">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="336">
                                          <a:s>medication</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="338">
                                       <a:s r="337">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="338">
                                          <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="345">
                                 <a:s r="342">
                                    <a:s r="341">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="342">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="345"> after </a:s>
                                 <a:s r="344">
                                    <a:s>start of </a:s>
                                    <a:s r="343">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="351">
                              <a:s r="348">
                                 <a:s r="347">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="348">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="351"> before </a:s>
                              <a:s r="350">
                                 <a:s>end of </a:s>
                                 <a:s r="349">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="359">
                           <a:s r="354">
                              <a:s r="353">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="354">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="359"> before </a:s>
                           <a:s r="358">
                              <a:s>(</a:s>
                              <a:s r="358">
                                 <a:s r="356">
                                    <a:s r="355">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="356">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="357">
                                    <a:s>3 months</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="373">
                     <a:s>where </a:s>
                     <a:s r="373">
                        <a:s>( </a:s>
                        <a:s r="373">
                           <a:s r="367">
                              <a:s r="363">
                                 <a:s r="362">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="363">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="366">
                                 <a:s>{</a:s>
                                 <a:s r="364">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="365">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="372">
                              <a:s r="369">
                                 <a:s r="368">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="369">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="371">
                                 <a:s r="370">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="371">
                                    <a:s>&quot;HIV-positive - HIV.B.DE112&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="374" locator="106:3-116:3" xsi:type="Query">
            <source localId="318" locator="106:3-106:53" alias="O">
               <expression localId="317" locator="106:3-106:51" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="106:17-106:50" name="HIV test result - HIV.B.DE111" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <relationship localId="361" locator="107:5-113:54" alias="MR" xsi:type="With">
               <expression localId="319" locator="107:10-107:28" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
               <suchThat localId="360" locator="108:17-113:54" xsi:type="And">
                  <operand localId="352" locator="108:17-112:60" xsi:type="And">
                     <operand localId="346" locator="108:17-111:61" xsi:type="And">
                        <operand localId="340" locator="108:17-110:55" xsi:type="And">
                           <operand localId="334" locator="108:17-109:31" xsi:type="And">
                              <operand localId="329" locator="108:17-108:68" xsi:type="And">
                                 <operand localId="324" locator="108:17-108:40" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                    <operand localId="322" locator="108:17-108:25" path="basedOn" scope="O" xsi:type="Property"/>
                                    <operand localId="323" locator="108:38-108:39" name="MR" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand localId="328" locator="108:46-108:68" xsi:type="Equal">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="326" locator="108:46-108:54" path="status" scope="MR" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="327" locator="108:58-108:68" valueType="t:String" value="completed" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="333" locator="109:13-109:31" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="331" locator="109:13-109:21" path="intent" scope="MR" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="332" locator="109:25-109:31" valueType="t:String" value="order" xsi:type="Literal"/>
                              </operand>
                           </operand>
                           <operand localId="339" locator="110:13-110:55" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:CodeableConcept" xsi:type="As">
                                    <operand localId="336" locator="110:13-110:25" path="medication" scope="MR" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="338" locator="110:29-110:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="345" locator="111:13-111:61" xsi:type="After">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="342" locator="111:13-111:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="344" locator="111:33-111:61" xsi:type="Start">
                                 <operand localId="343" locator="111:42-111:61" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="351" locator="112:13-112:60" xsi:type="Before">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="348" locator="112:13-112:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="350" locator="112:34-112:60" xsi:type="End">
                              <operand localId="349" locator="112:41-112:60" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="359" locator="113:13-113:54" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="354" locator="113:13-113:20" path="issued" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="358" locator="113:29-113:54" xsi:type="Add">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="356" locator="113:30-113:42" path="authoredOn" scope="MR" xsi:type="Property"/>
                        </operand>
                        <operand localId="357" locator="113:46-113:53" value="3" unit="months" xsi:type="Quantity"/>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="373" locator="114:3-116:3" xsi:type="And">
               <operand localId="367" locator="114:11-114:42" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="363" locator="114:11-114:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="366" locator="114:23-114:42" xsi:type="List">
                     <element localId="364" locator="114:24-114:30" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="365" locator="114:33-114:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="372" locator="115:9-115:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="369" locator="115:9-115:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="371" locator="115:19-115:49" name="HIV-positive - HIV.B.DE112" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="413" locator="118:1-125:32" name="Needle Syringe Dispensed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="413">
               <a:s>define &quot;Needle Syringe Dispensed&quot;:  
  </a:s>
               <a:s r="412">
                  <a:s>
                     <a:s r="377">
                        <a:s r="376">
                           <a:s r="376">
                              <a:s>[DeviceUseStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> DUS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="407">
                     <a:s>with </a:s>
                     <a:s r="379">
                        <a:s r="378">
                           <a:s r="378">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="406">
                        <a:s r="400">
                           <a:s r="391">
                              <a:s r="383">
                                 <a:s r="381">
                                    <a:s r="380">
                                       <a:s>DUS</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="381">
                                       <a:s>reasonReference</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="383">
                                    <a:s>references(</a:s>
                                    <a:s r="382">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
        and </a:s>
                              <a:s r="390">
                                 <a:s r="385">
                                    <a:s r="384">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="385">
                                       <a:s>status</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="389">
                                    <a:s>{ </a:s>
                                    <a:s r="386">
                                       <a:s>'final'</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="387">
                                       <a:s>'amended'</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="388">
                                       <a:s>'corrected'</a:s>
                                    </a:s>
                                    <a:s> }</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="399">
                              <a:s>exists</a:s>
                              <a:s r="398">
                                 <a:s>(</a:s>
                                 <a:s r="398">
                                    <a:s>
                                       <a:s r="393">
                                          <a:s r="392">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="397">
                                       <a:s>where </a:s>
                                       <a:s r="397">
                                          <a:s r="394">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="396">
                                             <a:s r="395">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="396">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="405">
                           <a:s r="402">
                              <a:s r="401">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="402">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="404">
                              <a:s r="403">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="404">
                                 <a:s>&quot;People who inject drugs - HIV.B.DE54&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="411">
                     <a:s>where </a:s>
                     <a:s r="411">
                        <a:s r="409">
                           <a:s r="408">
                              <a:s>DUS</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="409">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="410">
                           <a:s>'completed'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="412" locator="119:3-125:32" xsi:type="Query">
            <source localId="377" locator="119:3-119:26" alias="DUS">
               <expression localId="376" locator="119:3-119:22" dataType="fhir:DeviceUseStatement" templateId="http://hl7.org/fhir/StructureDefinition/DeviceUseStatement" xsi:type="Retrieve"/>
            </source>
            <relationship localId="407" locator="120:3-124:63" alias="O" xsi:type="With">
               <expression localId="378" locator="120:8-120:63" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="120:22-120:62" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
               <suchThat localId="406" locator="121:17-124:63" xsi:type="And">
                  <operand localId="400" locator="121:17-123:65" xsi:type="And">
                     <operand localId="391" locator="121:17-122:59" xsi:type="And">
                        <operand localId="383" locator="121:17-121:49" name="references" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="381" locator="121:17-121:35" path="reasonReference" scope="DUS" xsi:type="Property"/>
                           <operand localId="382" locator="121:48" name="O" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="390" locator="122:13-122:59" xsi:type="In">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="385" locator="122:13-122:20" path="status" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand localId="389" locator="122:25-122:59" xsi:type="List">
                              <element localId="386" locator="122:27-122:33" valueType="t:String" value="final" xsi:type="Literal"/>
                              <element localId="387" locator="122:36-122:44" valueType="t:String" value="amended" xsi:type="Literal"/>
                              <element localId="388" locator="122:47-122:57" valueType="t:String" value="corrected" xsi:type="Literal"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="399" locator="123:13-123:65" xsi:type="Exists">
                        <operand localId="398" locator="123:19-123:65" xsi:type="Query">
                           <source localId="393" locator="123:20-123:32" alias="OC">
                              <expression localId="392" locator="123:20-123:29" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="397" locator="123:34-123:64" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="394" locator="123:40-123:41" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="396" locator="123:45-123:64" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="405" locator="124:13-124:63" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="402" locator="124:13-124:19" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="404" locator="124:23-124:63" name="People who inject drugs - HIV.B.DE54" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="411" locator="125:3-125:32" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="409" locator="125:9-125:18" path="status" scope="DUS" xsi:type="Property"/>
               </operand>
               <operand localId="410" locator="125:22-125:32" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="439" locator="127:1-131:59" name="PWID_person" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="439">
               <a:s>define PWID_person:
  </a:s>
               <a:s r="438">
                  <a:s>
                     <a:s r="415">
                        <a:s r="414">
                           <a:s r="414">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="437">
                     <a:s>where </a:s>
                     <a:s r="437">
                        <a:s r="431">
                           <a:s r="422">
                              <a:s r="417">
                                 <a:s r="416">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="417">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="421">
                                 <a:s>{ </a:s>
                                 <a:s r="418">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="419">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="420">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="430">
                              <a:s>exists</a:s>
                              <a:s r="429">
                                 <a:s>(</a:s>
                                 <a:s r="429">
                                    <a:s>
                                       <a:s r="424">
                                          <a:s r="423">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="428">
                                       <a:s>where </a:s>
                                       <a:s r="428">
                                          <a:s r="425">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="427">
                                             <a:s r="426">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="427">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="436">
                           <a:s r="433">
                              <a:s r="432">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="433">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="435">
                              <a:s r="434">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="435">
                                 <a:s>&quot;People who inject drugs - HIV.B.DE54&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="438" locator="128:3-131:59" xsi:type="Query">
            <source localId="415" locator="128:3-128:60" alias="O">
               <expression localId="414" locator="128:3-128:58" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="128:17-128:57" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="437" locator="129:3-131:59" xsi:type="And">
               <operand localId="431" locator="129:9-130:61" xsi:type="And">
                  <operand localId="422" locator="129:9-129:55" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="417" locator="129:9-129:16" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="421" locator="129:21-129:55" xsi:type="List">
                        <element localId="418" locator="129:23-129:29" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="419" locator="129:32-129:40" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="420" locator="129:43-129:53" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="430" locator="130:9-130:61" xsi:type="Exists">
                     <operand localId="429" locator="130:15-130:61" xsi:type="Query">
                        <source localId="424" locator="130:16-130:28" alias="OC">
                           <expression localId="423" locator="130:16-130:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="428" locator="130:30-130:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="425" locator="130:36-130:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="427" locator="130:41-130:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="436" locator="131:9-131:59" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="433" locator="131:9-131:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="435" locator="131:19-131:59" name="People who inject drugs - HIV.B.DE54" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="480" locator="133:1-147:5" name="OAMT_initiated" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="480">
               <a:s>define &quot;OAMT_initiated&quot;:
</a:s>
               <a:s r="479">
                  <a:s>exists</a:s>
                  <a:s r="478">
                     <a:s>(
    </a:s>
                     <a:s r="478">
                        <a:s>
                           <a:s r="441">
                              <a:s r="440">
                                 <a:s r="440">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="477">
                           <a:s>where </a:s>
                           <a:s r="477">
                              <a:s r="449">
                                 <a:s>exists</a:s>
                                 <a:s r="448">
                                    <a:s>(</a:s>
                                    <a:s r="448">
                                       <a:s>
                                          <a:s r="443">
                                             <a:s r="442">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="447">
                                          <a:s>where </a:s>
                                          <a:s r="447">
                                             <a:s r="444">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="446">
                                                <a:s r="445">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="446">
                                                   <a:s>&quot;OAMT&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="476">
                                 <a:s>(</a:s>
                                 <a:s r="476">
                                    <a:s r="464">
                                       <a:s>exists </a:s>
                                       <a:s r="463">
                                          <a:s>(
      </a:s>
                                          <a:s r="463">
                                             <a:s>
                                                <a:s r="451">
                                                   <a:s r="450">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="462">
                                                <a:s>where </a:s>
                                                <a:s r="462">
                                                   <a:s r="456">
                                                      <a:s r="453">
                                                         <a:s r="452">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="453">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="456"> starts after </a:s>
                                                      <a:s r="455">
                                                         <a:s>start of </a:s>
                                                         <a:s r="454">
                                                            <a:s>&quot;Measurement Period&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
      and </a:s>
                                                   <a:s r="461">
                                                      <a:s r="458">
                                                         <a:s r="457">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="458">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="461"> starts before </a:s>
                                                      <a:s r="460">
                                                         <a:s>end of </a:s>
                                                         <a:s r="459">
                                                            <a:s>&quot;Measurement Period&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="475">
                                       <a:s>(
      </a:s>
                                       <a:s r="475">
                                          <a:s r="469">
                                             <a:s r="466">
                                                <a:s r="465">
                                                   <a:s>EOC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="466">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="469"> starts after </a:s>
                                             <a:s r="468">
                                                <a:s>start of </a:s>
                                                <a:s r="467">
                                                   <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
      and </a:s>
                                          <a:s r="474">
                                             <a:s r="471">
                                                <a:s r="470">
                                                   <a:s>EOC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="471">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="474"> starts before </a:s>
                                             <a:s r="473">
                                                <a:s>end of </a:s>
                                                <a:s r="472">
                                                   <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="479" locator="134:1-147:5" xsi:type="Exists">
            <operand localId="478" locator="134:7-147:5" xsi:type="Query">
               <source localId="441" locator="135:5-135:23" alias="EOC">
                  <expression localId="440" locator="135:5-135:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="477" locator="136:5-146:5" xsi:type="And">
                  <operand localId="449" locator="136:11-136:48" xsi:type="Exists">
                     <operand localId="448" locator="136:17-136:48" xsi:type="Query">
                        <source localId="443" locator="136:18-136:27" alias="T">
                           <expression localId="442" locator="136:18-136:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="447" locator="136:29-136:47" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="444" locator="136:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="446" locator="136:39-136:47" name="OAMT" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="476" locator="137:9-146:5" xsi:type="Or">
                     <operand localId="464" locator="137:10-141:5" xsi:type="Exists">
                        <operand localId="463" locator="137:17-141:5" xsi:type="Query">
                           <source localId="451" locator="138:7-138:25" alias="H">
                              <expression localId="450" locator="138:7-138:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="462" locator="139:7-140:60" xsi:type="And">
                              <operand localId="456" locator="139:13-139:63" xsi:type="After">
                                 <operand locator="139:22-139:27" xsi:type="Start">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="453" locator="139:13-139:20" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="ToDateTime">
                                    <operand localId="455" locator="139:35-139:63" xsi:type="Start">
                                       <operand localId="454" locator="139:44-139:63" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="461" locator="140:11-140:60" xsi:type="Before">
                                 <operand locator="140:20-140:25" xsi:type="Start">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="458" locator="140:11-140:18" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="ToDateTime">
                                    <operand localId="460" locator="140:34-140:60" xsi:type="End">
                                       <operand localId="459" locator="140:41-140:60" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="475" locator="142:8-145:5" xsi:type="And">
                        <operand localId="469" locator="143:7-143:59" xsi:type="After">
                           <operand locator="143:18-143:23" xsi:type="Start">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="466" locator="143:7-143:16" path="period" scope="EOC" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="468" locator="143:31-143:59" xsi:type="Start">
                                 <operand localId="467" locator="143:40-143:59" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="474" locator="144:11-144:62" xsi:type="Before">
                           <operand locator="144:22-144:27" xsi:type="Start">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="471" locator="144:11-144:20" path="period" scope="EOC" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="473" locator="144:36-144:62" xsi:type="End">
                                 <operand localId="472" locator="144:43-144:62" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="542" locator="149:1-166:5" name="OAMT_retained" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="542">
               <a:s>define &quot;OAMT_retained&quot;:
</a:s>
               <a:s r="541">
                  <a:s>exists</a:s>
                  <a:s r="540">
                     <a:s>(
    </a:s>
                     <a:s r="540">
                        <a:s>
                           <a:s r="482">
                              <a:s r="481">
                                 <a:s r="481">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="539">
                           <a:s>where </a:s>
                           <a:s r="539">
                              <a:s r="490">
                                 <a:s>exists</a:s>
                                 <a:s r="489">
                                    <a:s>(</a:s>
                                    <a:s r="489">
                                       <a:s>
                                          <a:s r="484">
                                             <a:s r="483">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="488">
                                          <a:s>where </a:s>
                                          <a:s r="488">
                                             <a:s r="485">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="487">
                                                <a:s r="486">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="487">
                                                   <a:s>&quot;OAMT&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="538">
                                 <a:s>(</a:s>
                                 <a:s r="538">
                                    <a:s r="513">
                                       <a:s>exists </a:s>
                                       <a:s r="512">
                                          <a:s>(
      </a:s>
                                          <a:s r="512">
                                             <a:s>
                                                <a:s r="492">
                                                   <a:s r="491">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="511">
                                                <a:s>where </a:s>
                                                <a:s r="511">
                                                   <a:s r="503">
                                                      <a:s r="497">
                                                         <a:s r="494">
                                                            <a:s r="493">
                                                               <a:s>H</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="494">
                                                               <a:s>period</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="497"> starts after </a:s>
                                                         <a:s r="496">
                                                            <a:s>start of </a:s>
                                                            <a:s r="495">
                                                               <a:s>&quot;Measurement Period&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>
      and </a:s>
                                                      <a:s r="502">
                                                         <a:s r="499">
                                                            <a:s r="498">
                                                               <a:s>H</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="499">
                                                               <a:s>period</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="502"> starts before </a:s>
                                                         <a:s r="501">
                                                            <a:s>end of </a:s>
                                                            <a:s r="500">
                                                               <a:s>&quot;Measurement Period&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
      and </a:s>
                                                   <a:s r="510">
                                                      <a:s r="505">
                                                         <a:s r="504">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="505">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="510"> ends after </a:s>
                                                      <a:s r="509">
                                                         <a:s>(</a:s>
                                                         <a:s r="509">
                                                            <a:s r="507">
                                                               <a:s>end of </a:s>
                                                               <a:s r="506">
                                                                  <a:s>&quot;Measurement Period&quot;</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> + </a:s>
                                                            <a:s r="508">
                                                               <a:s>6 months</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>)</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="537">
                                       <a:s>(
      </a:s>
                                       <a:s r="537">
                                          <a:s r="524">
                                             <a:s r="518">
                                                <a:s r="515">
                                                   <a:s r="514">
                                                      <a:s>EOC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="515">
                                                      <a:s>period</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s r="518"> starts after </a:s>
                                                <a:s r="517">
                                                   <a:s>start of </a:s>
                                                   <a:s r="516">
                                                      <a:s>&quot;Measurement Period&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      and </a:s>
                                             <a:s r="523">
                                                <a:s r="520">
                                                   <a:s r="519">
                                                      <a:s>EOC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="520">
                                                      <a:s>period</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s r="523"> starts before </a:s>
                                                <a:s r="522">
                                                   <a:s>end of </a:s>
                                                   <a:s r="521">
                                                      <a:s>&quot;Measurement Period&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
      and </a:s>
                                          <a:s r="536">
                                             <a:s>(</a:s>
                                             <a:s r="536">
                                                <a:s r="531">
                                                   <a:s r="526">
                                                      <a:s r="525">
                                                         <a:s>EOC</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="526">
                                                         <a:s>period</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s r="531"> ends after </a:s>
                                                   <a:s r="530">
                                                      <a:s>(</a:s>
                                                      <a:s r="530">
                                                         <a:s r="528">
                                                            <a:s>end of </a:s>
                                                            <a:s r="527">
                                                               <a:s>&quot;Measurement Period&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> + </a:s>
                                                         <a:s r="529">
                                                            <a:s>6 months</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>)</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
      or </a:s>
                                                <a:s r="535">
                                                   <a:s r="534">
                                                      <a:s>end of </a:s>
                                                      <a:s r="533">
                                                         <a:s r="532">
                                                            <a:s>EOC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="533">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> is null</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="541" locator="150:1-166:5" xsi:type="Exists">
            <operand localId="540" locator="150:7-166:5" xsi:type="Query">
               <source localId="482" locator="151:5-151:23" alias="EOC">
                  <expression localId="481" locator="151:5-151:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="539" locator="152:5-165:5" xsi:type="And">
                  <operand localId="490" locator="152:11-152:48" xsi:type="Exists">
                     <operand localId="489" locator="152:17-152:48" xsi:type="Query">
                        <source localId="484" locator="152:18-152:27" alias="T">
                           <expression localId="483" locator="152:18-152:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="488" locator="152:29-152:47" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="485" locator="152:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="487" locator="152:39-152:47" name="OAMT" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="538" locator="153:9-165:5" xsi:type="Or">
                     <operand localId="513" locator="153:10-158:5" xsi:type="Exists">
                        <operand localId="512" locator="153:17-158:5" xsi:type="Query">
                           <source localId="492" locator="154:7-154:25" alias="H">
                              <expression localId="491" locator="154:7-154:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="511" locator="155:7-157:70" xsi:type="And">
                              <operand localId="503" locator="155:13-156:60" xsi:type="And">
                                 <operand localId="497" locator="155:13-155:63" xsi:type="After">
                                    <operand locator="155:22-155:27" xsi:type="Start">
                                       <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="494" locator="155:13-155:20" path="period" scope="H" xsi:type="Property"/>
                                       </operand>
                                    </operand>
                                    <operand xsi:type="ToDateTime">
                                       <operand localId="496" locator="155:35-155:63" xsi:type="Start">
                                          <operand localId="495" locator="155:44-155:63" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                    </operand>
                                 </operand>
                                 <operand localId="502" locator="156:11-156:60" xsi:type="Before">
                                    <operand locator="156:20-156:25" xsi:type="Start">
                                       <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="499" locator="156:11-156:18" path="period" scope="H" xsi:type="Property"/>
                                       </operand>
                                    </operand>
                                    <operand xsi:type="ToDateTime">
                                       <operand localId="501" locator="156:34-156:60" xsi:type="End">
                                          <operand localId="500" locator="156:41-156:60" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="510" locator="157:11-157:70" xsi:type="After">
                                 <operand locator="157:20-157:23" xsi:type="End">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="505" locator="157:11-157:18" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="ToDateTime">
                                    <operand localId="509" locator="157:31-157:70" xsi:type="Add">
                                       <operand localId="507" locator="157:32-157:58" xsi:type="End">
                                          <operand localId="506" locator="157:39-157:58" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                       <operand localId="508" locator="157:62-157:69" value="6" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="537" locator="159:8-164:5" xsi:type="And">
                        <operand localId="524" locator="160:7-161:62" xsi:type="And">
                           <operand localId="518" locator="160:7-160:59" xsi:type="After">
                              <operand locator="160:18-160:23" xsi:type="Start">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="515" locator="160:7-160:16" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="517" locator="160:31-160:59" xsi:type="Start">
                                    <operand localId="516" locator="160:40-160:59" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="523" locator="161:11-161:62" xsi:type="Before">
                              <operand locator="161:22-161:27" xsi:type="Start">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="520" locator="161:11-161:20" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="522" locator="161:36-161:62" xsi:type="End">
                                    <operand localId="521" locator="161:43-161:62" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="536" locator="162:11-163:35" xsi:type="Or">
                           <operand localId="531" locator="162:12-162:73" xsi:type="After">
                              <operand locator="162:23-162:26" xsi:type="End">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="526" locator="162:12-162:21" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="530" locator="162:34-162:73" xsi:type="Add">
                                    <operand localId="528" locator="162:35-162:61" xsi:type="End">
                                       <operand localId="527" locator="162:42-162:61" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                    <operand localId="529" locator="162:65-162:72" value="6" unit="months" xsi:type="Quantity"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="535" locator="163:10-163:34" xsi:type="IsNull">
                              <operand localId="534" locator="163:10-163:26" xsi:type="End">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="533" locator="163:17-163:26" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="561" locator="168:1-172:43" name="methadone_prescribed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="561">
               <a:s>define &quot;methadone_prescribed&quot;:
</a:s>
               <a:s r="560">
                  <a:s>
                     <a:s r="544">
                        <a:s r="543">
                           <a:s r="543">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="559">
                     <a:s>where </a:s>
                     <a:s r="559">
                        <a:s r="553">
                           <a:s r="548">
                              <a:s r="546">
                                 <a:s r="545">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="546">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="547">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="552">
                              <a:s r="550">
                                 <a:s r="549">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="550">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="551">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="558">
                           <a:s r="555">
                              <a:s r="554">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="555">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="557">
                              <a:s r="556">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="557">
                                 <a:s>&quot;methadone&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="560" locator="169:1-172:43" xsi:type="Query">
            <source localId="544" locator="169:1-169:22" alias="MR">
               <expression localId="543" locator="169:1-169:19" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="559" locator="170:9-172:43" xsi:type="And">
               <operand localId="553" locator="170:15-171:31" xsi:type="And">
                  <operand localId="548" locator="170:15-170:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="546" locator="170:15-170:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="547" locator="170:27-170:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="552" locator="171:13-171:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="550" locator="171:13-171:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="551" locator="171:25-171:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="558" locator="172:13-172:43" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="555" locator="172:13-172:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="557" locator="172:29-172:43" name="methadone" libraryName="HCC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="580" locator="174:1-178:47" name="buprenorphine_prescribed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="580">
               <a:s>define &quot;buprenorphine_prescribed&quot;:
</a:s>
               <a:s r="579">
                  <a:s>
                     <a:s r="563">
                        <a:s r="562">
                           <a:s r="562">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="578">
                     <a:s>where </a:s>
                     <a:s r="578">
                        <a:s r="572">
                           <a:s r="567">
                              <a:s r="565">
                                 <a:s r="564">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="565">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="566">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="571">
                              <a:s r="569">
                                 <a:s r="568">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="569">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="570">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="577">
                           <a:s r="574">
                              <a:s r="573">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="574">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="576">
                              <a:s r="575">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="576">
                                 <a:s>&quot;buprenorphine&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="579" locator="175:1-178:47" xsi:type="Query">
            <source localId="563" locator="175:1-175:22" alias="MR">
               <expression localId="562" locator="175:1-175:19" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="578" locator="176:9-178:47" xsi:type="And">
               <operand localId="572" locator="176:15-177:31" xsi:type="And">
                  <operand localId="567" locator="176:15-176:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="565" locator="176:15-176:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="566" locator="176:27-176:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="571" locator="177:13-177:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="569" locator="177:13-177:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="570" locator="177:25-177:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="577" locator="178:13-178:47" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="574" locator="178:13-178:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="576" locator="178:29-178:47" name="buprenorphine" libraryName="HCC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="611" locator="180:1-185:5" name="Patient Deceased before end of Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="611">
               <a:s>define &quot;Patient Deceased before end of Measurement Period&quot;:
  </a:s>
               <a:s r="610">
                  <a:s>case 
    </a:s>
                  <a:s r="596">
                     <a:s>when </a:s>
                     <a:s r="589">
                        <a:s r="584">
                           <a:s r="582">
                              <a:s r="581">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="582">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="583">
                              <a:s>FHIR.boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="588">
                           <a:s r="586">
                              <a:s r="585">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="586">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="587"> ~ true</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="595">
                        <a:s>(</a:s>
                        <a:s r="595">
                           <a:s r="592">
                              <a:s r="591">
                                 <a:s r="590">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="591">
                                    <a:s>meta</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="592">
                                 <a:s>lastUpdated</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="595"> before </a:s>
                           <a:s r="594">
                              <a:s>end of </a:s>
                              <a:s r="593">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="608">
                     <a:s>when </a:s>
                     <a:s r="600">
                        <a:s r="598">
                           <a:s r="597">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="598">
                              <a:s>deceased</a:s>
                           </a:s>
                        </a:s>
                        <a:s> is </a:s>
                        <a:s r="599">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="607">
                        <a:s r="604">
                           <a:s r="602">
                              <a:s r="601">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="602">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s> as </a:s>
                           <a:s r="603">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="607"> before </a:s>
                        <a:s r="606">
                           <a:s>end of </a:s>
                           <a:s r="605">
                              <a:s>&quot;Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="609">
    else false
  end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="610" locator="181:3-185:5" xsi:type="Case">
            <caseItem localId="596" locator="182:5-182:136">
               <when localId="589" locator="182:10-182:69" xsi:type="And">
                  <operand localId="584" locator="182:10-182:41" xsi:type="Is">
                     <operand localId="582" locator="182:10-182:25" path="deceased" xsi:type="Property">
                        <source localId="581" locator="182:10-182:16" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <isTypeSpecifier localId="583" locator="182:30-182:41" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                  </operand>
                  <operand localId="588" locator="182:47-182:69" xsi:type="Equivalent">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="586" locator="182:47-182:62" path="deceased" xsi:type="Property">
                              <source localId="585" locator="182:47-182:53" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="587" locator="182:66-182:69" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  </operand>
               </when>
               <then localId="595" locator="182:76-182:136" xsi:type="Before">
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="592" locator="182:77-182:100" path="lastUpdated" xsi:type="Property">
                        <source localId="591" locator="182:77-182:88" path="meta" xsi:type="Property">
                           <source localId="590" locator="182:77-182:83" name="Patient" xsi:type="ExpressionRef"/>
                        </source>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDateTime">
                     <operand localId="594" locator="182:109-182:135" xsi:type="End">
                        <operand localId="593" locator="182:116-182:135" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="608" locator="183:5-183:116">
               <when localId="600" locator="183:10-183:42" xsi:type="Is">
                  <operand localId="598" locator="183:10-183:25" path="deceased" xsi:type="Property">
                     <source localId="597" locator="183:10-183:16" name="Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <isTypeSpecifier localId="599" locator="183:30-183:42" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="607" locator="183:49-183:116" xsi:type="Before">
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="604" locator="183:49-183:81" strict="false" xsi:type="As">
                        <operand localId="602" locator="183:49-183:64" path="deceased" xsi:type="Property">
                           <source localId="601" locator="183:49-183:55" name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                        <asTypeSpecifier localId="603" locator="183:69-183:81" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDateTime">
                     <operand localId="606" locator="183:90-183:116" xsi:type="End">
                        <operand localId="605" locator="183:97-183:116" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else localId="609" locator="184:10-184:14" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="657" locator="187:1-192:5" name="Patient Deceased during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="657">
               <a:s>define &quot;Patient Deceased during Measurement Period&quot;:
  </a:s>
               <a:s r="656">
                  <a:s>case 
    </a:s>
                  <a:s r="634">
                     <a:s>when </a:s>
                     <a:s r="620">
                        <a:s r="615">
                           <a:s r="613">
                              <a:s r="612">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="613">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="614">
                              <a:s>FHIR.boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="619">
                           <a:s r="617">
                              <a:s r="616">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="617">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="618"> ~ true</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="633">
                        <a:s r="626">
                           <a:s r="623">
                              <a:s r="622">
                                 <a:s r="621">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="622">
                                    <a:s>meta</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="623">
                                 <a:s>lastUpdated</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="626"> before </a:s>
                           <a:s r="625">
                              <a:s>end of  </a:s>
                              <a:s r="624">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> and  </a:s>
                        <a:s r="632">
                           <a:s r="629">
                              <a:s r="628">
                                 <a:s r="627">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="628">
                                    <a:s>meta</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="629">
                                 <a:s>lastUpdated</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="632"> after </a:s>
                           <a:s r="631">
                              <a:s>start of </a:s>
                              <a:s r="630">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="654">
                     <a:s>when </a:s>
                     <a:s r="638">
                        <a:s r="636">
                           <a:s r="635">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="636">
                              <a:s>deceased</a:s>
                           </a:s>
                        </a:s>
                        <a:s> is </a:s>
                        <a:s r="637">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="653">
                        <a:s r="645">
                           <a:s r="642">
                              <a:s r="640">
                                 <a:s r="639">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="640">
                                    <a:s>deceased</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="641">
                                 <a:s>FHIR.dateTime</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="645"> before </a:s>
                           <a:s r="644">
                              <a:s>end of  </a:s>
                              <a:s r="643">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="652">
                           <a:s r="649">
                              <a:s r="647">
                                 <a:s r="646">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="647">
                                    <a:s>deceased</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="648">
                                 <a:s>FHIR.dateTime</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="652"> after </a:s>
                           <a:s r="651">
                              <a:s>start of </a:s>
                              <a:s r="650">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="655">
    else false
  end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="656" locator="188:3-192:5" xsi:type="Case">
            <caseItem localId="634" locator="189:5-189:201">
               <when localId="620" locator="189:10-189:69" xsi:type="And">
                  <operand localId="615" locator="189:10-189:41" xsi:type="Is">
                     <operand localId="613" locator="189:10-189:25" path="deceased" xsi:type="Property">
                        <source localId="612" locator="189:10-189:16" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <isTypeSpecifier localId="614" locator="189:30-189:41" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                  </operand>
                  <operand localId="619" locator="189:47-189:69" xsi:type="Equivalent">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="617" locator="189:47-189:62" path="deceased" xsi:type="Property">
                              <source localId="616" locator="189:47-189:53" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="618" locator="189:66-189:69" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  </operand>
               </when>
               <then localId="633" locator="189:76-189:201" xsi:type="And">
                  <operand localId="626" locator="189:76-189:135" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="623" locator="189:76-189:99" path="lastUpdated" xsi:type="Property">
                           <source localId="622" locator="189:76-189:87" path="meta" xsi:type="Property">
                              <source localId="621" locator="189:76-189:82" name="Patient" xsi:type="ExpressionRef"/>
                           </source>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="625" locator="189:108-189:135" xsi:type="End">
                           <operand localId="624" locator="189:116-189:135" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="632" locator="189:142-189:201" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="629" locator="189:142-189:165" path="lastUpdated" xsi:type="Property">
                           <source localId="628" locator="189:142-189:153" path="meta" xsi:type="Property">
                              <source localId="627" locator="189:142-189:148" name="Patient" xsi:type="ExpressionRef"/>
                           </source>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="631" locator="189:173-189:201" xsi:type="Start">
                           <operand localId="630" locator="189:182-189:201" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="654" locator="190:5-190:191">
               <when localId="638" locator="190:10-190:42" xsi:type="Is">
                  <operand localId="636" locator="190:10-190:25" path="deceased" xsi:type="Property">
                     <source localId="635" locator="190:10-190:16" name="Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <isTypeSpecifier localId="637" locator="190:30-190:42" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="653" locator="190:49-190:191" xsi:type="And">
                  <operand localId="645" locator="190:49-190:117" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="642" locator="190:49-190:81" strict="false" xsi:type="As">
                           <operand localId="640" locator="190:49-190:64" path="deceased" xsi:type="Property">
                              <source localId="639" locator="190:49-190:55" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                           <asTypeSpecifier localId="641" locator="190:69-190:81" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="644" locator="190:90-190:117" xsi:type="End">
                           <operand localId="643" locator="190:98-190:117" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="652" locator="190:123-190:191" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="649" locator="190:123-190:155" strict="false" xsi:type="As">
                           <operand localId="647" locator="190:123-190:138" path="deceased" xsi:type="Property">
                              <source localId="646" locator="190:123-190:129" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                           <asTypeSpecifier localId="648" locator="190:143-190:155" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="651" locator="190:163-190:191" xsi:type="Start">
                           <operand localId="650" locator="190:172-190:191" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else localId="655" locator="191:10-191:14" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="694" locator="196:1-210:5" name="Transfer Out at Facility during the measurement period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="694">
               <a:s>/* End of care because of transferring out*/

define &quot;Transfer Out at Facility during the measurement period&quot;:
    </a:s>
               <a:s r="693">
                  <a:s>exists</a:s>
                  <a:s r="692">
                     <a:s>(
    </a:s>
                     <a:s r="692">
                        <a:s>
                           <a:s r="659">
                              <a:s r="658">
                                 <a:s r="658">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="691">
                           <a:s>where </a:s>
                           <a:s r="691">
                              <a:s r="667">
                                 <a:s>exists</a:s>
                                 <a:s r="666">
                                    <a:s>(</a:s>
                                    <a:s r="666">
                                       <a:s>
                                          <a:s r="661">
                                             <a:s r="660">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="665">
                                          <a:s>where </a:s>
                                          <a:s r="665">
                                             <a:s r="662">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="664">
                                                <a:s r="663">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="664">
                                                   <a:s>&quot;On ART - HIV.H.DE47&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
    and </a:s>
                              <a:s r="690">
                                 <a:s>(</a:s>
                                 <a:s r="690">
                                    <a:s r="680">
                                       <a:s>exists </a:s>
                                       <a:s r="679">
                                          <a:s>(
      </a:s>
                                          <a:s r="679">
                                             <a:s>
                                                <a:s r="669">
                                                   <a:s r="668">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="678">
                                                <a:s>where </a:s>
                                                <a:s r="678">
                                                   <a:s r="673">
                                                      <a:s r="671">
                                                         <a:s r="670">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="671">
                                                            <a:s>status</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> = </a:s>
                                                      <a:s r="672">
                                                         <a:s>'finished'</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
      and </a:s>
                                                   <a:s r="677">
                                                      <a:s r="675">
                                                         <a:s r="674">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="675">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="677"> ends during </a:s>
                                                      <a:s r="676">
                                                         <a:s>&quot;Measurement Period&quot;</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="689">
                                       <a:s>(
      </a:s>
                                       <a:s r="689">
                                          <a:s r="684">
                                             <a:s r="682">
                                                <a:s r="681">
                                                   <a:s>EOC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="682">
                                                   <a:s>status</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> = </a:s>
                                             <a:s r="683">
                                                <a:s>'finished'</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
      and </a:s>
                                          <a:s r="688">
                                             <a:s r="686">
                                                <a:s r="685">
                                                   <a:s>EOC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="686">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="688"> ends during </a:s>
                                             <a:s r="687">
                                                <a:s>&quot;Measurement Period&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="693" locator="197:5-210:5" xsi:type="Exists">
            <operand localId="692" locator="197:11-210:5" xsi:type="Query">
               <source localId="659" locator="198:5-198:23" alias="EOC">
                  <expression localId="658" locator="198:5-198:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="691" locator="199:5-209:5" xsi:type="And">
                  <operand localId="667" locator="199:11-199:63" xsi:type="Exists">
                     <operand localId="666" locator="199:17-199:63" xsi:type="Query">
                        <source localId="661" locator="199:18-199:27" alias="T">
                           <expression localId="660" locator="199:18-199:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="665" locator="199:29-199:62" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="662" locator="199:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="664" locator="199:39-199:62" name="On ART - HIV.H.DE47" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="690" locator="200:9-209:5" xsi:type="Or">
                     <operand localId="680" locator="200:10-204:5" xsi:type="Exists">
                        <operand localId="679" locator="200:17-204:5" xsi:type="Query">
                           <source localId="669" locator="201:7-201:25" alias="H">
                              <expression localId="668" locator="201:7-201:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="678" locator="202:7-203:51" xsi:type="And">
                              <operand localId="673" locator="202:13-202:33" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="671" locator="202:13-202:20" path="status" scope="H" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="672" locator="202:24-202:33" valueType="t:String" value="finished" xsi:type="Literal"/>
                              </operand>
                              <operand localId="677" locator="203:11-203:51" xsi:type="In">
                                 <operand locator="203:20-203:23" xsi:type="End">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="675" locator="203:11-203:18" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="Interval">
                                    <low xsi:type="ToDateTime">
                                       <operand path="low" xsi:type="Property">
                                          <source localId="676" locator="203:32-203:51" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                    </low>
                                    <lowClosedExpression path="lowClosed" xsi:type="Property">
                                       <source localId="676" locator="203:32-203:51" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </lowClosedExpression>
                                    <high xsi:type="ToDateTime">
                                       <operand path="high" xsi:type="Property">
                                          <source localId="676" locator="203:32-203:51" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                    </high>
                                    <highClosedExpression path="highClosed" xsi:type="Property">
                                       <source localId="676" locator="203:32-203:51" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </highClosedExpression>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="689" locator="205:8-208:5" xsi:type="And">
                        <operand localId="684" locator="206:7-206:29" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="682" locator="206:7-206:16" path="status" scope="EOC" xsi:type="Property"/>
                           </operand>
                           <operand localId="683" locator="206:20-206:29" valueType="t:String" value="finished" xsi:type="Literal"/>
                        </operand>
                        <operand localId="688" locator="207:11-207:53" xsi:type="In">
                           <operand locator="207:22-207:25" xsi:type="End">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="686" locator="207:11-207:20" path="period" scope="EOC" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="Interval">
                              <low xsi:type="ToDateTime">
                                 <operand path="low" xsi:type="Property">
                                    <source localId="687" locator="207:34-207:53" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </low>
                              <lowClosedExpression path="lowClosed" xsi:type="Property">
                                 <source localId="687" locator="207:34-207:53" name="Measurement Period" xsi:type="ParameterRef"/>
                              </lowClosedExpression>
                              <high xsi:type="ToDateTime">
                                 <operand path="high" xsi:type="Property">
                                    <source localId="687" locator="207:34-207:53" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </high>
                              <highClosedExpression path="highClosed" xsi:type="Property">
                                 <source localId="687" locator="207:34-207:53" name="Measurement Period" xsi:type="ParameterRef"/>
                              </highClosedExpression>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="719" locator="212:1-217:4" name="Lost to Follow Up during the measurement period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="719">
               <a:s>define &quot;Lost to Follow Up during the measurement period&quot;:
    </a:s>
               <a:s r="718">
                  <a:s>exists</a:s>
                  <a:s r="717">
                     <a:s>(</a:s>
                     <a:s r="717">
                        <a:s>
                           <a:s r="696">
                              <a:s r="695">
                                 <a:s>
                                    <a:s>&quot;HIV Treatment Active&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> H</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
   </a:s>
                        <a:s r="716">
                           <a:s>where </a:s>
                           <a:s r="716">
                              <a:s r="707">
                                 <a:s r="701">
                                    <a:s r="698">
                                       <a:s r="697">
                                          <a:s>H</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="698">
                                          <a:s>effective</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="701"> starts before </a:s>
                                    <a:s r="700">
                                       <a:s>end of </a:s>
                                       <a:s r="699">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="706">
                                    <a:s r="703">
                                       <a:s r="702">
                                          <a:s>H</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="703">
                                          <a:s>effective</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="706"> ends after </a:s>
                                    <a:s r="705">
                                       <a:s>start of </a:s>
                                       <a:s r="704">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
	and </a:s>
                              <a:s r="715">
                                 <a:s>not </a:s>
                                 <a:s r="714">
                                    <a:s>(</a:s>
                                    <a:s r="714">
                                       <a:s r="709">
                                          <a:s r="708">
                                             <a:s>H</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="709">
                                             <a:s>effective</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="714"> ends after </a:s>
                                       <a:s r="713">
                                          <a:s>(</a:s>
                                          <a:s r="713">
                                             <a:s r="711">
                                                <a:s>end of </a:s>
                                                <a:s r="710">
                                                   <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> - </a:s>
                                             <a:s r="712">
                                                <a:s>28 days</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
   )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="718" locator="213:5-217:4" xsi:type="Exists">
            <operand localId="717" locator="213:11-217:4" xsi:type="Query">
               <source localId="696" locator="213:12-213:35" alias="H">
                  <expression localId="695" locator="213:12-213:33" name="HIV Treatment Active" xsi:type="ExpressionRef"/>
               </source>
               <where localId="716" locator="214:4-216:73" xsi:type="And">
                  <operand localId="707" locator="214:10-215:60" xsi:type="And">
                     <operand localId="701" locator="214:10-214:62" xsi:type="Before">
                        <operand locator="214:22-214:27" xsi:type="Start">
                           <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:Period" xsi:type="As">
                                 <operand localId="698" locator="214:10-214:20" path="effective" scope="H" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="700" locator="214:36-214:62" xsi:type="End">
                              <operand localId="699" locator="214:43-214:62" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="706" locator="215:9-215:60" xsi:type="After">
                        <operand locator="215:21-215:24" xsi:type="End">
                           <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:Period" xsi:type="As">
                                 <operand localId="703" locator="215:9-215:19" path="effective" scope="H" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="705" locator="215:32-215:60" xsi:type="Start">
                              <operand localId="704" locator="215:41-215:60" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="715" locator="216:6-216:73" xsi:type="Not">
                     <operand localId="714" locator="216:10-216:73" xsi:type="After">
                        <operand locator="216:23-216:26" xsi:type="End">
                           <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:Period" xsi:type="As">
                                 <operand localId="709" locator="216:11-216:21" path="effective" scope="H" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="713" locator="216:34-216:72" xsi:type="Subtract">
                              <operand localId="711" locator="216:35-216:61" xsi:type="End">
                                 <operand localId="710" locator="216:42-216:61" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                              <operand localId="712" locator="216:65-216:71" value="28" unit="days" xsi:type="Quantity"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="799" locator="224:1-238:7" name="By Age Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="799">
               <a:s>/*
 * By Age Stratifiers
 * (04, 59, 1014, 1519, 2024, 2529, 3034, 3539, 4044, 4549, 50+ years)
 * 
 */
define &quot;By Age Stratifier&quot;:
    </a:s>
               <a:s r="798">
                  <a:s>case 
        </a:s>
                  <a:s r="726">
                     <a:s>when </a:s>
                     <a:s r="724">
                        <a:s r="722">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="721">
                              <a:s>start of </a:s>
                              <a:s r="720">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="723"> &lt;= 4</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="725">
                        <a:s>'0-4'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="733">
                     <a:s>when </a:s>
                     <a:s r="731">
                        <a:s r="729">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="728">
                              <a:s>start of </a:s>
                              <a:s r="727">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="730"> &lt;= 9</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="732">
                        <a:s>'5-9'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="740">
                     <a:s>when </a:s>
                     <a:s r="738">
                        <a:s r="736">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="735">
                              <a:s>start of </a:s>
                              <a:s r="734">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="737"> &lt;= 14</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="739">
                        <a:s>'1014'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="747">
                     <a:s>when </a:s>
                     <a:s r="745">
                        <a:s r="743">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="742">
                              <a:s>start of </a:s>
                              <a:s r="741">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="744"> &lt;= 19</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="746">
                        <a:s>'1519'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="754">
                     <a:s>when </a:s>
                     <a:s r="752">
                        <a:s r="750">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="749">
                              <a:s>start of </a:s>
                              <a:s r="748">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="751"> &lt;= 24</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="753">
                        <a:s>'2024'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="761">
                     <a:s>when </a:s>
                     <a:s r="759">
                        <a:s r="757">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="756">
                              <a:s>start of </a:s>
                              <a:s r="755">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="758"> &lt;= 29</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="760">
                        <a:s>'2529'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="768">
                     <a:s>when </a:s>
                     <a:s r="766">
                        <a:s r="764">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="763">
                              <a:s>start of </a:s>
                              <a:s r="762">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="765"> &lt;= 34</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="767">
                        <a:s>'3034'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="775">
                     <a:s>when </a:s>
                     <a:s r="773">
                        <a:s r="771">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="770">
                              <a:s>start of </a:s>
                              <a:s r="769">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="772"> &lt;= 39</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="774">
                        <a:s>'3539'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="782">
                     <a:s>when </a:s>
                     <a:s r="780">
                        <a:s r="778">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="777">
                              <a:s>start of </a:s>
                              <a:s r="776">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="779"> &lt;= 44</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="781">
                        <a:s>'4044'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="789">
                     <a:s>when </a:s>
                     <a:s r="787">
                        <a:s r="785">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="784">
                              <a:s>start of </a:s>
                              <a:s r="783">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="786"> &lt;= 49</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="788">
                        <a:s>'4549'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="796">
                     <a:s>when </a:s>
                     <a:s r="794">
                        <a:s r="792">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="791">
                              <a:s>start of </a:s>
                              <a:s r="790">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="793"> >= 50</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="795">
                        <a:s>'50+'</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="797">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="798" locator="225:5-238:7" xsi:type="Case">
            <caseItem localId="726" locator="226:9-226:72">
               <when localId="724" locator="226:14-226:61" xsi:type="LessOrEqual">
                  <operand localId="722" locator="226:14-226:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="721" locator="226:27-226:55" xsi:type="Start">
                        <operand localId="720" locator="226:36-226:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="723" locator="226:61" valueType="t:Integer" value="4" xsi:type="Literal"/>
               </when>
               <then localId="725" locator="226:68-226:72" valueType="t:String" value="0-4" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="733" locator="227:9-227:72">
               <when localId="731" locator="227:14-227:61" xsi:type="LessOrEqual">
                  <operand localId="729" locator="227:14-227:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="728" locator="227:27-227:55" xsi:type="Start">
                        <operand localId="727" locator="227:36-227:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="730" locator="227:61" valueType="t:Integer" value="9" xsi:type="Literal"/>
               </when>
               <then localId="732" locator="227:68-227:72" valueType="t:String" value="5-9" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="740" locator="228:9-228:75">
               <when localId="738" locator="228:14-228:62" xsi:type="LessOrEqual">
                  <operand localId="736" locator="228:14-228:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="735" locator="228:27-228:55" xsi:type="Start">
                        <operand localId="734" locator="228:36-228:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="737" locator="228:61-228:62" valueType="t:Integer" value="14" xsi:type="Literal"/>
               </when>
               <then localId="739" locator="228:69-228:75" valueType="t:String" value="1014" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="747" locator="229:9-229:75">
               <when localId="745" locator="229:14-229:62" xsi:type="LessOrEqual">
                  <operand localId="743" locator="229:14-229:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="742" locator="229:27-229:55" xsi:type="Start">
                        <operand localId="741" locator="229:36-229:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="744" locator="229:61-229:62" valueType="t:Integer" value="19" xsi:type="Literal"/>
               </when>
               <then localId="746" locator="229:69-229:75" valueType="t:String" value="1519" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="754" locator="230:9-230:75">
               <when localId="752" locator="230:14-230:62" xsi:type="LessOrEqual">
                  <operand localId="750" locator="230:14-230:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="749" locator="230:27-230:55" xsi:type="Start">
                        <operand localId="748" locator="230:36-230:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="751" locator="230:61-230:62" valueType="t:Integer" value="24" xsi:type="Literal"/>
               </when>
               <then localId="753" locator="230:69-230:75" valueType="t:String" value="2024" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="761" locator="231:9-231:75">
               <when localId="759" locator="231:14-231:62" xsi:type="LessOrEqual">
                  <operand localId="757" locator="231:14-231:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="756" locator="231:27-231:55" xsi:type="Start">
                        <operand localId="755" locator="231:36-231:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="758" locator="231:61-231:62" valueType="t:Integer" value="29" xsi:type="Literal"/>
               </when>
               <then localId="760" locator="231:69-231:75" valueType="t:String" value="2529" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="768" locator="232:9-232:75">
               <when localId="766" locator="232:14-232:62" xsi:type="LessOrEqual">
                  <operand localId="764" locator="232:14-232:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="763" locator="232:27-232:55" xsi:type="Start">
                        <operand localId="762" locator="232:36-232:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="765" locator="232:61-232:62" valueType="t:Integer" value="34" xsi:type="Literal"/>
               </when>
               <then localId="767" locator="232:69-232:75" valueType="t:String" value="3034" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="775" locator="233:9-233:75">
               <when localId="773" locator="233:14-233:62" xsi:type="LessOrEqual">
                  <operand localId="771" locator="233:14-233:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="770" locator="233:27-233:55" xsi:type="Start">
                        <operand localId="769" locator="233:36-233:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="772" locator="233:61-233:62" valueType="t:Integer" value="39" xsi:type="Literal"/>
               </when>
               <then localId="774" locator="233:69-233:75" valueType="t:String" value="3539" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="782" locator="234:9-234:75">
               <when localId="780" locator="234:14-234:62" xsi:type="LessOrEqual">
                  <operand localId="778" locator="234:14-234:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="777" locator="234:27-234:55" xsi:type="Start">
                        <operand localId="776" locator="234:36-234:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="779" locator="234:61-234:62" valueType="t:Integer" value="44" xsi:type="Literal"/>
               </when>
               <then localId="781" locator="234:69-234:75" valueType="t:String" value="4044" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="789" locator="235:9-235:75">
               <when localId="787" locator="235:14-235:62" xsi:type="LessOrEqual">
                  <operand localId="785" locator="235:14-235:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="784" locator="235:27-235:55" xsi:type="Start">
                        <operand localId="783" locator="235:36-235:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="786" locator="235:61-235:62" valueType="t:Integer" value="49" xsi:type="Literal"/>
               </when>
               <then localId="788" locator="235:69-235:75" valueType="t:String" value="4549" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="796" locator="236:9-236:73">
               <when localId="794" locator="236:14-236:62" xsi:type="GreaterOrEqual">
                  <operand localId="792" locator="236:14-236:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="791" locator="236:27-236:55" xsi:type="Start">
                        <operand localId="790" locator="236:36-236:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="793" locator="236:61-236:62" valueType="t:Integer" value="50" xsi:type="Literal"/>
               </when>
               <then localId="795" locator="236:69-236:73" valueType="t:String" value="50+" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:String" xsi:type="As">
               <operand localId="797" locator="237:14-237:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="851" locator="245:1-255:7" name="By Age Stratifier 2" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="851">
               <a:s>/*
 * By Age Stratifiers
 * Age (04, 59, 1014, 1519, 2024, 2549, 50+ years)
 * 
 */
define &quot;By Age Stratifier 2&quot;:
    </a:s>
               <a:s r="850">
                  <a:s>case 
        </a:s>
                  <a:s r="806">
                     <a:s>when </a:s>
                     <a:s r="804">
                        <a:s r="802">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="801">
                              <a:s>start of </a:s>
                              <a:s r="800">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="803"> &lt;= 4</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="805">
                        <a:s>'0-4'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="813">
                     <a:s>when </a:s>
                     <a:s r="811">
                        <a:s r="809">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="808">
                              <a:s>start of </a:s>
                              <a:s r="807">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="810"> &lt;= 9</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="812">
                        <a:s>'5-9'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="820">
                     <a:s>when </a:s>
                     <a:s r="818">
                        <a:s r="816">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="815">
                              <a:s>start of </a:s>
                              <a:s r="814">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="817"> &lt;= 14</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="819">
                        <a:s>'1014'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="827">
                     <a:s>when </a:s>
                     <a:s r="825">
                        <a:s r="823">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="822">
                              <a:s>start of </a:s>
                              <a:s r="821">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="824"> &lt;= 19</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="826">
                        <a:s>'1519'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="834">
                     <a:s>when </a:s>
                     <a:s r="832">
                        <a:s r="830">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="829">
                              <a:s>start of </a:s>
                              <a:s r="828">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="831"> &lt;= 24</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="833">
                        <a:s>'2024'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="841">
                     <a:s>when </a:s>
                     <a:s r="839">
                        <a:s r="837">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="836">
                              <a:s>start of </a:s>
                              <a:s r="835">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="838"> &lt;= 49</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="840">
                        <a:s>'2549'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="848">
                     <a:s>when </a:s>
                     <a:s r="846">
                        <a:s r="844">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="843">
                              <a:s>start of </a:s>
                              <a:s r="842">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="845"> >= 50</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="847">
                        <a:s>'50+'</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="849">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="850" locator="246:5-255:7" xsi:type="Case">
            <caseItem localId="806" locator="247:9-247:72">
               <when localId="804" locator="247:14-247:61" xsi:type="LessOrEqual">
                  <operand localId="802" locator="247:14-247:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="801" locator="247:27-247:55" xsi:type="Start">
                        <operand localId="800" locator="247:36-247:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="803" locator="247:61" valueType="t:Integer" value="4" xsi:type="Literal"/>
               </when>
               <then localId="805" locator="247:68-247:72" valueType="t:String" value="0-4" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="813" locator="248:9-248:72">
               <when localId="811" locator="248:14-248:61" xsi:type="LessOrEqual">
                  <operand localId="809" locator="248:14-248:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="808" locator="248:27-248:55" xsi:type="Start">
                        <operand localId="807" locator="248:36-248:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="810" locator="248:61" valueType="t:Integer" value="9" xsi:type="Literal"/>
               </when>
               <then localId="812" locator="248:68-248:72" valueType="t:String" value="5-9" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="820" locator="249:9-249:75">
               <when localId="818" locator="249:14-249:62" xsi:type="LessOrEqual">
                  <operand localId="816" locator="249:14-249:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="815" locator="249:27-249:55" xsi:type="Start">
                        <operand localId="814" locator="249:36-249:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="817" locator="249:61-249:62" valueType="t:Integer" value="14" xsi:type="Literal"/>
               </when>
               <then localId="819" locator="249:69-249:75" valueType="t:String" value="1014" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="827" locator="250:9-250:75">
               <when localId="825" locator="250:14-250:62" xsi:type="LessOrEqual">
                  <operand localId="823" locator="250:14-250:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="822" locator="250:27-250:55" xsi:type="Start">
                        <operand localId="821" locator="250:36-250:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="824" locator="250:61-250:62" valueType="t:Integer" value="19" xsi:type="Literal"/>
               </when>
               <then localId="826" locator="250:69-250:75" valueType="t:String" value="1519" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="834" locator="251:9-251:75">
               <when localId="832" locator="251:14-251:62" xsi:type="LessOrEqual">
                  <operand localId="830" locator="251:14-251:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="829" locator="251:27-251:55" xsi:type="Start">
                        <operand localId="828" locator="251:36-251:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="831" locator="251:61-251:62" valueType="t:Integer" value="24" xsi:type="Literal"/>
               </when>
               <then localId="833" locator="251:69-251:75" valueType="t:String" value="2024" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="841" locator="252:9-252:75">
               <when localId="839" locator="252:14-252:62" xsi:type="LessOrEqual">
                  <operand localId="837" locator="252:14-252:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="836" locator="252:27-252:55" xsi:type="Start">
                        <operand localId="835" locator="252:36-252:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="838" locator="252:61-252:62" valueType="t:Integer" value="49" xsi:type="Literal"/>
               </when>
               <then localId="840" locator="252:69-252:75" valueType="t:String" value="2549" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="848" locator="253:9-253:73">
               <when localId="846" locator="253:14-253:62" xsi:type="GreaterOrEqual">
                  <operand localId="844" locator="253:14-253:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="843" locator="253:27-253:55" xsi:type="Start">
                        <operand localId="842" locator="253:36-253:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="845" locator="253:61-253:62" valueType="t:Integer" value="50" xsi:type="Literal"/>
               </when>
               <then localId="847" locator="253:69-253:73" valueType="t:String" value="50+" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:String" xsi:type="As">
               <operand localId="849" locator="254:14-254:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="888" locator="257:1-264:7" name="By Age Stratifier 3" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="888">
               <a:s>define &quot;By Age Stratifier 3&quot;:
    </a:s>
               <a:s r="887">
                  <a:s>case 
        </a:s>
                  <a:s r="864">
                     <a:s>when </a:s>
                     <a:s r="862">
                        <a:s r="856">
                           <a:s r="854">
                              <a:s>AgeInYearsAt(</a:s>
                              <a:s r="853">
                                 <a:s>start of </a:s>
                                 <a:s r="852">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="855"> >= 15</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="861">
                           <a:s r="859">
                              <a:s>AgeInYearsAt(</a:s>
                              <a:s r="858">
                                 <a:s>start of </a:s>
                                 <a:s r="857">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="860"> &lt;= 19</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="863">
                        <a:s>'15-19'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="871">
                     <a:s>when </a:s>
                     <a:s r="869">
                        <a:s r="867">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="866">
                              <a:s>start of </a:s>
                              <a:s r="865">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="868"> &lt;= 24</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="870">
                        <a:s>'20-24'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="878">
                     <a:s>when </a:s>
                     <a:s r="876">
                        <a:s r="874">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="873">
                              <a:s>start of </a:s>
                              <a:s r="872">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="875"> &lt;= 49</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="877">
                        <a:s>'2549'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="885">
                     <a:s>when </a:s>
                     <a:s r="883">
                        <a:s r="881">
                           <a:s>AgeInYearsAt(</a:s>
                           <a:s r="880">
                              <a:s>start of </a:s>
                              <a:s r="879">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s r="882"> >= 50</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="884">
                        <a:s>'50+'</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="886">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="887" locator="258:5-264:7" xsi:type="Case">
            <caseItem localId="864" locator="259:9-259:129">
               <when localId="862" locator="259:14-259:116" xsi:type="And">
                  <operand localId="856" locator="259:14-259:62" xsi:type="GreaterOrEqual">
                     <operand localId="854" locator="259:14-259:56" precision="Year" xsi:type="CalculateAgeAt">
                        <operand path="birthDate.value" xsi:type="Property">
                           <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="853" locator="259:27-259:55" xsi:type="Start">
                           <operand localId="852" locator="259:36-259:55" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                     <operand localId="855" locator="259:61-259:62" valueType="t:Integer" value="15" xsi:type="Literal"/>
                  </operand>
                  <operand localId="861" locator="259:68-259:116" xsi:type="LessOrEqual">
                     <operand localId="859" locator="259:68-259:110" precision="Year" xsi:type="CalculateAgeAt">
                        <operand path="birthDate.value" xsi:type="Property">
                           <source name="Patient" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="858" locator="259:81-259:109" xsi:type="Start">
                           <operand localId="857" locator="259:90-259:109" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                     <operand localId="860" locator="259:115-259:116" valueType="t:Integer" value="19" xsi:type="Literal"/>
                  </operand>
               </when>
               <then localId="863" locator="259:123-259:129" valueType="t:String" value="15-19" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="871" locator="260:9-260:75">
               <when localId="869" locator="260:14-260:62" xsi:type="LessOrEqual">
                  <operand localId="867" locator="260:14-260:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="866" locator="260:27-260:55" xsi:type="Start">
                        <operand localId="865" locator="260:36-260:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="868" locator="260:61-260:62" valueType="t:Integer" value="24" xsi:type="Literal"/>
               </when>
               <then localId="870" locator="260:69-260:75" valueType="t:String" value="20-24" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="878" locator="261:9-261:75">
               <when localId="876" locator="261:14-261:62" xsi:type="LessOrEqual">
                  <operand localId="874" locator="261:14-261:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="873" locator="261:27-261:55" xsi:type="Start">
                        <operand localId="872" locator="261:36-261:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="875" locator="261:61-261:62" valueType="t:Integer" value="49" xsi:type="Literal"/>
               </when>
               <then localId="877" locator="261:69-261:75" valueType="t:String" value="2549" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="885" locator="262:9-262:73">
               <when localId="883" locator="262:14-262:62" xsi:type="GreaterOrEqual">
                  <operand localId="881" locator="262:14-262:56" precision="Year" xsi:type="CalculateAgeAt">
                     <operand path="birthDate.value" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="880" locator="262:27-262:55" xsi:type="Start">
                        <operand localId="879" locator="262:36-262:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="882" locator="262:61-262:62" valueType="t:Integer" value="50" xsi:type="Literal"/>
               </when>
               <then localId="884" locator="262:69-262:73" valueType="t:String" value="50+" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:String" xsi:type="As">
               <operand localId="886" locator="263:14-263:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="899" locator="270:1-271:60" name="By Geographic Region Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="899">
               <a:s>/*
 * By state stratifier
 */

define &quot;By Geographic Region Stratifier&quot;:
    </a:s>
               <a:s r="898">
                  <a:s r="897">
                     <a:s>First(</a:s>
                     <a:s r="896">
                        <a:s>
                           <a:s r="890">
                              <a:s r="889">
                                 <a:s>
                                    <a:s>Patient.address</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> A</a:s>
                           </a:s>
                        </a:s>
                        <a:s> </a:s>
                        <a:s r="895">
                           <a:s>where </a:s>
                           <a:s r="895">
                              <a:s r="892">
                                 <a:s r="891">
                                    <a:s>A</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="892">
                                    <a:s>use</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="894">
                                 <a:s>{ </a:s>
                                 <a:s r="893">
                                    <a:s>'home'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="898">
                     <a:s>state</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="898" locator="271:5-271:60" path="state" xsi:type="Property">
            <source localId="897" locator="271:5-271:54" xsi:type="First">
               <source localId="896" locator="271:11-271:53" xsi:type="Query">
                  <source localId="890" locator="271:11-271:27" alias="A">
                     <expression localId="889" locator="271:11-271:25" path="address" xsi:type="Property">
                        <source name="Patient" xsi:type="ExpressionRef"/>
                     </expression>
                  </source>
                  <where localId="895" locator="271:29-271:53" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="892" locator="271:35-271:39" path="use" scope="A" xsi:type="Property"/>
                     </operand>
                     <operand localId="894" locator="271:44-271:53" xsi:type="List">
                        <element localId="893" locator="271:46-271:51" valueType="t:String" value="home" xsi:type="Literal"/>
                     </operand>
                  </where>
               </source>
            </source>
         </expression>
      </def>
      <def localId="931" locator="278:1-285:7" name="By Administrative Gender Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="931">
               <a:s>/*
 * By Administrative Gender of Patient Stratifier
 * Need to expand codes
 */

define &quot;By Administrative Gender Stratifier&quot;:
    </a:s>
               <a:s r="930">
                  <a:s>case 
        </a:s>
                  <a:s r="906">
                     <a:s>when </a:s>
                     <a:s r="903">
                        <a:s r="901">
                           <a:s r="900">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="901">
                              <a:s>gender</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="902">
                           <a:s>'male'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="905">
                        <a:s r="904">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="905">
                           <a:s>&quot;Male&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="913">
                     <a:s>when </a:s>
                     <a:s r="910">
                        <a:s r="908">
                           <a:s r="907">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="908">
                              <a:s>gender</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="909">
                           <a:s>'female'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="912">
                        <a:s r="911">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="912">
                           <a:s>&quot;Female&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="920">
                     <a:s>when </a:s>
                     <a:s r="917">
                        <a:s r="915">
                           <a:s r="914">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="915">
                              <a:s>gender</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="916">
                           <a:s>'transgender female'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="919">
                        <a:s r="918">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="919">
                           <a:s>&quot;Transgender female&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="927">
                     <a:s>when </a:s>
                     <a:s r="924">
                        <a:s r="922">
                           <a:s r="921">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="922">
                              <a:s>gender</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="923">
                           <a:s>'transgender male'</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="926">
                        <a:s r="925">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="926">
                           <a:s>&quot;Transgender male&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        else </a:s>
                  <a:s r="929">
                     <a:s r="928">
                        <a:s>HC</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="929">
                        <a:s>&quot;Other - HIV.A.DE23&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="930" locator="279:5-285:7" xsi:type="Case">
            <caseItem localId="906" locator="280:9-280:51">
               <when localId="903" locator="280:14-280:36" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="901" locator="280:14-280:27" path="gender" xsi:type="Property">
                        <source localId="900" locator="280:14-280:20" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="902" locator="280:31-280:36" valueType="t:String" value="male" xsi:type="Literal"/>
               </when>
               <then localId="905" locator="280:43-280:51" name="Male" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="913" locator="281:9-281:55">
               <when localId="910" locator="281:14-281:38" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="908" locator="281:14-281:27" path="gender" xsi:type="Property">
                        <source localId="907" locator="281:14-281:20" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="909" locator="281:31-281:38" valueType="t:String" value="female" xsi:type="Literal"/>
               </when>
               <then localId="912" locator="281:45-281:55" name="Female" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="920" locator="282:9-282:79">
               <when localId="917" locator="282:14-282:50" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="915" locator="282:14-282:27" path="gender" xsi:type="Property">
                        <source localId="914" locator="282:14-282:20" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="916" locator="282:31-282:50" valueType="t:String" value="transgender female" xsi:type="Literal"/>
               </when>
               <then localId="919" locator="282:57-282:79" name="Transgender female" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="927" locator="283:9-283:75">
               <when localId="924" locator="283:14-283:48" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="922" locator="283:14-283:27" path="gender" xsi:type="Property">
                        <source localId="921" locator="283:14-283:20" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
                  <operand localId="923" locator="283:31-283:48" valueType="t:String" value="transgender male" xsi:type="Literal"/>
               </when>
               <then localId="926" locator="283:55-283:75" name="Transgender male" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else localId="929" locator="284:14-284:36" name="Other - HIV.A.DE23" libraryName="HC" xsi:type="CodeRef"/>
         </expression>
      </def>
      <def localId="970" locator="287:1-292:7" name="HIV Status" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="970">
               <a:s>define &quot;HIV Status&quot;:
    </a:s>
               <a:s r="969">
                  <a:s>case 
        </a:s>
                  <a:s r="943">
                     <a:s>when </a:s>
                     <a:s r="940">
                        <a:s>exists</a:s>
                        <a:s r="939">
                           <a:s>(</a:s>
                           <a:s r="939">
                              <a:s>
                                 <a:s r="933">
                                    <a:s r="932">
                                       <a:s>
                                          <a:s>&quot;HIV Positive Condition&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> C</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="938">
                                 <a:s>where </a:s>
                                 <a:s r="938">
                                    <a:s r="935">
                                       <a:s r="934">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="935">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="938"> before </a:s>
                                    <a:s r="937">
                                       <a:s>end of </a:s>
                                       <a:s r="936">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="942">
                        <a:s r="941">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="942">
                           <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="966">
                     <a:s>when </a:s>
                     <a:s r="963">
                        <a:s r="953">
                           <a:s>not </a:s>
                           <a:s r="952">
                              <a:s>exists</a:s>
                              <a:s r="951">
                                 <a:s>(</a:s>
                                 <a:s r="951">
                                    <a:s>
                                       <a:s r="945">
                                          <a:s r="944">
                                             <a:s>
                                                <a:s>&quot;HIV Positive Condition&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="950">
                                       <a:s>where </a:s>
                                       <a:s r="950">
                                          <a:s r="947">
                                             <a:s r="946">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="947">
                                                <a:s>onset</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="950"> before </a:s>
                                          <a:s r="949">
                                             <a:s>end of </a:s>
                                             <a:s r="948">
                                                <a:s>&quot;Measurement Period&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="962">
                           <a:s>exists</a:s>
                           <a:s r="961">
                              <a:s>(</a:s>
                              <a:s r="961">
                                 <a:s>
                                    <a:s r="955">
                                       <a:s r="954">
                                          <a:s>
                                             <a:s>&quot;HIV Negative Observation&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="960">
                                    <a:s>where </a:s>
                                    <a:s r="960">
                                       <a:s r="957">
                                          <a:s r="956">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="957">
                                             <a:s>issued</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="960"> before </a:s>
                                       <a:s r="959">
                                          <a:s>end of </a:s>
                                          <a:s r="958">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="965">
                        <a:s r="964">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="965">
                           <a:s>&quot;HIV-negative - HIV.B.DE117&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        else </a:s>
                  <a:s r="968">
                     <a:s r="967">
                        <a:s>HC</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="968">
                        <a:s>&quot;Unknown - HIV.B.DE118&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="969" locator="288:5-292:7" xsi:type="Case">
            <caseItem localId="943" locator="289:9-289:133">
               <when localId="940" locator="289:14-289:96" xsi:type="Exists">
                  <operand localId="939" locator="289:20-289:96" xsi:type="Query">
                     <source localId="933" locator="289:21-289:46" alias="C">
                        <expression localId="932" locator="289:21-289:44" name="HIV Positive Condition" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="938" locator="289:48-289:95" xsi:type="Before">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:dateTime" xsi:type="As">
                              <operand localId="935" locator="289:54-289:60" path="onset" scope="C" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="937" locator="289:69-289:95" xsi:type="End">
                              <operand localId="936" locator="289:76-289:95" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="942" locator="289:103-289:133" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="966" locator="290:9-290:229">
               <when localId="963" locator="290:14-290:191" xsi:type="And">
                  <operand localId="953" locator="290:14-290:100" xsi:type="Not">
                     <operand localId="952" locator="290:18-290:100" xsi:type="Exists">
                        <operand localId="951" locator="290:24-290:100" xsi:type="Query">
                           <source localId="945" locator="290:25-290:50" alias="C">
                              <expression localId="944" locator="290:25-290:48" name="HIV Positive Condition" xsi:type="ExpressionRef"/>
                           </source>
                           <where localId="950" locator="290:52-290:99" xsi:type="Before">
                              <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:dateTime" xsi:type="As">
                                    <operand localId="947" locator="290:58-290:64" path="onset" scope="C" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="949" locator="290:73-290:99" xsi:type="End">
                                    <operand localId="948" locator="290:80-290:99" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="962" locator="290:106-290:191" xsi:type="Exists">
                     <operand localId="961" locator="290:112-290:191" xsi:type="Query">
                        <source localId="955" locator="290:113-290:140" alias="O">
                           <expression localId="954" locator="290:113-290:138" name="HIV Negative Observation" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="960" locator="290:142-290:190" xsi:type="Before">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="957" locator="290:148-290:155" path="issued" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="959" locator="290:164-290:190" xsi:type="End">
                                 <operand localId="958" locator="290:171-290:190" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </when>
               <then localId="965" locator="290:199-290:229" name="HIV-negative - HIV.B.DE117" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else localId="968" locator="291:14-291:39" name="Unknown - HIV.B.DE118" libraryName="HC" xsi:type="CodeRef"/>
         </expression>
      </def>
      <def localId="997" locator="298:2-304:3" name="SW" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="997">
               <a:s>/*
 * Key populations (men who have sex with men, people living in prisons and other closed settings, people who inject drugs, sex workers, trans and gender diverse people)
 */

 define SW:
  </a:s>
               <a:s r="996">
                  <a:s>exists </a:s>
                  <a:s r="995">
                     <a:s>(
    </a:s>
                     <a:s r="995">
                        <a:s>
                           <a:s r="972">
                              <a:s r="971">
                                 <a:s r="971">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="994">
                           <a:s>where </a:s>
                           <a:s r="994">
                              <a:s r="988">
                                 <a:s r="979">
                                    <a:s r="974">
                                       <a:s r="973">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="974">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="978">
                                       <a:s>{ </a:s>
                                       <a:s r="975">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="976">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="977">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="987">
                                    <a:s>exists</a:s>
                                    <a:s r="986">
                                       <a:s>(</a:s>
                                       <a:s r="986">
                                          <a:s>
                                             <a:s r="981">
                                                <a:s r="980">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="985">
                                             <a:s>where </a:s>
                                             <a:s r="985">
                                                <a:s r="982">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="984">
                                                   <a:s r="983">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="984">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="993">
                                 <a:s r="990">
                                    <a:s r="989">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="990">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="992">
                                    <a:s r="991">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="992">
                                       <a:s>&quot;Sex worker - HIV.B.DE51&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="996" locator="299:3-304:3" xsi:type="Exists">
            <operand localId="995" locator="299:10-304:3" xsi:type="Query">
               <source localId="972" locator="300:5-300:62" alias="O">
                  <expression localId="971" locator="300:5-300:60" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="300:19-300:59" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="994" locator="301:5-303:46" xsi:type="And">
                  <operand localId="988" locator="301:11-302:61" xsi:type="And">
                     <operand localId="979" locator="301:11-301:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="974" locator="301:11-301:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="978" locator="301:23-301:57" xsi:type="List">
                           <element localId="975" locator="301:25-301:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="976" locator="301:34-301:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="977" locator="301:45-301:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="987" locator="302:9-302:61" xsi:type="Exists">
                        <operand localId="986" locator="302:15-302:61" xsi:type="Query">
                           <source localId="981" locator="302:16-302:28" alias="OC">
                              <expression localId="980" locator="302:16-302:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="985" locator="302:30-302:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="982" locator="302:36-302:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="984" locator="302:41-302:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="993" locator="303:9-303:46" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="990" locator="303:9-303:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="992" locator="303:19-303:46" name="Sex worker - HIV.B.DE51" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1024" locator="306:2-312:3" name="MSM" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1024">
               <a:s>define MSM:
  </a:s>
               <a:s r="1023">
                  <a:s>exists </a:s>
                  <a:s r="1022">
                     <a:s>(
    </a:s>
                     <a:s r="1022">
                        <a:s>
                           <a:s r="999">
                              <a:s r="998">
                                 <a:s r="998">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1021">
                           <a:s>where </a:s>
                           <a:s r="1021">
                              <a:s r="1015">
                                 <a:s r="1006">
                                    <a:s r="1001">
                                       <a:s r="1000">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1001">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1005">
                                       <a:s>{ </a:s>
                                       <a:s r="1002">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1003">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1004">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1014">
                                    <a:s>exists</a:s>
                                    <a:s r="1013">
                                       <a:s>(</a:s>
                                       <a:s r="1013">
                                          <a:s>
                                             <a:s r="1008">
                                                <a:s r="1007">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1012">
                                             <a:s>where </a:s>
                                             <a:s r="1012">
                                                <a:s r="1009">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1011">
                                                   <a:s r="1010">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1011">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1020">
                                 <a:s r="1017">
                                    <a:s r="1016">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1017">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1019">
                                    <a:s r="1018">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1019">
                                       <a:s>&quot;Men who have sex with men&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1023" locator="307:3-312:3" xsi:type="Exists">
            <operand localId="1022" locator="307:10-312:3" xsi:type="Query">
               <source localId="999" locator="308:5-308:62" alias="O">
                  <expression localId="998" locator="308:5-308:60" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="308:19-308:59" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1021" locator="309:5-311:48" xsi:type="And">
                  <operand localId="1015" locator="309:11-310:61" xsi:type="And">
                     <operand localId="1006" locator="309:11-309:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1001" locator="309:11-309:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1005" locator="309:23-309:57" xsi:type="List">
                           <element localId="1002" locator="309:25-309:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1003" locator="309:34-309:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1004" locator="309:45-309:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1014" locator="310:9-310:61" xsi:type="Exists">
                        <operand localId="1013" locator="310:15-310:61" xsi:type="Query">
                           <source localId="1008" locator="310:16-310:28" alias="OC">
                              <expression localId="1007" locator="310:16-310:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1012" locator="310:30-310:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1009" locator="310:36-310:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1011" locator="310:41-310:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1020" locator="311:9-311:48" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1017" locator="311:9-311:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1019" locator="311:19-311:48" name="Men who have sex with men" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1051" locator="314:3-320:3" name="Trans" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1051">
               <a:s>define Trans:
  </a:s>
               <a:s r="1050">
                  <a:s>exists </a:s>
                  <a:s r="1049">
                     <a:s>(
    </a:s>
                     <a:s r="1049">
                        <a:s>
                           <a:s r="1026">
                              <a:s r="1025">
                                 <a:s r="1025">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1048">
                           <a:s>where </a:s>
                           <a:s r="1048">
                              <a:s r="1042">
                                 <a:s r="1033">
                                    <a:s r="1028">
                                       <a:s r="1027">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1028">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1032">
                                       <a:s>{ </a:s>
                                       <a:s r="1029">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1030">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1031">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1041">
                                    <a:s>exists</a:s>
                                    <a:s r="1040">
                                       <a:s>(</a:s>
                                       <a:s r="1040">
                                          <a:s>
                                             <a:s r="1035">
                                                <a:s r="1034">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1039">
                                             <a:s>where </a:s>
                                             <a:s r="1039">
                                                <a:s r="1036">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1038">
                                                   <a:s r="1037">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1038">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1047">
                                 <a:s r="1044">
                                    <a:s r="1043">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1044">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1046">
                                    <a:s r="1045">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1046">
                                       <a:s>&quot;Trans and gender-diverse people - HIV.B.DE53&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1050" locator="315:3-320:3" xsi:type="Exists">
            <operand localId="1049" locator="315:10-320:3" xsi:type="Query">
               <source localId="1026" locator="316:5-316:62" alias="O">
                  <expression localId="1025" locator="316:5-316:60" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="316:19-316:59" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1048" locator="317:5-319:67" xsi:type="And">
                  <operand localId="1042" locator="317:11-318:61" xsi:type="And">
                     <operand localId="1033" locator="317:11-317:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1028" locator="317:11-317:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1032" locator="317:23-317:57" xsi:type="List">
                           <element localId="1029" locator="317:25-317:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1030" locator="317:34-317:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1031" locator="317:45-317:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1041" locator="318:9-318:61" xsi:type="Exists">
                        <operand localId="1040" locator="318:15-318:61" xsi:type="Query">
                           <source localId="1035" locator="318:16-318:28" alias="OC">
                              <expression localId="1034" locator="318:16-318:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1039" locator="318:30-318:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1036" locator="318:36-318:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1038" locator="318:41-318:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1047" locator="319:9-319:67" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1044" locator="319:9-319:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1046" locator="319:19-319:67" name="Trans and gender-diverse people - HIV.B.DE53" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1078" locator="322:3-328:3" name="PWID" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1078">
               <a:s>define PWID:
  </a:s>
               <a:s r="1077">
                  <a:s>exists </a:s>
                  <a:s r="1076">
                     <a:s>(
    </a:s>
                     <a:s r="1076">
                        <a:s>
                           <a:s r="1053">
                              <a:s r="1052">
                                 <a:s r="1052">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1075">
                           <a:s>where </a:s>
                           <a:s r="1075">
                              <a:s r="1069">
                                 <a:s r="1060">
                                    <a:s r="1055">
                                       <a:s r="1054">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1055">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1059">
                                       <a:s>{ </a:s>
                                       <a:s r="1056">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1057">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1058">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1068">
                                    <a:s>exists</a:s>
                                    <a:s r="1067">
                                       <a:s>(</a:s>
                                       <a:s r="1067">
                                          <a:s>
                                             <a:s r="1062">
                                                <a:s r="1061">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1066">
                                             <a:s>where </a:s>
                                             <a:s r="1066">
                                                <a:s r="1063">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1065">
                                                   <a:s r="1064">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1065">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1074">
                                 <a:s r="1071">
                                    <a:s r="1070">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1071">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1073">
                                    <a:s r="1072">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1073">
                                       <a:s>&quot;People who inject drugs - HIV.B.DE54&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1077" locator="323:3-328:3" xsi:type="Exists">
            <operand localId="1076" locator="323:10-328:3" xsi:type="Query">
               <source localId="1053" locator="324:5-324:62" alias="O">
                  <expression localId="1052" locator="324:5-324:60" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="324:19-324:59" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1075" locator="325:5-327:59" xsi:type="And">
                  <operand localId="1069" locator="325:11-326:61" xsi:type="And">
                     <operand localId="1060" locator="325:11-325:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1055" locator="325:11-325:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1059" locator="325:23-325:57" xsi:type="List">
                           <element localId="1056" locator="325:25-325:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1057" locator="325:34-325:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1058" locator="325:45-325:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1068" locator="326:9-326:61" xsi:type="Exists">
                        <operand localId="1067" locator="326:15-326:61" xsi:type="Query">
                           <source localId="1062" locator="326:16-326:28" alias="OC">
                              <expression localId="1061" locator="326:16-326:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1066" locator="326:30-326:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1063" locator="326:36-326:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1065" locator="326:41-326:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1074" locator="327:9-327:59" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1071" locator="327:9-327:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1073" locator="327:19-327:59" name="People who inject drugs - HIV.B.DE54" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1105" locator="330:3-336:3" name="Prisoner" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1105">
               <a:s>define Prisoner:
  </a:s>
               <a:s r="1104">
                  <a:s>exists </a:s>
                  <a:s r="1103">
                     <a:s>(
    </a:s>
                     <a:s r="1103">
                        <a:s>
                           <a:s r="1080">
                              <a:s r="1079">
                                 <a:s r="1079">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member* - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1102">
                           <a:s>where </a:s>
                           <a:s r="1102">
                              <a:s r="1096">
                                 <a:s r="1087">
                                    <a:s r="1082">
                                       <a:s r="1081">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1082">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1086">
                                       <a:s>{ </a:s>
                                       <a:s r="1083">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1084">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1085">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1095">
                                    <a:s>exists</a:s>
                                    <a:s r="1094">
                                       <a:s>(</a:s>
                                       <a:s r="1094">
                                          <a:s>
                                             <a:s r="1089">
                                                <a:s r="1088">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1093">
                                             <a:s>where </a:s>
                                             <a:s r="1093">
                                                <a:s r="1090">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1092">
                                                   <a:s r="1091">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1092">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1101">
                                 <a:s r="1098">
                                    <a:s r="1097">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1098">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1100">
                                    <a:s r="1099">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1100">
                                       <a:s>&quot;People living in prisons and other closed settings&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1104" locator="331:3-336:3" xsi:type="Exists">
            <operand localId="1103" locator="331:10-336:3" xsi:type="Query">
               <source localId="1080" locator="332:5-332:62" alias="O">
                  <expression localId="1079" locator="332:5-332:60" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="332:19-332:59" name="Key population member* - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1102" locator="333:5-335:73" xsi:type="And">
                  <operand localId="1096" locator="333:11-334:61" xsi:type="And">
                     <operand localId="1087" locator="333:11-333:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1082" locator="333:11-333:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1086" locator="333:23-333:57" xsi:type="List">
                           <element localId="1083" locator="333:25-333:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1084" locator="333:34-333:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1085" locator="333:45-333:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1095" locator="334:9-334:61" xsi:type="Exists">
                        <operand localId="1094" locator="334:15-334:61" xsi:type="Query">
                           <source localId="1089" locator="334:16-334:28" alias="OC">
                              <expression localId="1088" locator="334:16-334:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1093" locator="334:30-334:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1090" locator="334:36-334:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1092" locator="334:41-334:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1101" locator="335:9-335:73" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1098" locator="335:9-335:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1100" locator="335:19-335:73" name="People living in prisons and other closed settings" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1135" locator="338:3-345:3" name="TB_diagnosed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1135">
               <a:s>define TB_diagnosed:
  </a:s>
               <a:s r="1134">
                  <a:s>exists</a:s>
                  <a:s r="1133">
                     <a:s>(
    </a:s>
                     <a:s r="1133">
                        <a:s>(</a:s>
                        <a:s r="1133">
                           <a:s>
                              <a:s r="1107">
                                 <a:s r="1106">
                                    <a:s r="1106">
                                       <a:s>[Condition]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    </a:s>
                           <a:s r="1132">
                              <a:s>where </a:s>
                              <a:s r="1132">
                                 <a:s r="1127">
                                    <a:s r="1121">
                                       <a:s r="1112">
                                          <a:s r="1109">
                                             <a:s r="1108">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1109">
                                                <a:s>clinicalStatus</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1111">
                                             <a:s r="1110">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1111">
                                                <a:s>&quot;active&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    and </a:s>
                                       <a:s r="1120">
                                          <a:s>exists</a:s>
                                          <a:s r="1119">
                                             <a:s>(</a:s>
                                             <a:s r="1119">
                                                <a:s>
                                                   <a:s r="1114">
                                                      <a:s r="1113">
                                                         <a:s>
                                                            <a:s>C.category</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> CC</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> </a:s>
                                                <a:s r="1118">
                                                   <a:s>where </a:s>
                                                   <a:s r="1118">
                                                      <a:s r="1115">
                                                         <a:s>CC</a:s>
                                                      </a:s>
                                                      <a:s> ~ </a:s>
                                                      <a:s r="1117">
                                                         <a:s r="1116">
                                                            <a:s>HCC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="1117">
                                                            <a:s>&quot;encounter-diagnosis&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    and </a:s>
                                    <a:s r="1126">
                                       <a:s r="1123">
                                          <a:s r="1122">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1123">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1125">
                                          <a:s r="1124">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1125">
                                             <a:s>&quot;Diagnosed TB&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1131">
                                    <a:s r="1129">
                                       <a:s r="1128">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1129">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1131"> during </a:s>
                                    <a:s r="1130">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1134" locator="339:3-345:3" xsi:type="Exists">
            <operand localId="1133" locator="339:9-345:3" xsi:type="Query">
               <source localId="1107" locator="340:6-340:18" alias="C">
                  <expression localId="1106" locator="340:6-340:16" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
               </source>
               <where localId="1132" locator="341:5-344:43" xsi:type="And">
                  <operand localId="1127" locator="341:11-343:34" xsi:type="And">
                     <operand localId="1121" locator="341:11-342:66" xsi:type="And">
                        <operand localId="1112" locator="341:11-341:41" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1109" locator="341:11-341:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1111" locator="341:30-341:41" name="active" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                        <operand localId="1120" locator="342:9-342:66" xsi:type="Exists">
                           <operand localId="1119" locator="342:15-342:66" xsi:type="Query">
                              <source localId="1114" locator="342:16-342:28" alias="CC">
                                 <expression localId="1113" locator="342:16-342:25" path="category" scope="C" xsi:type="Property"/>
                              </source>
                              <where localId="1118" locator="342:30-342:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="1115" locator="342:36-342:37" name="CC" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="1117" locator="342:41-342:65" name="encounter-diagnosis" libraryName="HCC" xsi:type="CodeRef"/>
                                 </operand>
                              </where>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1126" locator="343:9-343:34" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1123" locator="343:9-343:14" path="code" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1125" locator="343:18-343:34" name="Diagnosed TB" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1131" locator="344:9-344:43" xsi:type="IncludedIn">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:Period" xsi:type="As">
                           <operand localId="1129" locator="344:9-344:15" path="onset" scope="C" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="1130" locator="344:24-344:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="1130" locator="344:24-344:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="1130" locator="344:24-344:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="1130" locator="344:24-344:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1165" locator="347:3-354:3" name="TB_presumptive" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1165">
               <a:s>define TB_presumptive:
  </a:s>
               <a:s r="1164">
                  <a:s>exists</a:s>
                  <a:s r="1163">
                     <a:s>(
    </a:s>
                     <a:s r="1163">
                        <a:s>(</a:s>
                        <a:s r="1163">
                           <a:s>
                              <a:s r="1137">
                                 <a:s r="1136">
                                    <a:s r="1136">
                                       <a:s>[Condition]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    </a:s>
                           <a:s r="1162">
                              <a:s>where </a:s>
                              <a:s r="1162">
                                 <a:s r="1157">
                                    <a:s r="1151">
                                       <a:s r="1142">
                                          <a:s r="1139">
                                             <a:s r="1138">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1139">
                                                <a:s>clinicalStatus</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1141">
                                             <a:s r="1140">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1141">
                                                <a:s>&quot;active&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    and </a:s>
                                       <a:s r="1150">
                                          <a:s>exists</a:s>
                                          <a:s r="1149">
                                             <a:s>(</a:s>
                                             <a:s r="1149">
                                                <a:s>
                                                   <a:s r="1144">
                                                      <a:s r="1143">
                                                         <a:s>
                                                            <a:s>C.category</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> CC</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> </a:s>
                                                <a:s r="1148">
                                                   <a:s>where </a:s>
                                                   <a:s r="1148">
                                                      <a:s r="1145">
                                                         <a:s>CC</a:s>
                                                      </a:s>
                                                      <a:s> ~ </a:s>
                                                      <a:s r="1147">
                                                         <a:s r="1146">
                                                            <a:s>HCC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="1147">
                                                            <a:s>&quot;encounter-diagnosis&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    and </a:s>
                                    <a:s r="1156">
                                       <a:s r="1153">
                                          <a:s r="1152">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1153">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1155">
                                          <a:s r="1154">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1155">
                                             <a:s>&quot;Presumptive TB - HIV.D.DE945&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1161">
                                    <a:s r="1159">
                                       <a:s r="1158">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1159">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1161"> during </a:s>
                                    <a:s r="1160">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1164" locator="348:3-354:3" xsi:type="Exists">
            <operand localId="1163" locator="348:9-354:3" xsi:type="Query">
               <source localId="1137" locator="349:6-349:18" alias="C">
                  <expression localId="1136" locator="349:6-349:16" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
               </source>
               <where localId="1162" locator="350:5-353:43" xsi:type="And">
                  <operand localId="1157" locator="350:11-352:50" xsi:type="And">
                     <operand localId="1151" locator="350:11-351:66" xsi:type="And">
                        <operand localId="1142" locator="350:11-350:41" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1139" locator="350:11-350:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1141" locator="350:30-350:41" name="active" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                        <operand localId="1150" locator="351:9-351:66" xsi:type="Exists">
                           <operand localId="1149" locator="351:15-351:66" xsi:type="Query">
                              <source localId="1144" locator="351:16-351:28" alias="CC">
                                 <expression localId="1143" locator="351:16-351:25" path="category" scope="C" xsi:type="Property"/>
                              </source>
                              <where localId="1148" locator="351:30-351:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="1145" locator="351:36-351:37" name="CC" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="1147" locator="351:41-351:65" name="encounter-diagnosis" libraryName="HCC" xsi:type="CodeRef"/>
                                 </operand>
                              </where>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1156" locator="352:9-352:50" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1153" locator="352:9-352:14" path="code" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1155" locator="352:18-352:50" name="Presumptive TB - HIV.D.DE945" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1161" locator="353:9-353:43" xsi:type="IncludedIn">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:Period" xsi:type="As">
                           <operand localId="1159" locator="353:9-353:15" path="onset" scope="C" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="1160" locator="353:24-353:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="1160" locator="353:24-353:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="1160" locator="353:24-353:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="1160" locator="353:24-353:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1192" locator="357:1-363:3" name="Exposure_Occupational" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1192">
               <a:s>define Exposure_Occupational:
  </a:s>
               <a:s r="1191">
                  <a:s>exists </a:s>
                  <a:s r="1190">
                     <a:s>(
    </a:s>
                     <a:s r="1190">
                        <a:s>
                           <a:s r="1167">
                              <a:s r="1166">
                                 <a:s r="1166">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;HIV exposure type*&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1189">
                           <a:s>where </a:s>
                           <a:s r="1189">
                              <a:s r="1183">
                                 <a:s r="1174">
                                    <a:s r="1169">
                                       <a:s r="1168">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1169">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1173">
                                       <a:s>{ </a:s>
                                       <a:s r="1170">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1171">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1172">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1182">
                                    <a:s>exists</a:s>
                                    <a:s r="1181">
                                       <a:s>(</a:s>
                                       <a:s r="1181">
                                          <a:s>
                                             <a:s r="1176">
                                                <a:s r="1175">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1180">
                                             <a:s>where </a:s>
                                             <a:s r="1180">
                                                <a:s r="1177">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1179">
                                                   <a:s r="1178">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1179">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1188">
                                 <a:s r="1185">
                                    <a:s r="1184">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1185">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1187">
                                    <a:s r="1186">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1187">
                                       <a:s>&quot;Occupational&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1191" locator="358:3-363:3" xsi:type="Exists">
            <operand localId="1190" locator="358:10-363:3" xsi:type="Query">
               <source localId="1167" locator="359:5-359:44" alias="O">
                  <expression localId="1166" locator="359:5-359:42" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="359:19-359:41" name="HIV exposure type*" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1189" locator="360:5-362:35" xsi:type="And">
                  <operand localId="1183" locator="360:11-361:61" xsi:type="And">
                     <operand localId="1174" locator="360:11-360:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1169" locator="360:11-360:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1173" locator="360:23-360:57" xsi:type="List">
                           <element localId="1170" locator="360:25-360:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1171" locator="360:34-360:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1172" locator="360:45-360:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1182" locator="361:9-361:61" xsi:type="Exists">
                        <operand localId="1181" locator="361:15-361:61" xsi:type="Query">
                           <source localId="1176" locator="361:16-361:28" alias="OC">
                              <expression localId="1175" locator="361:16-361:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1180" locator="361:30-361:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1177" locator="361:36-361:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1179" locator="361:41-361:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1188" locator="362:9-362:35" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1185" locator="362:9-362:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1187" locator="362:19-362:35" name="Occupational" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1219" locator="365:1-371:3" name="Exposure_Non_Occupational_violent" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1219">
               <a:s>define Exposure_Non_Occupational_violent:
  </a:s>
               <a:s r="1218">
                  <a:s>exists </a:s>
                  <a:s r="1217">
                     <a:s>(
    </a:s>
                     <a:s r="1217">
                        <a:s>
                           <a:s r="1194">
                              <a:s r="1193">
                                 <a:s r="1193">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;HIV exposure type*&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1216">
                           <a:s>where </a:s>
                           <a:s r="1216">
                              <a:s r="1210">
                                 <a:s r="1201">
                                    <a:s r="1196">
                                       <a:s r="1195">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1196">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1200">
                                       <a:s>{ </a:s>
                                       <a:s r="1197">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1198">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1199">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1209">
                                    <a:s>exists</a:s>
                                    <a:s r="1208">
                                       <a:s>(</a:s>
                                       <a:s r="1208">
                                          <a:s>
                                             <a:s r="1203">
                                                <a:s r="1202">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1207">
                                             <a:s>where </a:s>
                                             <a:s r="1207">
                                                <a:s r="1204">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1206">
                                                   <a:s r="1205">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1206">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1215">
                                 <a:s r="1212">
                                    <a:s r="1211">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1212">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1214">
                                    <a:s r="1213">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1214">
                                       <a:s>&quot;Non-occupational violent&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1218" locator="366:3-371:3" xsi:type="Exists">
            <operand localId="1217" locator="366:10-371:3" xsi:type="Query">
               <source localId="1194" locator="367:5-367:44" alias="O">
                  <expression localId="1193" locator="367:5-367:42" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="367:19-367:41" name="HIV exposure type*" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1216" locator="368:5-370:47" xsi:type="And">
                  <operand localId="1210" locator="368:11-369:61" xsi:type="And">
                     <operand localId="1201" locator="368:11-368:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1196" locator="368:11-368:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1200" locator="368:23-368:57" xsi:type="List">
                           <element localId="1197" locator="368:25-368:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1198" locator="368:34-368:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1199" locator="368:45-368:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1209" locator="369:9-369:61" xsi:type="Exists">
                        <operand localId="1208" locator="369:15-369:61" xsi:type="Query">
                           <source localId="1203" locator="369:16-369:28" alias="OC">
                              <expression localId="1202" locator="369:16-369:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1207" locator="369:30-369:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1204" locator="369:36-369:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1206" locator="369:41-369:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1215" locator="370:9-370:47" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1212" locator="370:9-370:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1214" locator="370:19-370:47" name="Non-occupational violent" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1246" locator="373:1-379:3" name="Exposure_Non_Occupational_consensual_sex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1246">
               <a:s>define Exposure_Non_Occupational_consensual_sex:
  </a:s>
               <a:s r="1245">
                  <a:s>exists </a:s>
                  <a:s r="1244">
                     <a:s>(
    </a:s>
                     <a:s r="1244">
                        <a:s>
                           <a:s r="1221">
                              <a:s r="1220">
                                 <a:s r="1220">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;HIV exposure type*&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1243">
                           <a:s>where </a:s>
                           <a:s r="1243">
                              <a:s r="1237">
                                 <a:s r="1228">
                                    <a:s r="1223">
                                       <a:s r="1222">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1223">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1227">
                                       <a:s>{ </a:s>
                                       <a:s r="1224">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1225">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1226">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1236">
                                    <a:s>exists</a:s>
                                    <a:s r="1235">
                                       <a:s>(</a:s>
                                       <a:s r="1235">
                                          <a:s>
                                             <a:s r="1230">
                                                <a:s r="1229">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1234">
                                             <a:s>where </a:s>
                                             <a:s r="1234">
                                                <a:s r="1231">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1233">
                                                   <a:s r="1232">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1233">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1242">
                                 <a:s r="1239">
                                    <a:s r="1238">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1239">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1241">
                                    <a:s r="1240">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1241">
                                       <a:s>&quot;Non-occupational consensual sex&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1245" locator="374:3-379:3" xsi:type="Exists">
            <operand localId="1244" locator="374:10-379:3" xsi:type="Query">
               <source localId="1221" locator="375:5-375:44" alias="O">
                  <expression localId="1220" locator="375:5-375:42" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="375:19-375:41" name="HIV exposure type*" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1243" locator="376:5-378:54" xsi:type="And">
                  <operand localId="1237" locator="376:11-377:61" xsi:type="And">
                     <operand localId="1228" locator="376:11-376:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1223" locator="376:11-376:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1227" locator="376:23-376:57" xsi:type="List">
                           <element localId="1224" locator="376:25-376:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1225" locator="376:34-376:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1226" locator="376:45-376:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1236" locator="377:9-377:61" xsi:type="Exists">
                        <operand localId="1235" locator="377:15-377:61" xsi:type="Query">
                           <source localId="1230" locator="377:16-377:28" alias="OC">
                              <expression localId="1229" locator="377:16-377:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1234" locator="377:30-377:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1231" locator="377:36-377:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1233" locator="377:41-377:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1242" locator="378:9-378:54" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1239" locator="378:9-378:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1241" locator="378:19-378:54" name="Non-occupational consensual sex" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1261" locator="381:1-386:3" name="hiv_exposure_type" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1261">
               <a:s>define hiv_exposure_type:
  </a:s>
               <a:s r="1260">
                  <a:s>List&lt;</a:s>
                  <a:s r="1247">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1251">
                     <a:s>if </a:s>
                     <a:s r="1248">
                        <a:s>Exposure_Occupational</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1249">
                        <a:s>'Occupational'</a:s>
                     </a:s>
                     <a:s r="1250"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1255">
                     <a:s>if </a:s>
                     <a:s r="1252">
                        <a:s>Exposure_Non_Occupational_violent</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1253">
                        <a:s>'Non-occupational violent'</a:s>
                     </a:s>
                     <a:s r="1254"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1259">
                     <a:s>if </a:s>
                     <a:s r="1256">
                        <a:s>Exposure_Non_Occupational_consensual_sex</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1257">
                        <a:s>'Non-occupational consensual sex'</a:s>
                     </a:s>
                     <a:s r="1258"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1260" locator="382:3-386:3" xsi:type="List">
            <element localId="1251" locator="383:5-383:58" xsi:type="If">
               <condition localId="1248" locator="383:8-383:28" name="Exposure_Occupational" xsi:type="ExpressionRef"/>
               <then localId="1249" locator="383:35-383:48" valueType="t:String" value="Occupational" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1250" locator="383:55-383:58" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1255" locator="384:5-384:82" xsi:type="If">
               <condition localId="1252" locator="384:8-384:40" name="Exposure_Non_Occupational_violent" xsi:type="ExpressionRef"/>
               <then localId="1253" locator="384:47-384:72" valueType="t:String" value="Non-occupational violent" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1254" locator="384:79-384:82" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1259" locator="385:5-385:96" xsi:type="If">
               <condition localId="1256" locator="385:8-385:47" name="Exposure_Non_Occupational_consensual_sex" xsi:type="ExpressionRef"/>
               <then localId="1257" locator="385:54-385:86" valueType="t:String" value="Non-occupational consensual sex" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1258" locator="385:93-385:96" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1299" locator="390:1-397:3" name="Community_testing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1299">
               <a:s>/*@triggeredBy Encounter with location = community level testing*/

define &quot;Community_testing&quot;:
  </a:s>
               <a:s r="1298">
                  <a:s>exists</a:s>
                  <a:s r="1297">
                     <a:s>(</a:s>
                     <a:s r="1297">
                        <a:s>
                           <a:s r="1263">
                              <a:s r="1262">
                                 <a:s r="1262">
                                    <a:s>[Observation]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1279">
                           <a:s>with </a:s>
                           <a:s r="1265">
                              <a:s r="1264">
                                 <a:s r="1264">
                                    <a:s>[Encounter]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                           <a:s>
      such that </a:s>
                           <a:s r="1278">
                              <a:s r="1269">
                                 <a:s r="1267">
                                    <a:s r="1266">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1267">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1269">
                                    <a:s>references(</a:s>
                                    <a:s r="1268">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1277">
                                 <a:s>exists</a:s>
                                 <a:s r="1276">
                                    <a:s>(</a:s>
                                    <a:s r="1276">
                                       <a:s>
                                          <a:s r="1271">
                                             <a:s r="1270">
                                                <a:s>
                                                   <a:s>E.location.physicalType</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> PT</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1275">
                                          <a:s>where </a:s>
                                          <a:s r="1275">
                                             <a:s r="1272">
                                                <a:s>PT</a:s>
                                             </a:s>
                                             <a:s> ~  </a:s>
                                             <a:s r="1274">
                                                <a:s r="1273">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1274">
                                                   <a:s>&quot;Community-level testing&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
  </a:s>
                        <a:s r="1296">
                           <a:s>where </a:s>
                           <a:s r="1296">
                              <a:s>(</a:s>
                              <a:s r="1296">
                                 <a:s r="1291">
                                    <a:s r="1285">
                                       <a:s r="1281">
                                          <a:s r="1280">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1281">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="1284">
                                          <a:s>{ </a:s>
                                          <a:s r="1282">
                                             <a:s>'final'</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="1283">
                                             <a:s>'amended'</a:s>
                                          </a:s>
                                          <a:s> }</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
  and </a:s>
                                    <a:s r="1290">
                                       <a:s r="1287">
                                          <a:s r="1286">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1287">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1289">
                                          <a:s r="1288">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1289">
                                             <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
  and </a:s>
                                 <a:s r="1295">
                                    <a:s r="1293">
                                       <a:s r="1292">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1293">
                                          <a:s>issued</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1295"> during </a:s>
                                    <a:s r="1294">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1298" locator="391:3-397:3" xsi:type="Exists">
            <operand localId="1297" locator="391:9-397:3" xsi:type="Query">
               <source localId="1263" locator="391:10-391:24" alias="O">
                  <expression localId="1262" locator="391:10-391:22" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
               </source>
               <relationship localId="1279" locator="392:5-393:121" alias="E" xsi:type="With">
                  <expression localId="1264" locator="392:10-392:20" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" xsi:type="Retrieve"/>
                  <suchThat localId="1278" locator="393:17-393:121" xsi:type="And">
                     <operand localId="1269" locator="393:17-393:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="1267" locator="393:17-393:27" path="encounter" scope="O" xsi:type="Property"/>
                        <operand localId="1268" locator="393:40" name="E" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="1277" locator="393:47-393:121" xsi:type="Exists">
                        <operand localId="1276" locator="393:53-393:121" xsi:type="Query">
                           <source localId="1271" locator="393:54-393:79" alias="PT">
                              <expression localId="1270" locator="393:54-393:76" xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="location" scope="E" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="physicalType" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="physicalType" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </expression>
                           </source>
                           <where localId="1275" locator="393:81-393:120" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1272" locator="393:87-393:88" name="PT" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1274" locator="393:93-393:120" name="Community-level testing" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </suchThat>
               </relationship>
               <where localId="1296" locator="394:3-396:43" xsi:type="And">
                  <operand localId="1291" locator="394:10-395:62" xsi:type="And">
                     <operand localId="1285" locator="394:10-394:43" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1281" locator="394:10-394:17" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1284" locator="394:22-394:43" xsi:type="List">
                           <element localId="1282" locator="394:24-394:30" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1283" locator="394:33-394:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1290" locator="395:7-395:62" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1287" locator="395:7-395:12" path="code" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1289" locator="395:16-395:62" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1295" locator="396:7-396:42" xsi:type="In">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1293" locator="396:7-396:14" path="issued" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="1294" locator="396:23-396:42" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="1294" locator="396:23-396:42" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="1294" locator="396:23-396:42" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="1294" locator="396:23-396:42" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1337" locator="400:1-407:3" name="Facility_testing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1337">
               <a:s>/*@triggeredBy Encounter with location = facility level testing*/
define &quot;Facility_testing&quot;:
  </a:s>
               <a:s r="1336">
                  <a:s>exists</a:s>
                  <a:s r="1335">
                     <a:s>(</a:s>
                     <a:s r="1335">
                        <a:s>
                           <a:s r="1301">
                              <a:s r="1300">
                                 <a:s r="1300">
                                    <a:s>[Observation]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1317">
                           <a:s>with </a:s>
                           <a:s r="1303">
                              <a:s r="1302">
                                 <a:s r="1302">
                                    <a:s>[Encounter]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                           <a:s>
      such that </a:s>
                           <a:s r="1316">
                              <a:s r="1307">
                                 <a:s r="1305">
                                    <a:s r="1304">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1305">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1307">
                                    <a:s>references(</a:s>
                                    <a:s r="1306">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1315">
                                 <a:s>exists</a:s>
                                 <a:s r="1314">
                                    <a:s>(</a:s>
                                    <a:s r="1314">
                                       <a:s>
                                          <a:s r="1309">
                                             <a:s r="1308">
                                                <a:s>
                                                   <a:s>E.location.physicalType</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> PT</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1313">
                                          <a:s>where </a:s>
                                          <a:s r="1313">
                                             <a:s r="1310">
                                                <a:s>PT</a:s>
                                             </a:s>
                                             <a:s> ~  </a:s>
                                             <a:s r="1312">
                                                <a:s r="1311">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1312">
                                                   <a:s>&quot;Facility-level testing&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  </a:s>
                        <a:s r="1334">
                           <a:s>where </a:s>
                           <a:s r="1334">
                              <a:s>(</a:s>
                              <a:s r="1334">
                                 <a:s r="1329">
                                    <a:s r="1323">
                                       <a:s r="1319">
                                          <a:s r="1318">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1319">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="1322">
                                          <a:s>{ </a:s>
                                          <a:s r="1320">
                                             <a:s>'final'</a:s>
                                          </a:s>
                                          <a:s>, </a:s>
                                          <a:s r="1321">
                                             <a:s>'amended'</a:s>
                                          </a:s>
                                          <a:s> }</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
  and </a:s>
                                    <a:s r="1328">
                                       <a:s r="1325">
                                          <a:s r="1324">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1325">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1327">
                                          <a:s r="1326">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1327">
                                             <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
  and </a:s>
                                 <a:s r="1333">
                                    <a:s r="1331">
                                       <a:s r="1330">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1331">
                                          <a:s>issued</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1333"> during </a:s>
                                    <a:s r="1332">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1336" locator="401:3-407:3" xsi:type="Exists">
            <operand localId="1335" locator="401:9-407:3" xsi:type="Query">
               <source localId="1301" locator="401:10-401:24" alias="O">
                  <expression localId="1300" locator="401:10-401:22" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
               </source>
               <relationship localId="1317" locator="402:5-403:120" alias="E" xsi:type="With">
                  <expression localId="1302" locator="402:10-402:20" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" xsi:type="Retrieve"/>
                  <suchThat localId="1316" locator="403:17-403:120" xsi:type="And">
                     <operand localId="1307" locator="403:17-403:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="1305" locator="403:17-403:27" path="encounter" scope="O" xsi:type="Property"/>
                        <operand localId="1306" locator="403:40" name="E" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="1315" locator="403:47-403:120" xsi:type="Exists">
                        <operand localId="1314" locator="403:53-403:120" xsi:type="Query">
                           <source localId="1309" locator="403:54-403:79" alias="PT">
                              <expression localId="1308" locator="403:54-403:76" xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="location" scope="E" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="physicalType" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="physicalType" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </expression>
                           </source>
                           <where localId="1313" locator="403:81-403:119" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1310" locator="403:87-403:88" name="PT" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1312" locator="403:93-403:119" name="Facility-level testing" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </suchThat>
               </relationship>
               <where localId="1334" locator="404:3-406:43" xsi:type="And">
                  <operand localId="1329" locator="404:10-405:62" xsi:type="And">
                     <operand localId="1323" locator="404:10-404:43" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1319" locator="404:10-404:17" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1322" locator="404:22-404:43" xsi:type="List">
                           <element localId="1320" locator="404:24-404:30" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1321" locator="404:33-404:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1328" locator="405:7-405:62" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1325" locator="405:7-405:12" path="code" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1327" locator="405:16-405:62" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1333" locator="406:7-406:42" xsi:type="In">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1331" locator="406:7-406:14" path="issued" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="1332" locator="406:23-406:42" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="1332" locator="406:23-406:42" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="1332" locator="406:23-406:42" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="1332" locator="406:23-406:42" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1364" locator="410:1-422:5" name="ANC_case" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1364">
               <a:s>//lifted this from ANC DAK
define &quot;ANC_case&quot;:
</a:s>
               <a:s r="1363">
                  <a:s>exists</a:s>
                  <a:s r="1362">
                     <a:s>(
    </a:s>
                     <a:s r="1362">
                        <a:s>
                           <a:s r="1339">
                              <a:s r="1338">
                                 <a:s r="1338">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1361">
                           <a:s>where </a:s>
                           <a:s r="1361">
                              <a:s r="1347">
                                 <a:s>exists</a:s>
                                 <a:s r="1346">
                                    <a:s>(</a:s>
                                    <a:s r="1346">
                                       <a:s>
                                          <a:s r="1341">
                                             <a:s r="1340">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1345">
                                          <a:s>where </a:s>
                                          <a:s r="1345">
                                             <a:s r="1342">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1344">
                                                <a:s r="1343">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1344">
                                                   <a:s>&quot;Already on ART at first antenatal care visit&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1360">
                                 <a:s>(</a:s>
                                 <a:s r="1360">
                                    <a:s r="1355">
                                       <a:s>exists </a:s>
                                       <a:s r="1354">
                                          <a:s>(
      </a:s>
                                          <a:s r="1354">
                                             <a:s>
                                                <a:s r="1349">
                                                   <a:s r="1348">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="1353">
                                                <a:s>where </a:s>
                                                <a:s r="1353">
                                                   <a:s r="1351">
                                                      <a:s r="1350">
                                                         <a:s>H</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="1351">
                                                         <a:s>period</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s r="1353"> overlaps </a:s>
                                                   <a:s r="1352">
                                                      <a:s>&quot;Measurement Period&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="1359">
                                       <a:s>(
      </a:s>
                                       <a:s r="1359">
                                          <a:s r="1357">
                                             <a:s r="1356">
                                                <a:s>EOC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1357">
                                                <a:s>period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="1359"> overlaps </a:s>
                                          <a:s r="1358">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1363" locator="411:1-422:5" xsi:type="Exists">
            <operand localId="1362" locator="411:7-422:5" xsi:type="Query">
               <source localId="1339" locator="412:5-412:23" alias="EOC">
                  <expression localId="1338" locator="412:5-412:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="1361" locator="413:5-421:5" xsi:type="And">
                  <operand localId="1347" locator="413:11-413:88" xsi:type="Exists">
                     <operand localId="1346" locator="413:17-413:88" xsi:type="Query">
                        <source localId="1341" locator="413:18-413:27" alias="T">
                           <expression localId="1340" locator="413:18-413:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="1345" locator="413:29-413:87" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1342" locator="413:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1344" locator="413:39-413:87" name="Already on ART at first antenatal care visit" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="1360" locator="414:9-421:5" xsi:type="Or">
                     <operand localId="1355" locator="414:10-417:5" xsi:type="Exists">
                        <operand localId="1354" locator="414:17-417:5" xsi:type="Query">
                           <source localId="1349" locator="415:7-415:25" alias="H">
                              <expression localId="1348" locator="415:7-415:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="1353" locator="416:7-416:50" xsi:type="Overlaps">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1351" locator="416:13-416:20" path="period" scope="H" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="Interval">
                                 <low xsi:type="ToDateTime">
                                    <operand path="low" xsi:type="Property">
                                       <source localId="1352" locator="416:31-416:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </low>
                                 <lowClosedExpression path="lowClosed" xsi:type="Property">
                                    <source localId="1352" locator="416:31-416:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </lowClosedExpression>
                                 <high xsi:type="ToDateTime">
                                    <operand path="high" xsi:type="Property">
                                       <source localId="1352" locator="416:31-416:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </high>
                                 <highClosedExpression path="highClosed" xsi:type="Property">
                                    <source localId="1352" locator="416:31-416:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </highClosedExpression>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="1359" locator="418:8-420:5" xsi:type="Overlaps">
                        <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1357" locator="419:7-419:16" path="period" scope="EOC" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand path="low" xsi:type="Property">
                                 <source localId="1358" locator="419:27-419:46" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source localId="1358" locator="419:27-419:46" name="Measurement Period" xsi:type="ParameterRef"/>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand path="high" xsi:type="Property">
                                 <source localId="1358" locator="419:27-419:46" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source localId="1358" locator="419:27-419:46" name="Measurement Period" xsi:type="ParameterRef"/>
                           </highClosedExpression>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1406" locator="425:3-433:3" name="PREP Product Oral" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1406">
               <a:s>define &quot;PREP Product Oral&quot;:
  </a:s>
               <a:s r="1405">
                  <a:s>exists</a:s>
                  <a:s r="1404">
                     <a:s>(</a:s>
                     <a:s r="1404">
                        <a:s>
                           <a:s r="1366">
                              <a:s r="1365">
                                 <a:s r="1365">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1403">
                           <a:s>where </a:s>
                           <a:s r="1403">
                              <a:s r="1379">
                                 <a:s r="1370">
                                    <a:s r="1368">
                                       <a:s r="1367">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1368">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1369">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1378">
                                    <a:s>exists</a:s>
                                    <a:s r="1377">
                                       <a:s>(</a:s>
                                       <a:s r="1377">
                                          <a:s>
                                             <a:s r="1372">
                                                <a:s r="1371">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1376">
                                             <a:s>where </a:s>
                                             <a:s r="1376">
                                                <a:s r="1373">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1375">
                                                   <a:s r="1374">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1375">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1402">
                                 <a:s>(</a:s>
                                 <a:s r="1402">
                                    <a:s r="1396">
                                       <a:s r="1390">
                                          <a:s r="1384">
                                             <a:s r="1381">
                                                <a:s r="1380">
                                                   <a:s>MS</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1381">
                                                   <a:s>medication</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1383">
                                                <a:s r="1382">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1383">
                                                   <a:s>&quot;TDF + FTC - HIV.C.DE18&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> or
    </a:s>
                                          <a:s r="1389">
                                             <a:s r="1386">
                                                <a:s r="1385">
                                                   <a:s>MS</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1386">
                                                   <a:s>medication</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1388">
                                                <a:s r="1387">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1388">
                                                   <a:s>&quot;TDF - HIV.C.DE19&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or
    </a:s>
                                       <a:s r="1395">
                                          <a:s r="1392">
                                             <a:s r="1391">
                                                <a:s>MS</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1392">
                                                <a:s>medication</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1394">
                                             <a:s r="1393">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1394">
                                                <a:s>&quot;TDF + 3TC - HIV.C.DE20&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> or
    </a:s>
                                    <a:s r="1401">
                                       <a:s r="1398">
                                          <a:s r="1397">
                                             <a:s>MS</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1398">
                                             <a:s>medication</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1400">
                                          <a:s r="1399">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1400">
                                             <a:s>&quot;Other TDF-based regimen&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1405" locator="426:3-433:3" xsi:type="Exists">
            <operand localId="1404" locator="426:9-433:3" xsi:type="Query">
               <source localId="1366" locator="426:10-426:33" alias="MS">
                  <expression localId="1365" locator="426:10-426:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1403" locator="427:5-432:49" xsi:type="And">
                  <operand localId="1379" locator="427:11-428:64" xsi:type="And">
                     <operand localId="1370" locator="427:11-427:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1368" locator="427:11-427:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1369" locator="427:23-427:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1378" locator="428:9-428:64" xsi:type="Exists">
                        <operand localId="1377" locator="428:15-428:64" xsi:type="Query">
                           <source localId="1372" locator="428:16-428:30" alias="C">
                              <expression localId="1371" locator="428:16-428:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1376" locator="428:32-428:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1373" locator="428:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1375" locator="428:42-428:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1402" locator="429:9-432:49" xsi:type="Or">
                     <operand localId="1396" locator="429:10-431:47" xsi:type="Or">
                        <operand localId="1390" locator="429:10-430:41" xsi:type="Or">
                           <operand localId="1384" locator="429:10-429:52" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:CodeableConcept" xsi:type="As">
                                    <operand localId="1381" locator="429:10-429:22" path="medication" scope="MS" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1383" locator="429:26-429:52" name="TDF + FTC - HIV.C.DE18" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                           <operand localId="1389" locator="430:5-430:41" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:CodeableConcept" xsi:type="As">
                                    <operand localId="1386" locator="430:5-430:17" path="medication" scope="MS" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1388" locator="430:21-430:41" name="TDF - HIV.C.DE19" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="1395" locator="431:5-431:47" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:CodeableConcept" xsi:type="As">
                                 <operand localId="1392" locator="431:5-431:17" path="medication" scope="MS" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1394" locator="431:21-431:47" name="TDF + 3TC - HIV.C.DE20" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1401" locator="432:5-432:48" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="1398" locator="432:5-432:17" path="medication" scope="MS" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1400" locator="432:21-432:48" name="Other TDF-based regimen" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1430" locator="435:3-440:3" name="PREP Product long-acting device" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1430">
               <a:s>define &quot;PREP Product long-acting device&quot;:
  </a:s>
               <a:s r="1429">
                  <a:s>exists</a:s>
                  <a:s r="1428">
                     <a:s>(</a:s>
                     <a:s r="1428">
                        <a:s>
                           <a:s r="1408">
                              <a:s r="1407">
                                 <a:s r="1407">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1427">
                           <a:s>where </a:s>
                           <a:s r="1427">
                              <a:s r="1421">
                                 <a:s r="1412">
                                    <a:s r="1410">
                                       <a:s r="1409">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1410">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1411">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1420">
                                    <a:s>exists</a:s>
                                    <a:s r="1419">
                                       <a:s>(</a:s>
                                       <a:s r="1419">
                                          <a:s>
                                             <a:s r="1414">
                                                <a:s r="1413">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1418">
                                             <a:s>where </a:s>
                                             <a:s r="1418">
                                                <a:s r="1415">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1417">
                                                   <a:s r="1416">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1417">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1426">
                                 <a:s r="1423">
                                    <a:s r="1422">
                                       <a:s>MS</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1423">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1425">
                                    <a:s r="1424">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1425">
                                       <a:s>&quot;Dapivirine vaginal ring DVR - HIV.C.DE22&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1429" locator="436:3-440:3" xsi:type="Exists">
            <operand localId="1428" locator="436:9-440:3" xsi:type="Query">
               <source localId="1408" locator="436:10-436:33" alias="MS">
                  <expression localId="1407" locator="436:10-436:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1427" locator="437:5-439:69" xsi:type="And">
                  <operand localId="1421" locator="437:11-438:64" xsi:type="And">
                     <operand localId="1412" locator="437:11-437:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1410" locator="437:11-437:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1411" locator="437:23-437:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1420" locator="438:9-438:64" xsi:type="Exists">
                        <operand localId="1419" locator="438:15-438:64" xsi:type="Query">
                           <source localId="1414" locator="438:16-438:30" alias="C">
                              <expression localId="1413" locator="438:16-438:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1418" locator="438:32-438:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1415" locator="438:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1417" locator="438:42-438:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1426" locator="439:9-439:69" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1423" locator="439:9-439:21" path="medication" scope="MS" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1425" locator="439:25-439:69" name="Dapivirine vaginal ring DVR - HIV.C.DE22" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1454" locator="442:3-447:3" name="PREP Product long-acting injectable" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1454">
               <a:s>define &quot;PREP Product long-acting injectable&quot;:
  </a:s>
               <a:s r="1453">
                  <a:s>exists</a:s>
                  <a:s r="1452">
                     <a:s>(</a:s>
                     <a:s r="1452">
                        <a:s>
                           <a:s r="1432">
                              <a:s r="1431">
                                 <a:s r="1431">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1451">
                           <a:s>where </a:s>
                           <a:s r="1451">
                              <a:s r="1445">
                                 <a:s r="1436">
                                    <a:s r="1434">
                                       <a:s r="1433">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1434">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1435">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1444">
                                    <a:s>exists</a:s>
                                    <a:s r="1443">
                                       <a:s>(</a:s>
                                       <a:s r="1443">
                                          <a:s>
                                             <a:s r="1438">
                                                <a:s r="1437">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1442">
                                             <a:s>where </a:s>
                                             <a:s r="1442">
                                                <a:s r="1439">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1441">
                                                   <a:s r="1440">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1441">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1450">
                                 <a:s r="1447">
                                    <a:s r="1446">
                                       <a:s>MS</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1447">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1449">
                                    <a:s r="1448">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1449">
                                       <a:s>&quot;CAB-LA - HIV.C.DE23&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1453" locator="443:3-447:3" xsi:type="Exists">
            <operand localId="1452" locator="443:9-447:3" xsi:type="Query">
               <source localId="1432" locator="443:10-443:33" alias="MS">
                  <expression localId="1431" locator="443:10-443:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1451" locator="444:5-446:48" xsi:type="And">
                  <operand localId="1445" locator="444:11-445:64" xsi:type="And">
                     <operand localId="1436" locator="444:11-444:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1434" locator="444:11-444:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1435" locator="444:23-444:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1444" locator="445:9-445:64" xsi:type="Exists">
                        <operand localId="1443" locator="445:15-445:64" xsi:type="Query">
                           <source localId="1438" locator="445:16-445:30" alias="C">
                              <expression localId="1437" locator="445:16-445:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1442" locator="445:32-445:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1439" locator="445:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1441" locator="445:42-445:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1450" locator="446:9-446:48" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1447" locator="446:9-446:21" path="medication" scope="MS" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1449" locator="446:25-446:48" name="CAB-LA - HIV.C.DE23" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1481" locator="449:3-454:3" name="PREP first time" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1481">
               <a:s>define &quot;PREP first time&quot;:
  </a:s>
               <a:s r="1480">
                  <a:s>exists</a:s>
                  <a:s r="1479">
                     <a:s>(</a:s>
                     <a:s r="1479">
                        <a:s>
                           <a:s r="1456">
                              <a:s r="1455">
                                 <a:s r="1455">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1478">
                           <a:s>where </a:s>
                           <a:s r="1478">
                              <a:s r="1469">
                                 <a:s r="1460">
                                    <a:s r="1458">
                                       <a:s r="1457">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1458">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1459">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1468">
                                    <a:s>exists</a:s>
                                    <a:s r="1467">
                                       <a:s>(</a:s>
                                       <a:s r="1467">
                                          <a:s>
                                             <a:s r="1462">
                                                <a:s r="1461">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1466">
                                             <a:s>where </a:s>
                                             <a:s r="1466">
                                                <a:s r="1463">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1465">
                                                   <a:s r="1464">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1465">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1477">
                                 <a:s>exists</a:s>
                                 <a:s r="1476">
                                    <a:s>(</a:s>
                                    <a:s r="1476">
                                       <a:s>
                                          <a:s r="1471">
                                             <a:s r="1470">
                                                <a:s>
                                                   <a:s>MS.statusReason</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> SR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1475">
                                          <a:s>where </a:s>
                                          <a:s r="1475">
                                             <a:s r="1472">
                                                <a:s>SR</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1474">
                                                <a:s r="1473">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1474">
                                                   <a:s>&quot;First-time user - HIV.C.DE25&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1480" locator="450:3-454:3" xsi:type="Exists">
            <operand localId="1479" locator="450:9-454:3" xsi:type="Query">
               <source localId="1456" locator="450:10-450:33" alias="MS">
                  <expression localId="1455" locator="450:10-450:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1478" locator="451:5-453:79" xsi:type="And">
                  <operand localId="1469" locator="451:11-452:64" xsi:type="And">
                     <operand localId="1460" locator="451:11-451:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1458" locator="451:11-451:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1459" locator="451:23-451:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1468" locator="452:9-452:64" xsi:type="Exists">
                        <operand localId="1467" locator="452:15-452:64" xsi:type="Query">
                           <source localId="1462" locator="452:16-452:30" alias="C">
                              <expression localId="1461" locator="452:16-452:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1466" locator="452:32-452:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1463" locator="452:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1465" locator="452:42-452:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1477" locator="453:9-453:79" xsi:type="Exists">
                     <operand localId="1476" locator="453:15-453:79" xsi:type="Query">
                        <source localId="1471" locator="453:16-453:33" alias="SR">
                           <expression localId="1470" locator="453:16-453:30" path="statusReason" scope="MS" xsi:type="Property"/>
                        </source>
                        <where localId="1475" locator="453:35-453:78" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1472" locator="453:41-453:42" name="SR" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1474" locator="453:46-453:78" name="First-time user - HIV.C.DE25" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1508" locator="456:3-461:3" name="PREP Continuing user" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1508">
               <a:s>define &quot;PREP Continuing user&quot;:
  </a:s>
               <a:s r="1507">
                  <a:s>exists</a:s>
                  <a:s r="1506">
                     <a:s>(</a:s>
                     <a:s r="1506">
                        <a:s>
                           <a:s r="1483">
                              <a:s r="1482">
                                 <a:s r="1482">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1505">
                           <a:s>where </a:s>
                           <a:s r="1505">
                              <a:s r="1496">
                                 <a:s r="1487">
                                    <a:s r="1485">
                                       <a:s r="1484">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1485">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1486">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1495">
                                    <a:s>exists</a:s>
                                    <a:s r="1494">
                                       <a:s>(</a:s>
                                       <a:s r="1494">
                                          <a:s>
                                             <a:s r="1489">
                                                <a:s r="1488">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1493">
                                             <a:s>where </a:s>
                                             <a:s r="1493">
                                                <a:s r="1490">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1492">
                                                   <a:s r="1491">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1492">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1504">
                                 <a:s>exists</a:s>
                                 <a:s r="1503">
                                    <a:s>(</a:s>
                                    <a:s r="1503">
                                       <a:s>
                                          <a:s r="1498">
                                             <a:s r="1497">
                                                <a:s>
                                                   <a:s>MS.statusReason</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> SR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1502">
                                          <a:s>where </a:s>
                                          <a:s r="1502">
                                             <a:s r="1499">
                                                <a:s>SR</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1501">
                                                <a:s r="1500">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1501">
                                                   <a:s>&quot;Continuing user&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1507" locator="457:3-461:3" xsi:type="Exists">
            <operand localId="1506" locator="457:9-461:3" xsi:type="Query">
               <source localId="1483" locator="457:10-457:33" alias="MS">
                  <expression localId="1482" locator="457:10-457:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1505" locator="458:5-460:66" xsi:type="And">
                  <operand localId="1496" locator="458:11-459:64" xsi:type="And">
                     <operand localId="1487" locator="458:11-458:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1485" locator="458:11-458:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1486" locator="458:23-458:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1495" locator="459:9-459:64" xsi:type="Exists">
                        <operand localId="1494" locator="459:15-459:64" xsi:type="Query">
                           <source localId="1489" locator="459:16-459:30" alias="C">
                              <expression localId="1488" locator="459:16-459:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1493" locator="459:32-459:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1490" locator="459:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1492" locator="459:42-459:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1504" locator="460:9-460:66" xsi:type="Exists">
                     <operand localId="1503" locator="460:15-460:66" xsi:type="Query">
                        <source localId="1498" locator="460:16-460:33" alias="SR">
                           <expression localId="1497" locator="460:16-460:30" path="statusReason" scope="MS" xsi:type="Property"/>
                        </source>
                        <where localId="1502" locator="460:35-460:65" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1499" locator="460:41-460:42" name="SR" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1501" locator="460:46-460:65" name="Continuing user" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1535" locator="463:3-468:3" name="PREP Restarting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1535">
               <a:s>define &quot;PREP Restarting&quot;:
  </a:s>
               <a:s r="1534">
                  <a:s>exists</a:s>
                  <a:s r="1533">
                     <a:s>(</a:s>
                     <a:s r="1533">
                        <a:s>
                           <a:s r="1510">
                              <a:s r="1509">
                                 <a:s r="1509">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1532">
                           <a:s>where </a:s>
                           <a:s r="1532">
                              <a:s r="1523">
                                 <a:s r="1514">
                                    <a:s r="1512">
                                       <a:s r="1511">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1512">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1513">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1522">
                                    <a:s>exists</a:s>
                                    <a:s r="1521">
                                       <a:s>(</a:s>
                                       <a:s r="1521">
                                          <a:s>
                                             <a:s r="1516">
                                                <a:s r="1515">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1520">
                                             <a:s>where </a:s>
                                             <a:s r="1520">
                                                <a:s r="1517">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1519">
                                                   <a:s r="1518">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1519">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1531">
                                 <a:s>exists</a:s>
                                 <a:s r="1530">
                                    <a:s>(</a:s>
                                    <a:s r="1530">
                                       <a:s>
                                          <a:s r="1525">
                                             <a:s r="1524">
                                                <a:s>
                                                   <a:s>MS.statusReason</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> SR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1529">
                                          <a:s>where </a:s>
                                          <a:s r="1529">
                                             <a:s r="1526">
                                                <a:s>SR</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1528">
                                                <a:s r="1527">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1528">
                                                   <a:s>&quot;Restarting following a period of not taking PrEP&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1534" locator="464:3-468:3" xsi:type="Exists">
            <operand localId="1533" locator="464:9-468:3" xsi:type="Query">
               <source localId="1510" locator="464:10-464:33" alias="MS">
                  <expression localId="1509" locator="464:10-464:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1532" locator="465:5-467:99" xsi:type="And">
                  <operand localId="1523" locator="465:11-466:64" xsi:type="And">
                     <operand localId="1514" locator="465:11-465:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1512" locator="465:11-465:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1513" locator="465:23-465:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1522" locator="466:9-466:64" xsi:type="Exists">
                        <operand localId="1521" locator="466:15-466:64" xsi:type="Query">
                           <source localId="1516" locator="466:16-466:30" alias="C">
                              <expression localId="1515" locator="466:16-466:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1520" locator="466:32-466:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1517" locator="466:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1519" locator="466:42-466:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1531" locator="467:9-467:99" xsi:type="Exists">
                     <operand localId="1530" locator="467:15-467:99" xsi:type="Query">
                        <source localId="1525" locator="467:16-467:33" alias="SR">
                           <expression localId="1524" locator="467:16-467:30" path="statusReason" scope="MS" xsi:type="Property"/>
                        </source>
                        <where localId="1529" locator="467:35-467:98" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1526" locator="467:41-467:42" name="SR" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1528" locator="467:46-467:98" name="Restarting following a period of not taking PrEP" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1562" locator="470:3-475:3" name="Daily_oral_PrEP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1562">
               <a:s>define &quot;Daily_oral_PrEP&quot;:
  </a:s>
               <a:s r="1561">
                  <a:s>exists</a:s>
                  <a:s r="1560">
                     <a:s>(</a:s>
                     <a:s r="1560">
                        <a:s>
                           <a:s r="1537">
                              <a:s r="1536">
                                 <a:s r="1536">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1559">
                           <a:s>where </a:s>
                           <a:s r="1559">
                              <a:s r="1550">
                                 <a:s r="1541">
                                    <a:s r="1539">
                                       <a:s r="1538">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1539">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1540">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1549">
                                    <a:s>exists</a:s>
                                    <a:s r="1548">
                                       <a:s>(</a:s>
                                       <a:s r="1548">
                                          <a:s>
                                             <a:s r="1543">
                                                <a:s r="1542">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1547">
                                             <a:s>where </a:s>
                                             <a:s r="1547">
                                                <a:s r="1544">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1546">
                                                   <a:s r="1545">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1546">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1558">
                                 <a:s>exists</a:s>
                                 <a:s r="1557">
                                    <a:s>(</a:s>
                                    <a:s r="1557">
                                       <a:s>
                                          <a:s r="1552">
                                             <a:s r="1551">
                                                <a:s>
                                                   <a:s>MS.dosage.additionalInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> AI</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1556">
                                          <a:s>where </a:s>
                                          <a:s r="1556">
                                             <a:s r="1553">
                                                <a:s>AI</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1555">
                                                <a:s r="1554">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1555">
                                                   <a:s>&quot;Daily oral PrEP&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1561" locator="471:3-475:3" xsi:type="Exists">
            <operand localId="1560" locator="471:9-475:3" xsi:type="Query">
               <source localId="1537" locator="471:10-471:33" alias="MS">
                  <expression localId="1536" locator="471:10-471:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1559" locator="472:5-474:82" xsi:type="And">
                  <operand localId="1550" locator="472:11-473:64" xsi:type="And">
                     <operand localId="1541" locator="472:11-472:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1539" locator="472:11-472:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1540" locator="472:23-472:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1549" locator="473:9-473:64" xsi:type="Exists">
                        <operand localId="1548" locator="473:15-473:64" xsi:type="Query">
                           <source localId="1543" locator="473:16-473:30" alias="C">
                              <expression localId="1542" locator="473:16-473:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1547" locator="473:32-473:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1544" locator="473:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1546" locator="473:42-473:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1558" locator="474:9-474:82" xsi:type="Exists">
                     <operand localId="1557" locator="474:15-474:82" xsi:type="Query">
                        <source localId="1552" locator="474:16-474:49" alias="AI">
                           <expression localId="1551" locator="474:16-474:46" xsi:type="Flatten">
                              <operand xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="dosage" scope="MS" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="additionalInstruction" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="additionalInstruction" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </operand>
                           </expression>
                        </source>
                        <where localId="1556" locator="474:51-474:81" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1553" locator="474:57-474:58" name="AI" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1555" locator="474:62-474:81" name="Daily oral PrEP" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1589" locator="477:3-482:3" name="Event_driven_PrEP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1589">
               <a:s>define &quot;Event_driven_PrEP&quot;:
  </a:s>
               <a:s r="1588">
                  <a:s>exists</a:s>
                  <a:s r="1587">
                     <a:s>(</a:s>
                     <a:s r="1587">
                        <a:s>
                           <a:s r="1564">
                              <a:s r="1563">
                                 <a:s r="1563">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1586">
                           <a:s>where </a:s>
                           <a:s r="1586">
                              <a:s r="1577">
                                 <a:s r="1568">
                                    <a:s r="1566">
                                       <a:s r="1565">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1566">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1567">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1576">
                                    <a:s>exists</a:s>
                                    <a:s r="1575">
                                       <a:s>(</a:s>
                                       <a:s r="1575">
                                          <a:s>
                                             <a:s r="1570">
                                                <a:s r="1569">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1574">
                                             <a:s>where </a:s>
                                             <a:s r="1574">
                                                <a:s r="1571">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1573">
                                                   <a:s r="1572">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1573">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1585">
                                 <a:s>exists</a:s>
                                 <a:s r="1584">
                                    <a:s>(</a:s>
                                    <a:s r="1584">
                                       <a:s>
                                          <a:s r="1579">
                                             <a:s r="1578">
                                                <a:s>
                                                   <a:s>MS.dosage.additionalInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> AI</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1583">
                                          <a:s>where </a:s>
                                          <a:s r="1583">
                                             <a:s r="1580">
                                                <a:s>AI</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1582">
                                                <a:s r="1581">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1582">
                                                   <a:s>&quot;Event-driven PrEP 2+1+1&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1588" locator="478:3-482:3" xsi:type="Exists">
            <operand localId="1587" locator="478:9-482:3" xsi:type="Query">
               <source localId="1564" locator="478:10-478:33" alias="MS">
                  <expression localId="1563" locator="478:10-478:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1586" locator="479:5-481:90" xsi:type="And">
                  <operand localId="1577" locator="479:11-480:64" xsi:type="And">
                     <operand localId="1568" locator="479:11-479:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1566" locator="479:11-479:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1567" locator="479:23-479:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1576" locator="480:9-480:64" xsi:type="Exists">
                        <operand localId="1575" locator="480:15-480:64" xsi:type="Query">
                           <source localId="1570" locator="480:16-480:30" alias="C">
                              <expression localId="1569" locator="480:16-480:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1574" locator="480:32-480:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1571" locator="480:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1573" locator="480:42-480:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1585" locator="481:9-481:90" xsi:type="Exists">
                     <operand localId="1584" locator="481:15-481:90" xsi:type="Query">
                        <source localId="1579" locator="481:16-481:49" alias="AI">
                           <expression localId="1578" locator="481:16-481:46" xsi:type="Flatten">
                              <operand xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="dosage" scope="MS" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="additionalInstruction" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="additionalInstruction" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </operand>
                           </expression>
                        </source>
                        <where localId="1583" locator="481:51-481:89" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1580" locator="481:57-481:58" name="AI" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1582" locator="481:62-481:89" name="Event-driven PrEP 2+1+1" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1616" locator="484:3-489:3" name="other_dosing_PrEP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1616">
               <a:s>define &quot;other_dosing_PrEP&quot;:
  </a:s>
               <a:s r="1615">
                  <a:s>exists</a:s>
                  <a:s r="1614">
                     <a:s>(</a:s>
                     <a:s r="1614">
                        <a:s>
                           <a:s r="1591">
                              <a:s r="1590">
                                 <a:s r="1590">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1613">
                           <a:s>where </a:s>
                           <a:s r="1613">
                              <a:s r="1604">
                                 <a:s r="1595">
                                    <a:s r="1593">
                                       <a:s r="1592">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1593">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1594">
                                       <a:s>'recorded'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1603">
                                    <a:s>exists</a:s>
                                    <a:s r="1602">
                                       <a:s>(</a:s>
                                       <a:s r="1602">
                                          <a:s>
                                             <a:s r="1597">
                                                <a:s r="1596">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1601">
                                             <a:s>where </a:s>
                                             <a:s r="1601">
                                                <a:s r="1598">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1600">
                                                   <a:s r="1599">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1600">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1612">
                                 <a:s>exists</a:s>
                                 <a:s r="1611">
                                    <a:s>(</a:s>
                                    <a:s r="1611">
                                       <a:s>
                                          <a:s r="1606">
                                             <a:s r="1605">
                                                <a:s>
                                                   <a:s>MS.dosage.additionalInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> AI</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1610">
                                          <a:s>where </a:s>
                                          <a:s r="1610">
                                             <a:s r="1607">
                                                <a:s>AI</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1609">
                                                <a:s r="1608">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1609">
                                                   <a:s>&quot;Other PrEP dosing type&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1615" locator="485:3-489:3" xsi:type="Exists">
            <operand localId="1614" locator="485:9-489:3" xsi:type="Query">
               <source localId="1591" locator="485:10-485:33" alias="MS">
                  <expression localId="1590" locator="485:10-485:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1613" locator="486:5-488:89" xsi:type="And">
                  <operand localId="1604" locator="486:11-487:64" xsi:type="And">
                     <operand localId="1595" locator="486:11-486:32" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1593" locator="486:11-486:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1594" locator="486:23-486:32" valueType="t:String" value="recorded" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1603" locator="487:9-487:64" xsi:type="Exists">
                        <operand localId="1602" locator="487:15-487:64" xsi:type="Query">
                           <source localId="1597" locator="487:16-487:30" alias="C">
                              <expression localId="1596" locator="487:16-487:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1601" locator="487:32-487:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1598" locator="487:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1600" locator="487:42-487:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1612" locator="488:9-488:89" xsi:type="Exists">
                     <operand localId="1611" locator="488:15-488:89" xsi:type="Query">
                        <source localId="1606" locator="488:16-488:49" alias="AI">
                           <expression localId="1605" locator="488:16-488:46" xsi:type="Flatten">
                              <operand xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="dosage" scope="MS" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="additionalInstruction" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="additionalInstruction" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </operand>
                           </expression>
                        </source>
                        <where localId="1610" locator="488:51-488:88" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1607" locator="488:57-488:58" name="AI" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1609" locator="488:62-488:88" name="Other PrEP dosing type" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1639" locator="492:3-499:3" name="patientGroups" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1639">
               <a:s>define patientGroups:
  </a:s>
               <a:s r="1638">
                  <a:s>List&lt;</a:s>
                  <a:s r="1617">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1621">
                     <a:s>if </a:s>
                     <a:s r="1618">
                        <a:s>SW</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1619">
                        <a:s>'SW'</a:s>
                     </a:s>
                     <a:s r="1620"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1625">
                     <a:s>if </a:s>
                     <a:s r="1622">
                        <a:s>MSM</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1623">
                        <a:s>'MSM'</a:s>
                     </a:s>
                     <a:s r="1624"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1629">
                     <a:s>if </a:s>
                     <a:s r="1626">
                        <a:s>Trans</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1627">
                        <a:s>'Trans'</a:s>
                     </a:s>
                     <a:s r="1628"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1633">
                     <a:s>if </a:s>
                     <a:s r="1630">
                        <a:s>PWID</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1631">
                        <a:s>'PWID'</a:s>
                     </a:s>
                     <a:s r="1632"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1637">
                     <a:s>if </a:s>
                     <a:s r="1634">
                        <a:s>Prisoner</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1635">
                        <a:s>'Prisoner'</a:s>
                     </a:s>
                     <a:s r="1636"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1638" locator="493:3-499:3" xsi:type="List">
            <element localId="1621" locator="494:5-494:29" xsi:type="If">
               <condition localId="1618" locator="494:8-494:9" name="SW" xsi:type="ExpressionRef"/>
               <then localId="1619" locator="494:16-494:19" valueType="t:String" value="SW" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1620" locator="494:26-494:29" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1625" locator="495:5-495:31" xsi:type="If">
               <condition localId="1622" locator="495:8-495:10" name="MSM" xsi:type="ExpressionRef"/>
               <then localId="1623" locator="495:17-495:21" valueType="t:String" value="MSM" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1624" locator="495:28-495:31" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1629" locator="496:5-496:35" xsi:type="If">
               <condition localId="1626" locator="496:8-496:12" name="Trans" xsi:type="ExpressionRef"/>
               <then localId="1627" locator="496:19-496:25" valueType="t:String" value="Trans" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1628" locator="496:32-496:35" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1633" locator="497:5-497:33" xsi:type="If">
               <condition localId="1630" locator="497:8-497:11" name="PWID" xsi:type="ExpressionRef"/>
               <then localId="1631" locator="497:18-497:23" valueType="t:String" value="PWID" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1632" locator="497:30-497:33" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1637" locator="498:5-498:41" xsi:type="If">
               <condition localId="1634" locator="498:8-498:15" name="Prisoner" xsi:type="ExpressionRef"/>
               <then localId="1635" locator="498:22-498:31" valueType="t:String" value="Prisoner" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1636" locator="498:38-498:41" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1650" locator="501:3-505:3" name="setting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1650">
               <a:s>define setting:
  </a:s>
               <a:s r="1649">
                  <a:s>List&lt;</a:s>
                  <a:s r="1640">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1644">
                     <a:s>if </a:s>
                     <a:s r="1641">
                        <a:s>Community_testing</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1642">
                        <a:s>'Community-level testing'</a:s>
                     </a:s>
                     <a:s r="1643"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1648">
                     <a:s>if </a:s>
                     <a:s r="1645">
                        <a:s>Facility_testing</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1646">
                        <a:s>'Facility-level testing'</a:s>
                     </a:s>
                     <a:s r="1647"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1649" locator="502:3-505:3" xsi:type="List">
            <element localId="1644" locator="503:5-503:65" xsi:type="If">
               <condition localId="1641" locator="503:8-503:24" name="Community_testing" xsi:type="ExpressionRef"/>
               <then localId="1642" locator="503:31-503:55" valueType="t:String" value="Community-level testing" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1643" locator="503:62-503:65" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1648" locator="504:5-504:63" xsi:type="If">
               <condition localId="1645" locator="504:8-504:23" name="Facility_testing" xsi:type="ExpressionRef"/>
               <then localId="1646" locator="504:30-504:53" valueType="t:String" value="Facility-level testing" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1647" locator="504:60-504:63" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1657" locator="507:3-510:3" name="anc" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1657">
               <a:s>define anc:
  </a:s>
               <a:s r="1656">
                  <a:s>List&lt;</a:s>
                  <a:s r="1651">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1655">
                     <a:s>if </a:s>
                     <a:s r="1652">
                        <a:s>ANC_case</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1653">
                        <a:s>'ANC case'</a:s>
                     </a:s>
                     <a:s r="1654"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1656" locator="508:3-510:3" xsi:type="List">
            <element localId="1655" locator="509:5-509:41" xsi:type="If">
               <condition localId="1652" locator="509:8-509:15" name="ANC_case" xsi:type="ExpressionRef"/>
               <then localId="1653" locator="509:22-509:31" valueType="t:String" value="ANC case" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1654" locator="509:38-509:41" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1668" locator="512:3-516:3" name="tb" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1668">
               <a:s>define tb:
  </a:s>
               <a:s r="1667">
                  <a:s>List&lt;</a:s>
                  <a:s r="1658">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1662">
                     <a:s>if </a:s>
                     <a:s r="1659">
                        <a:s>TB_diagnosed</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1660">
                        <a:s>'Diagnosed TB'</a:s>
                     </a:s>
                     <a:s r="1661"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1666">
                     <a:s>if </a:s>
                     <a:s r="1663">
                        <a:s>TB_presumptive</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1664">
                        <a:s>'Presumptive TB'</a:s>
                     </a:s>
                     <a:s r="1665"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1667" locator="513:3-516:3" xsi:type="List">
            <element localId="1662" locator="514:5-514:49" xsi:type="If">
               <condition localId="1659" locator="514:8-514:19" name="TB_diagnosed" xsi:type="ExpressionRef"/>
               <then localId="1660" locator="514:26-514:39" valueType="t:String" value="Diagnosed TB" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1661" locator="514:46-514:49" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1666" locator="515:5-515:53" xsi:type="If">
               <condition localId="1663" locator="515:8-515:21" name="TB_presumptive" xsi:type="ExpressionRef"/>
               <then localId="1664" locator="515:28-515:43" valueType="t:String" value="Presumptive TB" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1665" locator="515:50-515:53" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1683" locator="518:3-523:3" name="prep_product" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1683">
               <a:s>define prep_product:
  </a:s>
               <a:s r="1682">
                  <a:s>List&lt;</a:s>
                  <a:s r="1669">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1673">
                     <a:s>if </a:s>
                     <a:s r="1670">
                        <a:s>`PREP Product Oral`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1671">
                        <a:s>'PREP Product Oral'</a:s>
                     </a:s>
                     <a:s r="1672"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1677">
                     <a:s>if </a:s>
                     <a:s r="1674">
                        <a:s>`PREP Product long-acting device`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1675">
                        <a:s>'PREP Product long-acting device'</a:s>
                     </a:s>
                     <a:s r="1676"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1681">
                     <a:s>if </a:s>
                     <a:s r="1678">
                        <a:s>`PREP Product long-acting injectable`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1679">
                        <a:s>'PREP Product long-acting injectable'</a:s>
                     </a:s>
                     <a:s r="1680"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1682" locator="519:3-523:3" xsi:type="List">
            <element localId="1673" locator="520:5-520:61" xsi:type="If">
               <condition localId="1670" locator="520:8-520:26" name="PREP Product Oral" xsi:type="ExpressionRef"/>
               <then localId="1671" locator="520:33-520:51" valueType="t:String" value="PREP Product Oral" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1672" locator="520:58-520:61" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1677" locator="521:5-521:89" xsi:type="If">
               <condition localId="1674" locator="521:8-521:40" name="PREP Product long-acting device" xsi:type="ExpressionRef"/>
               <then localId="1675" locator="521:47-521:79" valueType="t:String" value="PREP Product long-acting device" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1676" locator="521:86-521:89" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1681" locator="522:5-522:97" xsi:type="If">
               <condition localId="1678" locator="522:8-522:44" name="PREP Product long-acting injectable" xsi:type="ExpressionRef"/>
               <then localId="1679" locator="522:51-522:87" valueType="t:String" value="PREP Product long-acting injectable" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1680" locator="522:94-522:97" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1698" locator="525:3-530:3" name="prep_experience" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1698">
               <a:s>define prep_experience:
  </a:s>
               <a:s r="1697">
                  <a:s>List&lt;</a:s>
                  <a:s r="1684">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1688">
                     <a:s>if </a:s>
                     <a:s r="1685">
                        <a:s>`PREP first time`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1686">
                        <a:s>'PREP first time'</a:s>
                     </a:s>
                     <a:s r="1687"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1692">
                     <a:s>if </a:s>
                     <a:s r="1689">
                        <a:s>`PREP Continuing user`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1690">
                        <a:s>'PREP Continuing user'</a:s>
                     </a:s>
                     <a:s r="1691"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1696">
                     <a:s>if </a:s>
                     <a:s r="1693">
                        <a:s>`PREP Restarting`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1694">
                        <a:s>'PREP Restarting'</a:s>
                     </a:s>
                     <a:s r="1695"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1697" locator="526:3-530:3" xsi:type="List">
            <element localId="1688" locator="527:5-527:57" xsi:type="If">
               <condition localId="1685" locator="527:8-527:24" name="PREP first time" xsi:type="ExpressionRef"/>
               <then localId="1686" locator="527:31-527:47" valueType="t:String" value="PREP first time" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1687" locator="527:54-527:57" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1692" locator="528:5-528:67" xsi:type="If">
               <condition localId="1689" locator="528:8-528:29" name="PREP Continuing user" xsi:type="ExpressionRef"/>
               <then localId="1690" locator="528:36-528:57" valueType="t:String" value="PREP Continuing user" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1691" locator="528:64-528:67" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1696" locator="529:5-529:57" xsi:type="If">
               <condition localId="1693" locator="529:8-529:24" name="PREP Restarting" xsi:type="ExpressionRef"/>
               <then localId="1694" locator="529:31-529:47" valueType="t:String" value="PREP Restarting" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1695" locator="529:54-529:57" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1713" locator="532:3-537:3" name="prep_dosing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1713">
               <a:s>define prep_dosing:
  </a:s>
               <a:s r="1712">
                  <a:s>List&lt;</a:s>
                  <a:s r="1699">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1703">
                     <a:s>if </a:s>
                     <a:s r="1700">
                        <a:s>`Daily_oral_PrEP`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1701">
                        <a:s>'Daily oral PrEP'</a:s>
                     </a:s>
                     <a:s r="1702"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1707">
                     <a:s>if </a:s>
                     <a:s r="1704">
                        <a:s>`Event_driven_PrEP`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1705">
                        <a:s>'Event driven PrEP'</a:s>
                     </a:s>
                     <a:s r="1706"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1711">
                     <a:s>if </a:s>
                     <a:s r="1708">
                        <a:s>`other_dosing_PrEP`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1709">
                        <a:s>'Other PrEP dosing type'</a:s>
                     </a:s>
                     <a:s r="1710"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1712" locator="533:3-537:3" xsi:type="List">
            <element localId="1703" locator="534:5-534:57" xsi:type="If">
               <condition localId="1700" locator="534:8-534:24" name="Daily_oral_PrEP" xsi:type="ExpressionRef"/>
               <then localId="1701" locator="534:31-534:47" valueType="t:String" value="Daily oral PrEP" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1702" locator="534:54-534:57" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1707" locator="535:5-535:61" xsi:type="If">
               <condition localId="1704" locator="535:8-535:26" name="Event_driven_PrEP" xsi:type="ExpressionRef"/>
               <then localId="1705" locator="535:33-535:51" valueType="t:String" value="Event driven PrEP" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1706" locator="535:58-535:61" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1711" locator="536:5-536:66" xsi:type="If">
               <condition localId="1708" locator="536:8-536:26" name="other_dosing_PrEP" xsi:type="ExpressionRef"/>
               <then localId="1709" locator="536:33-536:56" valueType="t:String" value="Other PrEP dosing type" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1710" locator="536:63-536:66" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1794" locator="614:1-625:7" name="GetDurationInDays" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1794">
               <a:s>//need to add Time to start ART (within 7, 30 or 90 days of diagnosis, as per country guidelines)
//need to add Disaggregation by time since diagnosis
  


/* 
* DAK has codes for HAART misspecified 
* ICD-10 Z92.2	Other prophylactic chemotherapy		
* LOINC &quot;54825-5	&quot;	On scheduled pain medication regimen in last 7 days
*
* Should discuss 
*/







/*
* Kenya EMR defined as HIV positive condition
* Will need to discuss if produce flags through conditions for concepts to use in indicator calculation such as HIV positive and On ART
* However, we have moved forward with a more prescriptive approach 
* Inevitably our approach requires that certain data elements be available
*/

/*
 * HIV Treatment during the measurement period
 * uses dosage and dispensation amount to estimate last day of medication
 * medication should be dispensed before end of measurement period
 * medication should last until after 28 days after the end of the measurement period
 * This takes into account lost to follow up
 */

/*
*define &quot;HIV Treatment during the measurement period&quot;:
*   [MedicationDispense] MD
*    where MD.status in { 'final', 'amended', 'corrected' }
*    and MD.medication ~ 'Antiretroviral'
*    and MD.whenHandedOver before end of &quot;Measurement Period&quot;
*    and (MD.whenHandedOver + MD.dosageInstruction[0].timing.repeat.duration.value * MedicationDispense.quantity.value) after (measurementPeriod.end - 28 days)
*/ 

/*
* Immunization defines HAART as
*  exists([MedicationAdministration] A where ExtractMedicationCode(A.medication) in IMMZc.&quot;ARV Drugs&quot; and A.status = 'in-progress')
* I believe this is the incorrect resource unless they mean to say that medication is given during a medical encounter
* would like to discuss 
*/ 

/** 
 * Patient Deceased During Measurement Period
 * Immunization defines this as true when is a boolean. This may have the effect of deleting a person from indicators in all calculations
 * Should intend to use when patient.deceased FHIR boolean was updated to TRUE if no other date is available
 * Kenya EMR example does not account for when deceased is just a boolean
 */


/*
define &quot;PREP Prescription Days&quot;:
  Sum(
    (
      collapse (
        [MedicationRequest] MR
          where MR.status = 'completed'
          and MR.intent = 'order'
          and MR.medication ~ HC.&quot;PrEP for HIV prevention&quot;
        return WComV2.&quot;Prescription Relevant Period&quot;( MR ) intersect &quot;Measurement Period&quot;
      )
    ) PREPUseInterval
      return days between start of PREPUseInterval and end of PREPUseInterval
  )
*/


define function GetDurationInDays(value FHIR.Duration): // returns Decimal:
    </a:s>
               <a:s r="1793">
                  <a:s r="1793">
                     <a:s>case </a:s>
                     <a:s r="1717">
                        <a:s r="1716">
                           <a:s r="1715">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1716">
                              <a:s>code</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1717">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1723">
                        <a:s>when </a:s>
                        <a:s r="1718">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1722">
                           <a:s r="1720">
                              <a:s r="1719">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1720">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1721"> * 365.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1730">
                        <a:s>when </a:s>
                        <a:s r="1724">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1729">
                           <a:s r="1727">
                              <a:s r="1726">
                                 <a:s r="1725">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1726">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1727">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1728"> * 30.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1737">
                        <a:s>when </a:s>
                        <a:s r="1731">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1736">
                           <a:s r="1734">
                              <a:s r="1733">
                                 <a:s r="1732">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1733">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1734">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1735"> * 7.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1742">
                        <a:s>when </a:s>
                        <a:s r="1738">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1741">
                           <a:s r="1740">
                              <a:s r="1739">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1740">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1741">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1749">
                        <a:s>when </a:s>
                        <a:s r="1743">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1748">
                           <a:s r="1746">
                              <a:s r="1745">
                                 <a:s r="1744">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1745">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1746">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1747"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1758">
                        <a:s>when </a:s>
                        <a:s r="1750">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1757">
                           <a:s r="1755">
                              <a:s r="1753">
                                 <a:s r="1752">
                                    <a:s r="1751">
                                       <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1752">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1753">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1754"> / 60.0</a:s>
                           </a:s>
                           <a:s r="1756"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1769">
                        <a:s>when </a:s>
                        <a:s r="1759">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1768">
                           <a:s r="1766">
                              <a:s r="1764">
                                 <a:s r="1762">
                                    <a:s r="1761">
                                       <a:s r="1760">
                                          <a:s>value</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1761">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1762">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="1763"> / 60.0</a:s>
                              </a:s>
                              <a:s r="1765"> / 60.0</a:s>
                           </a:s>
                           <a:s r="1767"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1782">
                        <a:s>when </a:s>
                        <a:s r="1770">
                           <a:s>'ms'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1781">
                           <a:s r="1779">
                              <a:s r="1777">
                                 <a:s r="1775">
                                    <a:s r="1773">
                                       <a:s r="1772">
                                          <a:s r="1771">
                                             <a:s>value</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1772">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1773">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1774"> / 60.0</a:s>
                                 </a:s>
                                 <a:s r="1776"> / 60.0</a:s>
                              </a:s>
                              <a:s r="1778"> / 24.0</a:s>
                           </a:s>
                           <a:s r="1780"> / 1000.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      else </a:s>
                     <a:s r="1792">
                        <a:s r="1783">Message(1000, true, </a:s>
                        <a:s r="1785">
                           <a:s>'Undefined'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1786">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1791">
                           <a:s r="1787">
                              <a:s>'Unsupported duration unit '</a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="1790">
                              <a:s r="1789">
                                 <a:s r="1788">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1789">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1790">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
    end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1793" locator="615:5-625:7" xsi:type="Case">
            <comparand localId="1717" locator="615:10-615:25" path="value" xsi:type="Property">
               <source localId="1716" locator="615:10-615:19" path="code" xsi:type="Property">
                  <source localId="1715" locator="615:10-615:14" name="value" xsi:type="OperandRef"/>
               </source>
            </comparand>
            <caseItem localId="1723" locator="616:7-616:39">
               <when localId="1718" locator="616:12-616:14" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="1722" locator="616:21-616:39" xsi:type="Multiply">
                  <operand name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1720" locator="616:21-616:31" path="value" xsi:type="Property">
                        <source localId="1719" locator="616:21-616:25" name="value" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand localId="1721" locator="616:35-616:39" valueType="t:Decimal" value="365.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1730" locator="617:7-617:45">
               <when localId="1724" locator="617:12-617:15" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="1729" locator="617:22-617:45" xsi:type="Multiply">
                  <operand localId="1727" locator="617:22-617:38" path="value" xsi:type="Property">
                     <source localId="1726" locator="617:22-617:32" path="value" xsi:type="Property">
                        <source localId="1725" locator="617:22-617:26" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="1728" locator="617:42-617:45" valueType="t:Decimal" value="30.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1737" locator="618:7-618:44">
               <when localId="1731" locator="618:12-618:15" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="1736" locator="618:22-618:44" xsi:type="Multiply">
                  <operand localId="1734" locator="618:22-618:38" path="value" xsi:type="Property">
                     <source localId="1733" locator="618:22-618:32" path="value" xsi:type="Property">
                        <source localId="1732" locator="618:22-618:26" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="1735" locator="618:42-618:44" valueType="t:Decimal" value="7.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1742" locator="619:7-619:37">
               <when localId="1738" locator="619:12-619:14" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="1741" locator="619:21-619:37" path="value" xsi:type="Property">
                  <source localId="1740" locator="619:21-619:31" path="value" xsi:type="Property">
                     <source localId="1739" locator="619:21-619:25" name="value" xsi:type="OperandRef"/>
                  </source>
               </then>
            </caseItem>
            <caseItem localId="1749" locator="620:7-620:44">
               <when localId="1743" locator="620:12-620:14" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="1748" locator="620:21-620:44" xsi:type="Divide">
                  <operand localId="1746" locator="620:21-620:37" path="value" xsi:type="Property">
                     <source localId="1745" locator="620:21-620:31" path="value" xsi:type="Property">
                        <source localId="1744" locator="620:21-620:25" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="1747" locator="620:41-620:44" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1758" locator="621:7-621:53">
               <when localId="1750" locator="621:12-621:16" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="1757" locator="621:23-621:53" xsi:type="Divide">
                  <operand localId="1755" locator="621:23-621:46" xsi:type="Divide">
                     <operand localId="1753" locator="621:23-621:39" path="value" xsi:type="Property">
                        <source localId="1752" locator="621:23-621:33" path="value" xsi:type="Property">
                           <source localId="1751" locator="621:23-621:27" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                     <operand localId="1754" locator="621:43-621:46" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1756" locator="621:50-621:53" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1769" locator="622:7-622:58">
               <when localId="1759" locator="622:12-622:14" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="1768" locator="622:21-622:58" xsi:type="Divide">
                  <operand localId="1766" locator="622:21-622:51" xsi:type="Divide">
                     <operand localId="1764" locator="622:21-622:44" xsi:type="Divide">
                        <operand localId="1762" locator="622:21-622:37" path="value" xsi:type="Property">
                           <source localId="1761" locator="622:21-622:31" path="value" xsi:type="Property">
                              <source localId="1760" locator="622:21-622:25" name="value" xsi:type="OperandRef"/>
                           </source>
                        </operand>
                        <operand localId="1763" locator="622:41-622:44" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1765" locator="622:48-622:51" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1767" locator="622:55-622:58" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1782" locator="623:7-623:68">
               <when localId="1770" locator="623:12-623:15" valueType="t:String" value="ms" xsi:type="Literal"/>
               <then localId="1781" locator="623:22-623:68" xsi:type="Divide">
                  <operand localId="1779" locator="623:22-623:59" xsi:type="Divide">
                     <operand localId="1777" locator="623:22-623:52" xsi:type="Divide">
                        <operand localId="1775" locator="623:22-623:45" xsi:type="Divide">
                           <operand localId="1773" locator="623:22-623:38" path="value" xsi:type="Property">
                              <source localId="1772" locator="623:22-623:32" path="value" xsi:type="Property">
                                 <source localId="1771" locator="623:22-623:26" name="value" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                           <operand localId="1774" locator="623:42-623:45" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                        </operand>
                        <operand localId="1776" locator="623:49-623:52" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1778" locator="623:56-623:59" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1780" locator="623:63-623:68" valueType="t:Decimal" value="1000.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <else xsi:type="ToDecimal">
               <operand localId="1792" locator="624:12-624:101" xsi:type="Message">
                  <source localId="1783" locator="624:20-624:23" valueType="t:Integer" value="1000" xsi:type="Literal"/>
                  <condition localId="1784" locator="624:26-624:29" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="1785" locator="624:32-624:42" valueType="t:String" value="Undefined" xsi:type="Literal"/>
                  <severity localId="1786" locator="624:45-624:51" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="1791" locator="624:54-624:100" xsi:type="Concatenate">
                     <operand localId="1787" locator="624:54-624:81" valueType="t:String" value="Unsupported duration unit " xsi:type="Literal"/>
                     <operand localId="1790" locator="624:85-624:100" path="value" xsi:type="Property">
                        <source localId="1789" locator="624:85-624:94" path="code" xsi:type="Property">
                           <source localId="1788" locator="624:85-624:89" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                  </message>
               </operand>
            </else>
         </expression>
         <operand name="value">
            <operandTypeSpecifier localId="1714" locator="614:41-614:53" name="fhir:Duration" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1824" locator="627:1-636:11" name="Prescription Relevant Period" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1824">
               <a:s>define function &quot;Prescription Relevant Period&quot;(prescription FHIR.MedicationRequest):
  </a:s>
               <a:s r="1823">
                  <a:s r="1823">
                     <a:s>if </a:s>
                     <a:s r="1807">
                        <a:s>(
    </a:s>
                        <a:s r="1807">
                           <a:s r="1802">
                              <a:s r="1798">
                                 <a:s r="1797">
                                    <a:s r="1796">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1797">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1801">
                                 <a:s r="1800">
                                    <a:s r="1799">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1800">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="1806">
                              <a:s r="1805">
                                 <a:s r="1804">
                                    <a:s r="1803">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1804">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1805">
                                    <a:s>expectedSupplyDuration</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s>
  then </a:s>
                     <a:s r="1821">
                        <a:s>Interval[
    </a:s>
                        <a:s r="1810">
                           <a:s>date from </a:s>
                           <a:s r="1809">
                              <a:s r="1808">
                                 <a:s>prescription</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1809">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1820">
                           <a:s r="1813">
                              <a:s>date from </a:s>
                              <a:s r="1812">
                                 <a:s r="1811">
                                    <a:s>prescription</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1812">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="1819">
                              <a:s>System.Quantity{ </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="1817">
                                    <a:s>GetDurationInDays(</a:s>
                                    <a:s r="1816">
                                       <a:s r="1815">
                                          <a:s r="1814">
                                             <a:s>prescription</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1815">
                                             <a:s>dispenseRequest</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1816">
                                          <a:s>expectedSupplyDuration</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="1818">
                                    <a:s>'days'</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  ]</a:s>
                     </a:s>
                     <a:s r="1822">
  else null</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1823" locator="628:3-636:11" xsi:type="If">
            <condition localId="1807" locator="628:6-631:3" xsi:type="And">
               <operand localId="1802" locator="629:5-629:84" xsi:type="And">
                  <operand localId="1798" locator="629:5-629:39" xsi:type="Not">
                     <operand locator="629:5-629:39" xsi:type="IsNull">
                        <operand localId="1797" locator="629:5-629:27" path="authoredOn" xsi:type="Property">
                           <source localId="1796" locator="629:5-629:16" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1801" locator="629:45-629:84" xsi:type="Not">
                     <operand locator="629:45-629:84" xsi:type="IsNull">
                        <operand localId="1800" locator="629:45-629:72" path="dispenseRequest" xsi:type="Property">
                           <source localId="1799" locator="629:45-629:56" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </operand>
               <operand localId="1806" locator="630:11-630:73" xsi:type="Not">
                  <operand locator="630:11-630:73" xsi:type="IsNull">
                     <operand localId="1805" locator="630:11-630:61" path="expectedSupplyDuration" xsi:type="Property">
                        <source localId="1804" locator="630:11-630:38" path="dispenseRequest" xsi:type="Property">
                           <source localId="1803" locator="630:11-630:22" name="prescription" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                  </operand>
               </operand>
            </condition>
            <then localId="1821" locator="632:8-635:3" lowClosed="true" highClosed="true" xsi:type="Interval">
               <low localId="1810" locator="633:5-633:37" xsi:type="DateFrom">
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1809" locator="633:15-633:37" path="authoredOn" xsi:type="Property">
                        <source localId="1808" locator="633:15-633:26" name="prescription" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </low>
               <high localId="1820" locator="634:5-634:150" xsi:type="Add">
                  <operand localId="1813" locator="634:5-634:37" xsi:type="DateFrom">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1812" locator="634:15-634:37" path="authoredOn" xsi:type="Property">
                           <source localId="1811" locator="634:15-634:26" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1819" locator="634:41-634:150" classType="t:Quantity" xsi:type="Instance">
                     <element name="value">
                        <value localId="1817" locator="634:65-634:134" name="GetDurationInDays" xsi:type="FunctionRef">
                           <operand localId="1816" locator="634:83-634:133" path="expectedSupplyDuration" xsi:type="Property">
                              <source localId="1815" locator="634:83-634:110" path="dispenseRequest" xsi:type="Property">
                                 <source localId="1814" locator="634:83-634:94" name="prescription" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                        </value>
                     </element>
                     <element name="unit">
                        <value localId="1818" locator="634:143-634:148" valueType="t:String" value="days" xsi:type="Literal"/>
                     </element>
                  </operand>
               </high>
            </then>
            <else xsi:type="As">
               <operand localId="1822" locator="636:8-636:11" xsi:type="Null"/>
               <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand name="prescription">
            <operandTypeSpecifier localId="1795" locator="627:61-627:82" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2059" locator="639:1-663:5" name="ToDaily" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2059">
               <a:s>//System.Integer
define function ToDaily(frequency System.Integer, period System.Quantity):
  </a:s>
               <a:s r="2058">
                  <a:s r="2058">
                     <a:s>case </a:s>
                     <a:s r="1828">
                        <a:s r="1827">
                           <a:s>period</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1828">
                           <a:s>unit</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1836">
                        <a:s>when </a:s>
                        <a:s r="1829">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1835">
                           <a:s r="1830">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="1834">
                              <a:s>(</a:s>
                              <a:s r="1834">
                                 <a:s r="1831">24.0 / </a:s>
                                 <a:s r="1833">
                                    <a:s r="1832">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1833">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1846">
                        <a:s>when </a:s>
                        <a:s r="1837">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1845">
                           <a:s r="1843">
                              <a:s r="1838">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1842">
                                 <a:s>(</a:s>
                                 <a:s r="1842">
                                    <a:s r="1839">24.0 / </a:s>
                                    <a:s r="1841">
                                       <a:s r="1840">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1841">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1844"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1858">
                        <a:s>when </a:s>
                        <a:s r="1847">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1857">
                           <a:s r="1855">
                              <a:s r="1853">
                                 <a:s r="1848">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="1852">
                                    <a:s>(</a:s>
                                    <a:s r="1852">
                                       <a:s r="1849">24.0 / </a:s>
                                       <a:s r="1851">
                                          <a:s r="1850">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1851">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1854"> * 60</a:s>
                           </a:s>
                           <a:s r="1856"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1868">
                        <a:s>when </a:s>
                        <a:s r="1859">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1867">
                           <a:s r="1865">
                              <a:s r="1860">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1864">
                                 <a:s>(</a:s>
                                 <a:s r="1864">
                                    <a:s r="1861">24.0 / </a:s>
                                    <a:s r="1863">
                                       <a:s r="1862">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1863">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1866"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1880">
                        <a:s>when </a:s>
                        <a:s r="1869">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1879">
                           <a:s r="1875">
                              <a:s r="1870">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1874">
                                 <a:s>(</a:s>
                                 <a:s r="1874">
                                    <a:s r="1871">24.0 / </a:s>
                                    <a:s r="1873">
                                       <a:s r="1872">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1873">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1878">
                              <a:s>(</a:s>
                              <a:s r="1878">
                                 <a:s r="1876">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1892">
                        <a:s>when </a:s>
                        <a:s r="1881">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1891">
                           <a:s r="1887">
                              <a:s r="1882">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1886">
                                 <a:s>(</a:s>
                                 <a:s r="1886">
                                    <a:s r="1883">24.0 / </a:s>
                                    <a:s r="1885">
                                       <a:s r="1884">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1885">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1890">
                              <a:s>(</a:s>
                              <a:s r="1890">
                                 <a:s r="1888">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="1904">
                        <a:s>when </a:s>
                        <a:s r="1893">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1903">
                           <a:s r="1899">
                              <a:s r="1894">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1898">
                                 <a:s>(</a:s>
                                 <a:s r="1898">
                                    <a:s r="1895">24.0 / </a:s>
                                    <a:s r="1897">
                                       <a:s r="1896">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1897">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1902">
                              <a:s>(</a:s>
                              <a:s r="1902">
                                 <a:s r="1900">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
    </a:s>
                     <a:s r="1912">
                        <a:s>when </a:s>
                        <a:s r="1905">
                           <a:s>'hour'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1911">
                           <a:s r="1906">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="1910">
                              <a:s>(</a:s>
                              <a:s r="1910">
                                 <a:s r="1907">24.0 / </a:s>
                                 <a:s r="1909">
                                    <a:s r="1908">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1909">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1922">
                        <a:s>when </a:s>
                        <a:s r="1913">
                           <a:s>'minute'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1921">
                           <a:s r="1919">
                              <a:s r="1914">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1918">
                                 <a:s>(</a:s>
                                 <a:s r="1918">
                                    <a:s r="1915">24.0 / </a:s>
                                    <a:s r="1917">
                                       <a:s r="1916">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1917">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1920"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1934">
                        <a:s>when </a:s>
                        <a:s r="1923">
                           <a:s>'second'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1933">
                           <a:s r="1931">
                              <a:s r="1929">
                                 <a:s r="1924">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="1928">
                                    <a:s>(</a:s>
                                    <a:s r="1928">
                                       <a:s r="1925">24.0 / </a:s>
                                       <a:s r="1927">
                                          <a:s r="1926">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1927">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1930"> * 60</a:s>
                           </a:s>
                           <a:s r="1932"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1944">
                        <a:s>when </a:s>
                        <a:s r="1935">
                           <a:s>'day'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1943">
                           <a:s r="1941">
                              <a:s r="1936">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1940">
                                 <a:s>(</a:s>
                                 <a:s r="1940">
                                    <a:s r="1937">24.0 / </a:s>
                                    <a:s r="1939">
                                       <a:s r="1938">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1939">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1942"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1956">
                        <a:s>when </a:s>
                        <a:s r="1945">
                           <a:s>'week'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1955">
                           <a:s r="1951">
                              <a:s r="1946">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1950">
                                 <a:s>(</a:s>
                                 <a:s r="1950">
                                    <a:s r="1947">24.0 / </a:s>
                                    <a:s r="1949">
                                       <a:s r="1948">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1949">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1954">
                              <a:s>(</a:s>
                              <a:s r="1954">
                                 <a:s r="1952">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1968">
                        <a:s>when </a:s>
                        <a:s r="1957">
                           <a:s>'month'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1967">
                           <a:s r="1963">
                              <a:s r="1958">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1962">
                                 <a:s>(</a:s>
                                 <a:s r="1962">
                                    <a:s r="1959">24.0 / </a:s>
                                    <a:s r="1961">
                                       <a:s r="1960">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1961">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1966">
                              <a:s>(</a:s>
                              <a:s r="1966">
                                 <a:s r="1964">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="1980">
                        <a:s>when </a:s>
                        <a:s r="1969">
                           <a:s>'year'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1979">
                           <a:s r="1975">
                              <a:s r="1970">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1974">
                                 <a:s>(</a:s>
                                 <a:s r="1974">
                                    <a:s r="1971">24.0 / </a:s>
                                    <a:s r="1973">
                                       <a:s r="1972">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1973">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1978">
                              <a:s>(</a:s>
                              <a:s r="1978">
                                 <a:s r="1976">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
    </a:s>
                     <a:s r="1988">
                        <a:s>when </a:s>
                        <a:s r="1981">
                           <a:s>'hours'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1987">
                           <a:s r="1982">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="1986">
                              <a:s>(</a:s>
                              <a:s r="1986">
                                 <a:s r="1983">24.0 / </a:s>
                                 <a:s r="1985">
                                    <a:s r="1984">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1985">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1998">
                        <a:s>when </a:s>
                        <a:s r="1989">
                           <a:s>'minutes'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1997">
                           <a:s r="1995">
                              <a:s r="1990">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1994">
                                 <a:s>(</a:s>
                                 <a:s r="1994">
                                    <a:s r="1991">24.0 / </a:s>
                                    <a:s r="1993">
                                       <a:s r="1992">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1993">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1996"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2010">
                        <a:s>when </a:s>
                        <a:s r="1999">
                           <a:s>'seconds'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2009">
                           <a:s r="2007">
                              <a:s r="2005">
                                 <a:s r="2000">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="2004">
                                    <a:s>(</a:s>
                                    <a:s r="2004">
                                       <a:s r="2001">24.0 / </a:s>
                                       <a:s r="2003">
                                          <a:s r="2002">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2003">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2006"> * 60</a:s>
                           </a:s>
                           <a:s r="2008"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2020">
                        <a:s>when </a:s>
                        <a:s r="2011">
                           <a:s>'days'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2019">
                           <a:s r="2017">
                              <a:s r="2012">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2016">
                                 <a:s>(</a:s>
                                 <a:s r="2016">
                                    <a:s r="2013">24.0 / </a:s>
                                    <a:s r="2015">
                                       <a:s r="2014">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2015">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="2018"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2032">
                        <a:s>when </a:s>
                        <a:s r="2021">
                           <a:s>'weeks'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2031">
                           <a:s r="2027">
                              <a:s r="2022">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2026">
                                 <a:s>(</a:s>
                                 <a:s r="2026">
                                    <a:s r="2023">24.0 / </a:s>
                                    <a:s r="2025">
                                       <a:s r="2024">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2025">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2030">
                              <a:s>(</a:s>
                              <a:s r="2030">
                                 <a:s r="2028">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2044">
                        <a:s>when </a:s>
                        <a:s r="2033">
                           <a:s>'months'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2043">
                           <a:s r="2039">
                              <a:s r="2034">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2038">
                                 <a:s>(</a:s>
                                 <a:s r="2038">
                                    <a:s r="2035">24.0 / </a:s>
                                    <a:s r="2037">
                                       <a:s r="2036">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2037">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2042">
                              <a:s>(</a:s>
                              <a:s r="2042">
                                 <a:s r="2040">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="2056">
                        <a:s>when </a:s>
                        <a:s r="2045">
                           <a:s>'years'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2055">
                           <a:s r="2051">
                              <a:s r="2046">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2050">
                                 <a:s>(</a:s>
                                 <a:s r="2050">
                                    <a:s r="2047">24.0 / </a:s>
                                    <a:s r="2049">
                                       <a:s r="2048">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2049">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2054">
                              <a:s>(</a:s>
                              <a:s r="2054">
                                 <a:s r="2052">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s r="2057"> /* assuming 365 days in year */
    else null
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2058" locator="640:3-663:5" xsi:type="Case">
            <comparand localId="1828" locator="640:8-640:18" path="unit" xsi:type="Property">
               <source localId="1827" locator="640:8-640:13" name="period" xsi:type="OperandRef"/>
            </comparand>
            <caseItem localId="1836" locator="641:5-641:51">
               <when localId="1829" locator="641:10-641:12" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="1835" locator="641:19-641:51" xsi:type="Multiply">
                  <operand xsi:type="ToDecimal">
                     <operand localId="1830" locator="641:19-641:27" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="1834" locator="641:31-641:51" xsi:type="Divide">
                     <operand localId="1831" locator="641:32-641:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="1833" locator="641:39-641:50" path="value" xsi:type="Property">
                        <source localId="1832" locator="641:39-641:44" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1846" locator="642:5-642:58">
               <when localId="1837" locator="642:10-642:14" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="1845" locator="642:21-642:58" xsi:type="Multiply">
                  <operand localId="1843" locator="642:21-642:53" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1838" locator="642:21-642:29" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1842" locator="642:33-642:53" xsi:type="Divide">
                        <operand localId="1839" locator="642:34-642:37" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1841" locator="642:41-642:52" path="value" xsi:type="Property">
                           <source localId="1840" locator="642:41-642:46" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1844" locator="642:57-642:58" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1858" locator="643:5-643:61">
               <when localId="1847" locator="643:10-643:12" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="1857" locator="643:19-643:61" xsi:type="Multiply">
                  <operand localId="1855" locator="643:19-643:56" xsi:type="Multiply">
                     <operand localId="1853" locator="643:19-643:51" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="1848" locator="643:19-643:27" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="1852" locator="643:31-643:51" xsi:type="Divide">
                           <operand localId="1849" locator="643:32-643:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="1851" locator="643:39-643:50" path="value" xsi:type="Property">
                              <source localId="1850" locator="643:39-643:44" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="1854" locator="643:55-643:56" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1856" locator="643:60-643:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1868" locator="644:5-644:56">
               <when localId="1859" locator="644:10-644:12" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="1867" locator="644:19-644:56" xsi:type="Divide">
                  <operand localId="1865" locator="644:19-644:51" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1860" locator="644:19-644:27" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1864" locator="644:31-644:51" xsi:type="Divide">
                        <operand localId="1861" locator="644:32-644:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1863" locator="644:39-644:50" path="value" xsi:type="Property">
                           <source localId="1862" locator="644:39-644:44" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1866" locator="644:55-644:56" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1880" locator="645:5-645:63">
               <when localId="1869" locator="645:10-645:13" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="1879" locator="645:20-645:63" xsi:type="Divide">
                  <operand localId="1875" locator="645:20-645:52" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1870" locator="645:20-645:28" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1874" locator="645:32-645:52" xsi:type="Divide">
                        <operand localId="1871" locator="645:33-645:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1873" locator="645:40-645:51" path="value" xsi:type="Property">
                           <source localId="1872" locator="645:40-645:45" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1878" locator="645:56-645:63" xsi:type="Multiply">
                        <operand localId="1876" locator="645:57-645:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1877" locator="645:62" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1892" locator="646:5-646:64">
               <when localId="1881" locator="646:10-646:13" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="1891" locator="646:20-646:64" xsi:type="Divide">
                  <operand localId="1887" locator="646:20-646:52" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1882" locator="646:20-646:28" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1886" locator="646:32-646:52" xsi:type="Divide">
                        <operand localId="1883" locator="646:33-646:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1885" locator="646:40-646:51" path="value" xsi:type="Property">
                           <source localId="1884" locator="646:40-646:45" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1890" locator="646:56-646:64" xsi:type="Multiply">
                        <operand localId="1888" locator="646:57-646:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1889" locator="646:62-646:63" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1904" locator="647:5-647:64">
               <when localId="1893" locator="647:10-647:12" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="1903" locator="647:19-647:64" xsi:type="Divide">
                  <operand localId="1899" locator="647:19-647:51" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1894" locator="647:19-647:27" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1898" locator="647:31-647:51" xsi:type="Divide">
                        <operand localId="1895" locator="647:32-647:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1897" locator="647:39-647:50" path="value" xsi:type="Property">
                           <source localId="1896" locator="647:39-647:44" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1902" locator="647:55-647:64" xsi:type="Multiply">
                        <operand localId="1900" locator="647:56-647:57" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1901" locator="647:61-647:63" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1912" locator="648:5-648:54">
               <when localId="1905" locator="648:10-648:15" valueType="t:String" value="hour" xsi:type="Literal"/>
               <then localId="1911" locator="648:22-648:54" xsi:type="Multiply">
                  <operand xsi:type="ToDecimal">
                     <operand localId="1906" locator="648:22-648:30" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="1910" locator="648:34-648:54" xsi:type="Divide">
                     <operand localId="1907" locator="648:35-648:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="1909" locator="648:42-648:53" path="value" xsi:type="Property">
                        <source localId="1908" locator="648:42-648:47" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1922" locator="649:5-649:61">
               <when localId="1913" locator="649:10-649:17" valueType="t:String" value="minute" xsi:type="Literal"/>
               <then localId="1921" locator="649:24-649:61" xsi:type="Multiply">
                  <operand localId="1919" locator="649:24-649:56" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1914" locator="649:24-649:32" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1918" locator="649:36-649:56" xsi:type="Divide">
                        <operand localId="1915" locator="649:37-649:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1917" locator="649:44-649:55" path="value" xsi:type="Property">
                           <source localId="1916" locator="649:44-649:49" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1920" locator="649:60-649:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1934" locator="650:5-650:66">
               <when localId="1923" locator="650:10-650:17" valueType="t:String" value="second" xsi:type="Literal"/>
               <then localId="1933" locator="650:24-650:66" xsi:type="Multiply">
                  <operand localId="1931" locator="650:24-650:61" xsi:type="Multiply">
                     <operand localId="1929" locator="650:24-650:56" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="1924" locator="650:24-650:32" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="1928" locator="650:36-650:56" xsi:type="Divide">
                           <operand localId="1925" locator="650:37-650:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="1927" locator="650:44-650:55" path="value" xsi:type="Property">
                              <source localId="1926" locator="650:44-650:49" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="1930" locator="650:60-650:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1932" locator="650:65-650:66" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1944" locator="651:5-651:58">
               <when localId="1935" locator="651:10-651:14" valueType="t:String" value="day" xsi:type="Literal"/>
               <then localId="1943" locator="651:21-651:58" xsi:type="Divide">
                  <operand localId="1941" locator="651:21-651:53" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1936" locator="651:21-651:29" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1940" locator="651:33-651:53" xsi:type="Divide">
                        <operand localId="1937" locator="651:34-651:37" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1939" locator="651:41-651:52" path="value" xsi:type="Property">
                           <source localId="1938" locator="651:41-651:46" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1942" locator="651:57-651:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1956" locator="652:5-652:65">
               <when localId="1945" locator="652:10-652:15" valueType="t:String" value="week" xsi:type="Literal"/>
               <then localId="1955" locator="652:22-652:65" xsi:type="Divide">
                  <operand localId="1951" locator="652:22-652:54" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1946" locator="652:22-652:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1950" locator="652:34-652:54" xsi:type="Divide">
                        <operand localId="1947" locator="652:35-652:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1949" locator="652:42-652:53" path="value" xsi:type="Property">
                           <source localId="1948" locator="652:42-652:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1954" locator="652:58-652:65" xsi:type="Multiply">
                        <operand localId="1952" locator="652:59-652:60" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1953" locator="652:64" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1968" locator="653:5-653:67">
               <when localId="1957" locator="653:10-653:16" valueType="t:String" value="month" xsi:type="Literal"/>
               <then localId="1967" locator="653:23-653:67" xsi:type="Divide">
                  <operand localId="1963" locator="653:23-653:55" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1958" locator="653:23-653:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1962" locator="653:35-653:55" xsi:type="Divide">
                        <operand localId="1959" locator="653:36-653:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1961" locator="653:43-653:54" path="value" xsi:type="Property">
                           <source localId="1960" locator="653:43-653:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1966" locator="653:59-653:67" xsi:type="Multiply">
                        <operand localId="1964" locator="653:60-653:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1965" locator="653:65-653:66" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1980" locator="654:5-654:67">
               <when localId="1969" locator="654:10-654:15" valueType="t:String" value="year" xsi:type="Literal"/>
               <then localId="1979" locator="654:22-654:67" xsi:type="Divide">
                  <operand localId="1975" locator="654:22-654:54" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1970" locator="654:22-654:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1974" locator="654:34-654:54" xsi:type="Divide">
                        <operand localId="1971" locator="654:35-654:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1973" locator="654:42-654:53" path="value" xsi:type="Property">
                           <source localId="1972" locator="654:42-654:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1978" locator="654:58-654:67" xsi:type="Multiply">
                        <operand localId="1976" locator="654:59-654:60" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1977" locator="654:64-654:66" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1988" locator="655:5-655:55">
               <when localId="1981" locator="655:10-655:16" valueType="t:String" value="hours" xsi:type="Literal"/>
               <then localId="1987" locator="655:23-655:55" xsi:type="Multiply">
                  <operand xsi:type="ToDecimal">
                     <operand localId="1982" locator="655:23-655:31" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="1986" locator="655:35-655:55" xsi:type="Divide">
                     <operand localId="1983" locator="655:36-655:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="1985" locator="655:43-655:54" path="value" xsi:type="Property">
                        <source localId="1984" locator="655:43-655:48" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1998" locator="656:5-656:62">
               <when localId="1989" locator="656:10-656:18" valueType="t:String" value="minutes" xsi:type="Literal"/>
               <then localId="1997" locator="656:25-656:62" xsi:type="Multiply">
                  <operand localId="1995" locator="656:25-656:57" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1990" locator="656:25-656:33" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1994" locator="656:37-656:57" xsi:type="Divide">
                        <operand localId="1991" locator="656:38-656:41" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1993" locator="656:45-656:56" path="value" xsi:type="Property">
                           <source localId="1992" locator="656:45-656:50" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1996" locator="656:61-656:62" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2010" locator="657:5-657:67">
               <when localId="1999" locator="657:10-657:18" valueType="t:String" value="seconds" xsi:type="Literal"/>
               <then localId="2009" locator="657:25-657:67" xsi:type="Multiply">
                  <operand localId="2007" locator="657:25-657:62" xsi:type="Multiply">
                     <operand localId="2005" locator="657:25-657:57" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="2000" locator="657:25-657:33" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="2004" locator="657:37-657:57" xsi:type="Divide">
                           <operand localId="2001" locator="657:38-657:41" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="2003" locator="657:45-657:56" path="value" xsi:type="Property">
                              <source localId="2002" locator="657:45-657:50" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="2006" locator="657:61-657:62" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2008" locator="657:66-657:67" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2020" locator="658:5-658:59">
               <when localId="2011" locator="658:10-658:15" valueType="t:String" value="days" xsi:type="Literal"/>
               <then localId="2019" locator="658:22-658:59" xsi:type="Divide">
                  <operand localId="2017" locator="658:22-658:54" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2012" locator="658:22-658:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2016" locator="658:34-658:54" xsi:type="Divide">
                        <operand localId="2013" locator="658:35-658:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2015" locator="658:42-658:53" path="value" xsi:type="Property">
                           <source localId="2014" locator="658:42-658:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2018" locator="658:58-658:59" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2032" locator="659:5-659:66">
               <when localId="2021" locator="659:10-659:16" valueType="t:String" value="weeks" xsi:type="Literal"/>
               <then localId="2031" locator="659:23-659:66" xsi:type="Divide">
                  <operand localId="2027" locator="659:23-659:55" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2022" locator="659:23-659:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2026" locator="659:35-659:55" xsi:type="Divide">
                        <operand localId="2023" locator="659:36-659:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2025" locator="659:43-659:54" path="value" xsi:type="Property">
                           <source localId="2024" locator="659:43-659:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2030" locator="659:59-659:66" xsi:type="Multiply">
                        <operand localId="2028" locator="659:60-659:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2029" locator="659:65" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2044" locator="660:5-660:68">
               <when localId="2033" locator="660:10-660:17" valueType="t:String" value="months" xsi:type="Literal"/>
               <then localId="2043" locator="660:24-660:68" xsi:type="Divide">
                  <operand localId="2039" locator="660:24-660:56" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2034" locator="660:24-660:32" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2038" locator="660:36-660:56" xsi:type="Divide">
                        <operand localId="2035" locator="660:37-660:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2037" locator="660:44-660:55" path="value" xsi:type="Property">
                           <source localId="2036" locator="660:44-660:49" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2042" locator="660:60-660:68" xsi:type="Multiply">
                        <operand localId="2040" locator="660:61-660:62" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2041" locator="660:66-660:67" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2056" locator="661:5-661:68">
               <when localId="2045" locator="661:10-661:16" valueType="t:String" value="years" xsi:type="Literal"/>
               <then localId="2055" locator="661:23-661:68" xsi:type="Divide">
                  <operand localId="2051" locator="661:23-661:55" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2046" locator="661:23-661:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2050" locator="661:35-661:55" xsi:type="Divide">
                        <operand localId="2047" locator="661:36-661:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2049" locator="661:43-661:54" path="value" xsi:type="Property">
                           <source localId="2048" locator="661:43-661:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2054" locator="661:59-661:68" xsi:type="Multiply">
                        <operand localId="2052" locator="661:60-661:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2053" locator="661:65-661:67" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="2057" locator="662:10-662:13" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="frequency">
            <operandTypeSpecifier localId="1825" locator="639:35-639:48" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="period">
            <operandTypeSpecifier localId="1826" locator="639:58-639:72" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2072" locator="665:3-668:1" name="HasEnd" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2072">
               <a:s>define function &quot;HasEnd&quot;(period Interval&lt;DateTime> ):
  </a:s>
               <a:s r="2071">
                  <a:s r="2071">
                     <a:s>not </a:s>
                     <a:s r="2070">
                        <a:s>(</a:s>
                        <a:s r="2070">
                           <a:s r="2064">
                              <a:s r="2063">
                                 <a:s>end of </a:s>
                                 <a:s r="2062">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is null</a:s>
                           </a:s>
                           <a:s>
    or </a:s>
                           <a:s r="2069">
                              <a:s r="2066">
                                 <a:s>end of </a:s>
                                 <a:s r="2065">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="2068">
                                 <a:s>maximum </a:s>
                                 <a:s r="2067">
                                    <a:s>DateTime</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2071" locator="666:3-668:1" xsi:type="Not">
            <operand localId="2070" locator="666:7-668:1" xsi:type="Or">
               <operand localId="2064" locator="666:8-666:28" xsi:type="IsNull">
                  <operand localId="2063" locator="666:8-666:20" xsi:type="End">
                     <operand localId="2062" locator="666:15-666:20" name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand localId="2069" locator="667:8-667:39" xsi:type="Equal">
                  <operand localId="2066" locator="667:8-667:20" xsi:type="End">
                     <operand localId="2065" locator="667:15-667:20" name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="2068" locator="667:24-667:39" valueType="t:DateTime" xsi:type="MaxValue"/>
               </operand>
            </operand>
         </expression>
         <operand name="period">
            <operandTypeSpecifier localId="2061" locator="665:35-665:52" xsi:type="IntervalTypeSpecifier">
               <pointType localId="2060" locator="665:44-665:51" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="2189" locator="670:3-700:64" name="MedicationRequestPeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2189">
               <a:s>define function MedicationRequestPeriod(Request &quot;MedicationRequest&quot;):
  </a:s>
               <a:s r="2188">
                  <a:s r="2188">
                     <a:s>
                        <a:s r="2075">
                           <a:s r="2074">
                              <a:s>
                                 <a:s>Request</a:s>
                              </a:s>
                           </a:s>
                           <a:s> R</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      </a:s>
                        <a:s r="2079">
                           <a:s>dosage: </a:s>
                           <a:s r="2078">
                              <a:s>singleton from </a:s>
                              <a:s r="2077">
                                 <a:s r="2076">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2077">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2083">
                           <a:s>doseAndRate: </a:s>
                           <a:s r="2082">
                              <a:s>singleton from </a:s>
                              <a:s r="2081">
                                 <a:s r="2080">
                                    <a:s>dosage</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2081">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2088">
                           <a:s>doseRange: </a:s>
                           <a:s r="2087">
                              <a:s r="2085">
                                 <a:s r="2084">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2085">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="2086">
                                 <a:s>Range</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2093">
                           <a:s>doseQuantity: </a:s>
                           <a:s r="2092">
                              <a:s r="2090">
                                 <a:s r="2089">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2090">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="2091">
                                 <a:s>SimpleQuantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2098">
                           <a:s>dose: </a:s>
                           <a:s r="2097">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2095">
                                 <a:s>end of </a:s>
                                 <a:s r="2094">
                                    <a:s>doseRange</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2096">
                                 <a:s>doseQuantity</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2101">
                           <a:s>timing: </a:s>
                           <a:s r="2100">
                              <a:s r="2099">
                                 <a:s>dosage</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2100">
                                 <a:s>timing</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2109">
                           <a:s>frequency: </a:s>
                           <a:s r="2108">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2104">
                                 <a:s r="2103">
                                    <a:s r="2102">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2103">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2104">
                                    <a:s>frequencyMax</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2107">
                                 <a:s r="2106">
                                    <a:s r="2105">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2106">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2107">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2118">
                           <a:s>period: </a:s>
                           <a:s r="2117">
                              <a:s>System.Quantity { </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="2112">
                                    <a:s r="2111">
                                       <a:s r="2110">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2111">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2112">
                                       <a:s>period</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="2116">
                                    <a:s r="2115">
                                       <a:s r="2114">
                                          <a:s r="2113">
                                             <a:s>timing</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2114">
                                             <a:s>repeat</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2115">
                                          <a:s>periodUnit</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2116">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2130">
                           <a:s>dosesPerDay: </a:s>
                           <a:s r="2129">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2123">
                                 <a:s>ToDaily(</a:s>
                                 <a:s r="2121">
                                    <a:s r="2119">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2121">
                                       <a:s>ToInteger(</a:s>
                                       <a:s r="2120">
                                          <a:s>frequency</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2122">
                                    <a:s>period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2127">
                                 <a:s>Count(</a:s>
                                 <a:s r="2126">
                                    <a:s r="2125">
                                       <a:s r="2124">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2125">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2126">
                                       <a:s>timeOfDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="2128">, 1.0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2136">
                           <a:s>boundsPeriod: </a:s>
                           <a:s r="2135">
                              <a:s r="2133">
                                 <a:s r="2132">
                                    <a:s r="2131">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2132">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2133">
                                    <a:s>bounds</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="2134">
                                 <a:s>Period</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2140">
                           <a:s>daysSupply: </a:s>
                           <a:s r="2139">
                              <a:s r="2138">
                                 <a:s r="2137">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2138">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2139">
                                 <a:s>expectedSupplyDuration</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2144">
                           <a:s>quantity: </a:s>
                           <a:s r="2143">
                              <a:s r="2142">
                                 <a:s r="2141">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2142">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2143">
                                 <a:s>quantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2150">
                           <a:s>refills: </a:s>
                           <a:s r="2149">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2147">
                                 <a:s r="2146">
                                    <a:s r="2145">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2146">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2147">
                                    <a:s>numberOfRepeatsAllowed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2148">, 0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2160">
                           <a:s>startDate:
        </a:s>
                           <a:s r="2159">
                              <a:s>Coalesce(
          </a:s>
                              <a:s r="2152">
                                 <a:s>start of </a:s>
                                 <a:s r="2151">
                                    <a:s>boundsPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
          </a:s>
                              <a:s r="2156">
                                 <a:s>start of </a:s>
                                 <a:s r="2155">
                                    <a:s r="2154">
                                       <a:s r="2153">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2154">
                                          <a:s>dispenseRequest</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2155">
                                       <a:s>validityPeriod</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
          </a:s>
                              <a:s r="2158">
                                 <a:s r="2157">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2158">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2187">
                        <a:s>return
      </a:s>
                        <a:s r="2186">
                           <a:s>if </a:s>
                           <a:s r="2162">
                              <a:s>HasEnd(</a:s>
                              <a:s r="2161">
                                 <a:s>boundsPeriod</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> then
        </a:s>
                           <a:s r="2166">
                              <a:s>Interval[</a:s>
                              <a:s r="2163">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2165">
                                 <a:s>end of </a:s>
                                 <a:s r="2164">
                                    <a:s>boundsPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                           <a:s>
      else
        </a:s>
                           <a:s r="2185">
                              <a:s>
                                 <a:s r="2178">
                                    <a:s r="2177">
                                       <a:s>(
          </a:s>
                                       <a:s r="2177">
                                          <a:s r="2173">
                                             <a:s>Coalesce(</a:s>
                                             <a:s r="2167">
                                                <a:s>daysSupply</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="2172">
                                                <a:s r="2168">
                                                   <a:s>quantity</a:s>
                                                </a:s>
                                                <a:s> / </a:s>
                                                <a:s r="2171">
                                                   <a:s>(</a:s>
                                                   <a:s r="2171">
                                                      <a:s r="2169">
                                                         <a:s>dose</a:s>
                                                      </a:s>
                                                      <a:s> * </a:s>
                                                      <a:s r="2170">
                                                         <a:s>dosesPerDay</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>)</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>
            * </a:s>
                                          <a:s r="2176">
                                             <a:s>(</a:s>
                                             <a:s r="2176">
                                                <a:s r="2174">1 + </a:s>
                                                <a:s r="2175">
                                                   <a:s>refills</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        )</a:s>
                                    </a:s>
                                    <a:s> durationInDays</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
          </a:s>
                              <a:s r="2184">
                                 <a:s>return </a:s>
                                 <a:s r="2183">
                                    <a:s>Interval[</a:s>
                                    <a:s r="2179">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="2182">
                                       <a:s r="2180">
                                          <a:s>startDate</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="2181">
                                          <a:s>durationInDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2188" locator="671:3-700:64" xsi:type="Query">
            <source localId="2075" locator="671:3-671:11" alias="R">
               <expression localId="2074" locator="671:3-671:9" name="Request" xsi:type="OperandRef"/>
            </source>
            <let localId="2079" locator="673:7-673:48" identifier="dosage">
               <expression localId="2078" locator="673:15-673:48" xsi:type="SingletonFrom">
                  <operand localId="2077" locator="673:30-673:48" path="dosageInstruction" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="2083" locator="674:7-674:52" identifier="doseAndRate">
               <expression localId="2082" locator="674:20-674:52" xsi:type="SingletonFrom">
                  <operand localId="2081" locator="674:35-674:52" path="doseAndRate" xsi:type="Property">
                     <source localId="2080" locator="674:35-674:40" name="dosage" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="2088" locator="675:7-675:42" identifier="doseRange">
               <expression localId="2087" locator="675:18-675:42" strict="false" xsi:type="As">
                  <operand localId="2085" locator="675:18-675:33" path="dose" xsi:type="Property">
                     <source localId="2084" locator="675:18-675:28" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="2086" locator="675:38-675:42" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="2093" locator="676:7-676:54" identifier="doseQuantity">
               <expression localId="2092" locator="676:21-676:54" strict="false" xsi:type="As">
                  <operand localId="2090" locator="676:21-676:36" path="dose" xsi:type="Property">
                     <source localId="2089" locator="676:21-676:31" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="2091" locator="676:41-676:54" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="2098" locator="677:7-677:52" identifier="dose">
               <expression localId="2097" locator="677:13-677:52" xsi:type="Coalesce">
                  <operand localId="2095" locator="677:22-677:37" xsi:type="End">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2094" locator="677:29-677:37" name="doseRange" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
                  <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2096" locator="677:40-677:51" name="doseQuantity" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="2101" locator="678:7-678:27" identifier="timing">
               <expression localId="2100" locator="678:15-678:27" path="timing" xsi:type="Property">
                  <source localId="2099" locator="678:15-678:20" name="dosage" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="2109" locator="679:7-679:78" identifier="frequency">
               <expression localId="2108" locator="679:18-679:78" xsi:type="Coalesce">
                  <operand localId="2104" locator="679:27-679:52" path="frequencyMax" xsi:type="Property">
                     <source localId="2103" locator="679:27-679:39" path="repeat" xsi:type="Property">
                        <source localId="2102" locator="679:27-679:32" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <operand localId="2107" locator="679:55-679:77" path="frequency" xsi:type="Property">
                     <source localId="2106" locator="679:55-679:67" path="repeat" xsi:type="Property">
                        <source localId="2105" locator="679:55-679:60" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="2118" locator="680:7-680:99" identifier="period">
               <expression localId="2117" locator="680:15-680:99" classType="t:Quantity" xsi:type="Instance">
                  <element name="value">
                     <value name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2112" locator="680:40-680:59" path="period" xsi:type="Property">
                           <source localId="2111" locator="680:40-680:52" path="repeat" xsi:type="Property">
                              <source localId="2110" locator="680:40-680:45" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </operand>
                     </value>
                  </element>
                  <element name="unit">
                     <value localId="2116" locator="680:68-680:97" path="value" xsi:type="Property">
                        <source localId="2115" locator="680:68-680:91" path="periodUnit" xsi:type="Property">
                           <source localId="2114" locator="680:68-680:80" path="repeat" xsi:type="Property">
                              <source localId="2113" locator="680:68-680:73" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </value>
                  </element>
               </expression>
            </let>
            <let localId="2130" locator="681:7-681:115" identifier="dosesPerDay">
               <expression localId="2129" locator="681:20-681:115" xsi:type="Coalesce">
                  <operand localId="2123" locator="681:29-681:77" name="ToDaily" xsi:type="FunctionRef">
                     <operand localId="2121" locator="681:37-681:68" name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2120" locator="681:59-681:67" name="frequency" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="2122" locator="681:71-681:76" name="period" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2127" locator="681:80-681:109" xsi:type="Count">
                        <source localId="2126" locator="681:86-681:108" path="timeOfDay" xsi:type="Property">
                           <source localId="2125" locator="681:86-681:98" path="repeat" xsi:type="Property">
                              <source localId="2124" locator="681:86-681:91" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </operand>
                  </operand>
                  <operand localId="2128" locator="681:112-681:114" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="2136" locator="682:7-682:50" identifier="boundsPeriod">
               <expression localId="2135" locator="682:21-682:50" strict="false" xsi:type="As">
                  <operand localId="2133" locator="682:21-682:40" path="bounds" xsi:type="Property">
                     <source localId="2132" locator="682:21-682:33" path="repeat" xsi:type="Property">
                        <source localId="2131" locator="682:21-682:26" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="2134" locator="682:45-682:50" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="2140" locator="683:7-683:58" identifier="daysSupply">
               <expression localId="2139" locator="683:19-683:58" path="expectedSupplyDuration" xsi:type="Property">
                  <source localId="2138" locator="683:19-683:35" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="2144" locator="684:7-684:42" identifier="quantity">
               <expression localId="2143" locator="684:17-684:42" path="quantity" xsi:type="Property">
                  <source localId="2142" locator="684:17-684:33" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="2150" locator="685:7-685:68" identifier="refills">
               <expression localId="2149" locator="685:16-685:68" xsi:type="Coalesce">
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2147" locator="685:25-685:64" path="numberOfRepeatsAllowed" xsi:type="Property">
                        <source localId="2146" locator="685:25-685:41" path="dispenseRequest" scope="R" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="2148" locator="685:67" valueType="t:Integer" value="0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="2160" locator="686:7-691:9" identifier="startDate">
               <expression localId="2159" locator="687:9-691:9" xsi:type="Coalesce">
                  <operand localId="2152" locator="688:11-688:31" xsi:type="Start">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2151" locator="688:20-688:31" name="boundsPeriod" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
                  <operand localId="2156" locator="689:11-689:51" xsi:type="Start">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2155" locator="689:20-689:51" path="validityPeriod" xsi:type="Property">
                           <source localId="2154" locator="689:20-689:36" path="dispenseRequest" scope="R" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2158" locator="690:11-690:22" path="authoredOn" scope="R" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <return localId="2187" locator="692:5-700:64">
               <expression localId="2186" locator="693:7-700:64" xsi:type="If">
                  <condition localId="2162" locator="693:10-693:29" name="HasEnd" xsi:type="FunctionRef">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2161" locator="693:17-693:28" name="boundsPeriod" xsi:type="QueryLetRef"/>
                     </operand>
                  </condition>
                  <then localId="2166" locator="694:9-694:48" lowClosed="true" highClosed="true" xsi:type="Interval">
                     <low localId="2163" locator="694:18-694:26" name="startDate" xsi:type="QueryLetRef"/>
                     <high localId="2165" locator="694:29-694:47" xsi:type="End">
                        <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2164" locator="694:36-694:47" name="boundsPeriod" xsi:type="QueryLetRef"/>
                        </operand>
                     </high>
                  </then>
                  <else localId="2185" locator="696:9-700:64" xsi:type="Query">
                     <source localId="2178" locator="696:9-699:24" alias="durationInDays">
                        <expression localId="2177" locator="696:9-699:9" xsi:type="Multiply">
                           <operand localId="2173" locator="697:11-697:63" xsi:type="Coalesce">
                              <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2167" locator="697:20-697:29" name="daysSupply" xsi:type="QueryLetRef"/>
                              </operand>
                              <operand localId="2172" locator="697:32-697:62" xsi:type="Divide">
                                 <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2168" locator="697:32-697:39" name="quantity" xsi:type="QueryLetRef"/>
                                 </operand>
                                 <operand localId="2171" locator="697:43-697:62" xsi:type="Multiply">
                                    <operand localId="2169" locator="697:44-697:47" name="dose" xsi:type="QueryLetRef"/>
                                    <operand xsi:type="ToQuantity">
                                       <operand localId="2170" locator="697:51-697:61" name="dosesPerDay" xsi:type="QueryLetRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </operand>
                           <operand xsi:type="ToQuantity">
                              <operand localId="2176" locator="698:15-698:27" xsi:type="Add">
                                 <operand localId="2174" locator="698:16" valueType="t:Integer" value="1" xsi:type="Literal"/>
                                 <operand localId="2175" locator="698:20-698:26" name="refills" xsi:type="QueryLetRef"/>
                              </operand>
                           </operand>
                        </expression>
                     </source>
                     <return localId="2184" locator="700:11-700:64">
                        <expression localId="2183" locator="700:18-700:64" lowClosed="true" highClosed="true" xsi:type="Interval">
                           <low localId="2179" locator="700:27-700:35" name="startDate" xsi:type="QueryLetRef"/>
                           <high localId="2182" locator="700:38-700:63" xsi:type="Add">
                              <operand localId="2180" locator="700:38-700:46" name="startDate" xsi:type="QueryLetRef"/>
                              <operand localId="2181" locator="700:50-700:63" name="durationInDays" xsi:type="AliasRef"/>
                           </high>
                        </expression>
                     </return>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="Request">
            <operandTypeSpecifier localId="2073" locator="670:51-670:69" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2313" locator="703:1-727:4" name="DosesPerDay" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2313">
               <a:s>define function &quot;DosesPerDay&quot;(frequency Code):
	/*Calculates the cumulative dose per day for each prescription*/
	</a:s>
               <a:s r="2312">
                  <a:s r="2312">
                     <a:s>case
		</a:s>
                     <a:s r="2196">
                        <a:s>when </a:s>
                        <a:s r="2194">
                           <a:s r="2191">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2193">
                              <a:s r="2192">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2193">
                                 <a:s>&quot;Once daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2195"> then 1.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2202">
                        <a:s>when </a:s>
                        <a:s r="2200">
                           <a:s r="2197">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2199">
                              <a:s r="2198">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2199">
                                 <a:s>&quot;Twice a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2201"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2208">
                        <a:s>when </a:s>
                        <a:s r="2206">
                           <a:s r="2203">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2205">
                              <a:s r="2204">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2205">
                                 <a:s>&quot;Three times daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2207"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2214">
                        <a:s>when </a:s>
                        <a:s r="2212">
                           <a:s r="2209">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2211">
                              <a:s r="2210">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2211">
                                 <a:s>&quot;Four times daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2213"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2220">
                        <a:s>when </a:s>
                        <a:s r="2218">
                           <a:s r="2215">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2217">
                              <a:s r="2216">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2217">
                                 <a:s>&quot;Every twenty four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2219"> then 1.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2226">
                        <a:s>when </a:s>
                        <a:s r="2224">
                           <a:s r="2221">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2223">
                              <a:s r="2222">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2223">
                                 <a:s>&quot;Every twelve hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2225"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2232">
                        <a:s>when </a:s>
                        <a:s r="2230">
                           <a:s r="2227">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2229">
                              <a:s r="2228">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2229">
                                 <a:s>&quot;Every thirty six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2231"> then 0.67</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2238">
                        <a:s>when </a:s>
                        <a:s r="2236">
                           <a:s r="2233">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2235">
                              <a:s r="2234">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2235">
                                 <a:s>&quot;Every eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2237"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2244">
                        <a:s>when </a:s>
                        <a:s r="2242">
                           <a:s r="2239">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2241">
                              <a:s r="2240">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2241">
                                 <a:s>&quot;Every four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2243"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2250">
                        <a:s>when </a:s>
                        <a:s r="2248">
                           <a:s r="2245">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2247">
                              <a:s r="2246">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2247">
                                 <a:s>&quot;Every six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2249"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2256">
                        <a:s>when </a:s>
                        <a:s r="2254">
                           <a:s r="2251">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2253">
                              <a:s r="2252">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2253">
                                 <a:s>&quot;Every seventy two hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2255"> then 0.34</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2262">
                        <a:s>when </a:s>
                        <a:s r="2260">
                           <a:s r="2257">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2259">
                              <a:s r="2258">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2259">
                                 <a:s>&quot;Every forty eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2261"> then 0.5</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2268">
                        <a:s>when </a:s>
                        <a:s r="2266">
                           <a:s r="2263">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2265">
                              <a:s r="2264">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2265">
                                 <a:s>&quot;Every eight to twelve hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2267"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2274">
                        <a:s>when </a:s>
                        <a:s r="2272">
                           <a:s r="2269">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2271">
                              <a:s r="2270">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2271">
                                 <a:s>&quot;Every six to eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2273"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2280">
                        <a:s>when </a:s>
                        <a:s r="2278">
                           <a:s r="2275">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2277">
                              <a:s r="2276">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2277">
                                 <a:s>&quot;Every three to four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2279"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2286">
                        <a:s>when </a:s>
                        <a:s r="2284">
                           <a:s r="2281">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2283">
                              <a:s r="2282">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2283">
                                 <a:s>&quot;Every three to six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2285"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2292">
                        <a:s>when </a:s>
                        <a:s r="2290">
                           <a:s r="2287">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2289">
                              <a:s r="2288">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2289">
                                 <a:s>&quot;Every two to four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2291"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2298">
                        <a:s>when </a:s>
                        <a:s r="2296">
                           <a:s r="2293">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2295">
                              <a:s r="2294">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2295">
                                 <a:s>&quot;One to four times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2297"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2304">
                        <a:s>when </a:s>
                        <a:s r="2302">
                           <a:s r="2299">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2301">
                              <a:s r="2300">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2301">
                                 <a:s>&quot;One to three times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2303"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2310">
                        <a:s>when </a:s>
                        <a:s r="2308">
                           <a:s r="2305">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2307">
                              <a:s r="2306">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2307">
                                 <a:s>&quot;One to two times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2309"> then 2.0</a:s>
                     </a:s>
                     <a:s r="2311">
		else null 
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2312" locator="705:2-727:4" xsi:type="Case">
            <caseItem localId="2196" locator="706:3-706:62">
               <when localId="2194" locator="706:8-706:53" xsi:type="Equivalent">
                  <operand localId="2191" locator="706:8-706:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2193" locator="706:20-706:53" name="Once daily (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2195" locator="706:60-706:62" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2202" locator="707:3-707:63">
               <when localId="2200" locator="707:8-707:54" xsi:type="Equivalent">
                  <operand localId="2197" locator="707:8-707:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2199" locator="707:20-707:54" name="Twice a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2201" locator="707:61-707:63" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2208" locator="708:3-708:69">
               <when localId="2206" locator="708:8-708:60" xsi:type="Equivalent">
                  <operand localId="2203" locator="708:8-708:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2205" locator="708:20-708:60" name="Three times daily (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2207" locator="708:67-708:69" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2214" locator="709:3-709:68">
               <when localId="2212" locator="709:8-709:59" xsi:type="Equivalent">
                  <operand localId="2209" locator="709:8-709:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2211" locator="709:20-709:59" name="Four times daily (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2213" locator="709:66-709:68" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2220" locator="710:3-710:75">
               <when localId="2218" locator="710:8-710:66" xsi:type="Equivalent">
                  <operand localId="2215" locator="710:8-710:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2217" locator="710:20-710:66" name="Every twenty four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2219" locator="710:73-710:75" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2226" locator="711:3-711:70">
               <when localId="2224" locator="711:8-711:61" xsi:type="Equivalent">
                  <operand localId="2221" locator="711:8-711:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2223" locator="711:20-711:61" name="Every twelve hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2225" locator="711:68-711:70" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2232" locator="712:3-712:75">
               <when localId="2230" locator="712:8-712:65" xsi:type="Equivalent">
                  <operand localId="2227" locator="712:8-712:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2229" locator="712:20-712:65" name="Every thirty six hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2231" locator="712:72-712:75" valueType="t:Decimal" value="0.67" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2238" locator="713:3-713:69">
               <when localId="2236" locator="713:8-713:60" xsi:type="Equivalent">
                  <operand localId="2233" locator="713:8-713:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2235" locator="713:20-713:60" name="Every eight hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2237" locator="713:67-713:69" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2244" locator="714:3-714:68">
               <when localId="2242" locator="714:8-714:59" xsi:type="Equivalent">
                  <operand localId="2239" locator="714:8-714:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2241" locator="714:20-714:59" name="Every four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2243" locator="714:66-714:68" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2250" locator="715:3-715:67">
               <when localId="2248" locator="715:8-715:58" xsi:type="Equivalent">
                  <operand localId="2245" locator="715:8-715:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2247" locator="715:20-715:58" name="Every six hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2249" locator="715:65-715:67" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2256" locator="716:3-716:76">
               <when localId="2254" locator="716:8-716:66" xsi:type="Equivalent">
                  <operand localId="2251" locator="716:8-716:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2253" locator="716:20-716:66" name="Every seventy two hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2255" locator="716:73-716:76" valueType="t:Decimal" value="0.34" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2262" locator="717:3-717:75">
               <when localId="2260" locator="717:8-717:66" xsi:type="Equivalent">
                  <operand localId="2257" locator="717:8-717:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2259" locator="717:20-717:66" name="Every forty eight hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2261" locator="717:73-717:75" valueType="t:Decimal" value="0.5" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2268" locator="718:3-718:79">
               <when localId="2266" locator="718:8-718:70" xsi:type="Equivalent">
                  <operand localId="2263" locator="718:8-718:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2265" locator="718:20-718:70" name="Every eight to twelve hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2267" locator="718:77-718:79" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2274" locator="719:3-719:76">
               <when localId="2272" locator="719:8-719:67" xsi:type="Equivalent">
                  <operand localId="2269" locator="719:8-719:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2271" locator="719:20-719:67" name="Every six to eight hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2273" locator="719:74-719:76" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2280" locator="720:3-720:77">
               <when localId="2278" locator="720:8-720:68" xsi:type="Equivalent">
                  <operand localId="2275" locator="720:8-720:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2277" locator="720:20-720:68" name="Every three to four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2279" locator="720:75-720:77" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2286" locator="721:3-721:76">
               <when localId="2284" locator="721:8-721:67" xsi:type="Equivalent">
                  <operand localId="2281" locator="721:8-721:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2283" locator="721:20-721:67" name="Every three to six hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2285" locator="721:74-721:76" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2292" locator="722:3-722:75">
               <when localId="2290" locator="722:8-722:66" xsi:type="Equivalent">
                  <operand localId="2287" locator="722:8-722:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2289" locator="722:20-722:66" name="Every two to four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2291" locator="722:73-722:75" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2298" locator="723:3-723:75">
               <when localId="2296" locator="723:8-723:66" xsi:type="Equivalent">
                  <operand localId="2293" locator="723:8-723:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2295" locator="723:20-723:66" name="One to four times a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2297" locator="723:73-723:75" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2304" locator="724:3-724:76">
               <when localId="2302" locator="724:8-724:67" xsi:type="Equivalent">
                  <operand localId="2299" locator="724:8-724:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2301" locator="724:20-724:67" name="One to three times a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2303" locator="724:74-724:76" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2310" locator="725:3-725:74">
               <when localId="2308" locator="725:8-725:65" xsi:type="Equivalent">
                  <operand localId="2305" locator="725:8-725:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2307" locator="725:20-725:65" name="One to two times a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2309" locator="725:72-725:74" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="2311" locator="726:8-726:11" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="frequency">
            <operandTypeSpecifier localId="2190" locator="703:41-703:44" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2342" locator="733:1-740:69" name="methadone_prescribed at date" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2342">
               <a:s>//define function &quot;GetMedicationDailyDose&quot;(dosage Quantity, dosesPerDay Decimal):
  //dosage * Quantity { value: dosesPerDay, unit: '/d' }


define &quot;methadone_prescribed at date&quot;:
</a:s>
               <a:s r="2341">
                  <a:s>
                     <a:s r="2315">
                        <a:s r="2314">
                           <a:s r="2314">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2340">
                     <a:s>where </a:s>
                     <a:s r="2340">
                        <a:s r="2335">
                           <a:s r="2330">
                              <a:s r="2324">
                                 <a:s r="2319">
                                    <a:s r="2317">
                                       <a:s r="2316">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2317">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="2318">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        and </a:s>
                                 <a:s r="2323">
                                    <a:s r="2321">
                                       <a:s r="2320">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2321">
                                          <a:s>intent</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="2322">
                                       <a:s>'order'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="2329">
                                 <a:s r="2326">
                                    <a:s r="2325">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2326">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="2328">
                                    <a:s r="2327">
                                       <a:s>HCC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2328">
                                       <a:s>&quot;methadone&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        //and &quot;GetMedicationDailyDose&quot;(MR.dosageInstruction, &quot;DosesPerDay&quot;(singleton from MR.dosageInstruction.timing.repeat.frequencyMax)) >= 60 'mg/d'
        and </a:s>
                           <a:s r="2334">
                              <a:s r="2332">
                                 <a:s>MedicationRequestPeriod(</a:s>
                                 <a:s r="2331">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="2334"> starts before </a:s>
                              <a:s r="2333">
                                 <a:s>&quot;Measurement Date&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="2339">
                           <a:s r="2337">
                              <a:s>MedicationRequestPeriod(</a:s>
                              <a:s r="2336">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="2339"> ends after </a:s>
                           <a:s r="2338">
                              <a:s>&quot;Measurement Date&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2341" locator="734:1-740:69" xsi:type="Query">
            <source localId="2315" locator="734:1-734:22" alias="MR">
               <expression localId="2314" locator="734:1-734:19" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="2340" locator="735:9-740:69" xsi:type="And">
               <operand localId="2335" locator="735:15-739:72" xsi:type="And">
                  <operand localId="2330" locator="735:15-737:43" xsi:type="And">
                     <operand localId="2324" locator="735:15-736:31" xsi:type="And">
                        <operand localId="2319" locator="735:15-735:37" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2317" locator="735:15-735:23" path="status" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand localId="2318" locator="735:27-735:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                        </operand>
                        <operand localId="2323" locator="736:13-736:31" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2321" locator="736:13-736:21" path="intent" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand localId="2322" locator="736:25-736:31" valueType="t:String" value="order" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="2329" locator="737:13-737:43" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="2326" locator="737:13-737:25" path="medication" scope="MR" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2328" locator="737:29-737:43" name="methadone" libraryName="HCC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2334" locator="739:13-739:72" xsi:type="Before">
                     <operand locator="739:41-739:46" xsi:type="Start">
                        <operand localId="2332" locator="739:13-739:39" name="MedicationRequestPeriod" xsi:type="FunctionRef">
                           <operand localId="2331" locator="739:37-739:38" name="MR" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="2333" locator="739:55-739:72" name="Measurement Date" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2339" locator="740:13-740:69" xsi:type="After">
                  <operand locator="740:41-740:44" xsi:type="End">
                     <operand localId="2337" locator="740:13-740:39" name="MedicationRequestPeriod" xsi:type="FunctionRef">
                        <operand localId="2336" locator="740:37-740:38" name="MR" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDateTime">
                     <operand localId="2338" locator="740:52-740:69" name="Measurement Date" xsi:type="ParameterRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2356" locator="742:1-745:60" name="VMMC_done" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2356">
               <a:s>define &quot;VMMC_done&quot;:
</a:s>
               <a:s r="2355">
                  <a:s>
                     <a:s r="2344">
                        <a:s r="2343">
                           <a:s r="2343">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2354">
                     <a:s>where </a:s>
                     <a:s r="2354">
                        <a:s r="2348">
                           <a:s r="2346">
                              <a:s r="2345">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2346">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="2347">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  and </a:s>
                        <a:s r="2353">
                           <a:s r="2350">
                              <a:s r="2349">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2350">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2352">
                              <a:s r="2351">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2352">
                                 <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2355" locator="743:1-745:60" xsi:type="Query">
            <source localId="2344" locator="743:1-743:13" alias="P">
               <expression localId="2343" locator="743:1-743:11" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
            </source>
            <where localId="2354" locator="744:3-745:60" xsi:type="And">
               <operand localId="2348" locator="744:9-744:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2346" locator="744:9-744:16" path="status" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="2347" locator="744:20-744:30" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="2353" locator="745:7-745:60" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2350" locator="745:7-745:12" path="code" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2352" locator="745:16-745:60" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2409" locator="747:1-756:31" name="VMMC_adverse_event" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2409">
               <a:s>define &quot;VMMC_adverse_event&quot;:
</a:s>
               <a:s r="2408">
                  <a:s>
                     <a:s r="2358">
                        <a:s r="2357">
                           <a:s r="2357">
                              <a:s>[AdverseEvent]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> AE</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="2403">
                     <a:s>with </a:s>
                     <a:s r="2360">
                        <a:s r="2359">
                           <a:s r="2359">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="2402">
                        <a:s r="2396">
                           <a:s r="2388">
                              <a:s r="2382">
                                 <a:s r="2376">
                                    <a:s r="2370">
                                       <a:s r="2365">
                                          <a:s r="2363">
                                             <a:s r="2362">
                                                <a:s r="2361">
                                                   <a:s>AE</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="2362">
                                                   <a:s>suspectEntity</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2363">
                                                <a:s>instance</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2365">
                                             <a:s>references(</a:s>
                                             <a:s r="2364">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="2369">
                                          <a:s r="2367">
                                             <a:s r="2366">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2367">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="2368">
                                             <a:s>'completed'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
      and </a:s>
                                    <a:s r="2375">
                                       <a:s r="2372">
                                          <a:s r="2371">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2372">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~  </a:s>
                                       <a:s r="2374">
                                          <a:s r="2373">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2374">
                                             <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2381">
                                    <a:s r="2378">
                                       <a:s r="2377">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2378">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="2381"> after </a:s>
                                    <a:s r="2380">
                                       <a:s>start of </a:s>
                                       <a:s r="2379">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      and </a:s>
                              <a:s r="2387">
                                 <a:s r="2384">
                                    <a:s r="2383">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2384">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="2387"> before </a:s>
                                 <a:s r="2386">
                                    <a:s>end of </a:s>
                                    <a:s r="2385">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="2395">
                              <a:s r="2390">
                                 <a:s r="2389">
                                    <a:s>AE</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2390">
                                    <a:s>date</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> &lt;= </a:s>
                              <a:s r="2394">
                                 <a:s>(</a:s>
                                 <a:s r="2394">
                                    <a:s r="2392">
                                       <a:s r="2391">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2392">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="2393">
                                       <a:s>30 days</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="2401">
                           <a:s r="2398">
                              <a:s r="2397">
                                 <a:s>AE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2398">
                                 <a:s>date</a:s>
                              </a:s>
                           </a:s>
                           <a:s> >= </a:s>
                           <a:s r="2400">
                              <a:s>(</a:s>
                              <a:s r="2400">
                                 <a:s r="2399">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2400">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2407">
                     <a:s>where </a:s>
                     <a:s r="2407">
                        <a:s r="2405">
                           <a:s r="2404">
                              <a:s>AE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2405">
                              <a:s>actuality</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="2406">
                           <a:s>'actual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2408" locator="748:1-756:31" xsi:type="Query">
            <source localId="2358" locator="748:1-748:17" alias="AE">
               <expression localId="2357" locator="748:1-748:14" dataType="fhir:AdverseEvent" templateId="http://hl7.org/fhir/StructureDefinition/AdverseEvent" xsi:type="Retrieve"/>
            </source>
            <relationship localId="2403" locator="749:3-755:34" alias="P" xsi:type="With">
               <expression localId="2359" locator="749:8-749:18" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
               <suchThat localId="2402" locator="750:17-755:34" xsi:type="And">
                  <operand localId="2396" locator="750:17-754:44" xsi:type="And">
                     <operand localId="2388" locator="750:17-753:56" xsi:type="And">
                        <operand localId="2382" locator="750:17-752:57" xsi:type="And">
                           <operand localId="2376" locator="750:17-751:65" xsi:type="And">
                              <operand localId="2370" locator="750:17-750:82" xsi:type="And">
                                 <operand localId="2365" locator="750:17-750:55" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                    <operand localId="2363" locator="750:17-750:41" xsi:type="Query">
                                       <source alias="$this">
                                          <expression localId="2362" locator="750:17-750:32" path="suspectEntity" scope="AE" xsi:type="Property"/>
                                       </source>
                                       <where xsi:type="Not">
                                          <operand xsi:type="IsNull">
                                             <operand path="instance" xsi:type="Property">
                                                <source name="$this" xsi:type="AliasRef"/>
                                             </operand>
                                          </operand>
                                       </where>
                                       <return distinct="false">
                                          <expression path="instance" xsi:type="Property">
                                             <source name="$this" xsi:type="AliasRef"/>
                                          </expression>
                                       </return>
                                    </operand>
                                    <operand localId="2364" locator="750:54" name="P" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand localId="2369" locator="750:61-750:82" xsi:type="Equal">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="2367" locator="750:61-750:68" path="status" scope="P" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="2368" locator="750:72-750:82" valueType="t:String" value="completed" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="2375" locator="751:11-751:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2372" locator="751:11-751:16" path="code" scope="P" xsi:type="Property"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="2374" locator="751:21-751:65" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="2381" locator="752:11-752:57" xsi:type="After">
                              <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:dateTime" xsi:type="As">
                                    <operand localId="2378" locator="752:11-752:21" path="performed" scope="P" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="2380" locator="752:29-752:57" xsi:type="Start">
                                    <operand localId="2379" locator="752:38-752:57" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2387" locator="753:11-753:56" xsi:type="Before">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2384" locator="753:11-753:21" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="2386" locator="753:30-753:56" xsi:type="End">
                                 <operand localId="2385" locator="753:37-753:56" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2395" locator="754:11-754:44" xsi:type="LessOrEqual">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2390" locator="754:11-754:17" path="date" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand localId="2394" locator="754:22-754:44" xsi:type="Add">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2392" locator="754:23-754:33" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand localId="2393" locator="754:37-754:43" value="30" unit="days" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2401" locator="755:11-755:34" xsi:type="GreaterOrEqual">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2398" locator="755:11-755:17" path="date" scope="AE" xsi:type="Property"/>
                     </operand>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="2400" locator="755:22-755:34" path="performed" scope="P" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="2407" locator="756:3-756:31" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2405" locator="756:9-756:20" path="actuality" scope="AE" xsi:type="Property"/>
               </operand>
               <operand localId="2406" locator="756:24-756:31" valueType="t:String" value="actual" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="2569" locator="758:1-774:7" name="VMMC_adverse_event_type" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2569">
               <a:s>define &quot;VMMC_adverse_event_type&quot;:
    </a:s>
               <a:s r="2568">
                  <a:s>case 
        </a:s>
                  <a:s r="2421">
                     <a:s>when </a:s>
                     <a:s r="2418">
                        <a:s>exists</a:s>
                        <a:s r="2417">
                           <a:s>(</a:s>
                           <a:s r="2417">
                              <a:s>
                                 <a:s r="2411">
                                    <a:s r="2410">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2416">
                                 <a:s>where </a:s>
                                 <a:s r="2416">
                                    <a:s r="2413">
                                       <a:s r="2412">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2413">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2415">
                                       <a:s r="2414">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2415">
                                          <a:s>&quot;Abnormal pain&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2420">
                        <a:s r="2419">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2420">
                           <a:s>&quot;Abnormal pain&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2433">
                     <a:s>when </a:s>
                     <a:s r="2430">
                        <a:s>exists</a:s>
                        <a:s r="2429">
                           <a:s>(</a:s>
                           <a:s r="2429">
                              <a:s>
                                 <a:s r="2423">
                                    <a:s r="2422">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2428">
                                 <a:s>where </a:s>
                                 <a:s r="2428">
                                    <a:s r="2425">
                                       <a:s r="2424">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2425">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2427">
                                       <a:s r="2426">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2427">
                                          <a:s>&quot;Anaesthesia-related effects&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2432">
                        <a:s r="2431">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2432">
                           <a:s>&quot;Anaesthesia-related effects&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2445">
                     <a:s>when </a:s>
                     <a:s r="2442">
                        <a:s>exists</a:s>
                        <a:s r="2441">
                           <a:s>(</a:s>
                           <a:s r="2441">
                              <a:s>
                                 <a:s r="2435">
                                    <a:s r="2434">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2440">
                                 <a:s>where </a:s>
                                 <a:s r="2440">
                                    <a:s r="2437">
                                       <a:s r="2436">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2437">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2439">
                                       <a:s r="2438">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2439">
                                          <a:s>&quot;Damage to the penis&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2444">
                        <a:s r="2443">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2444">
                           <a:s>&quot;Damage to the penis&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2457">
                     <a:s>when </a:s>
                     <a:s r="2454">
                        <a:s>exists</a:s>
                        <a:s r="2453">
                           <a:s>(</a:s>
                           <a:s r="2453">
                              <a:s>
                                 <a:s r="2447">
                                    <a:s r="2446">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2452">
                                 <a:s>where </a:s>
                                 <a:s r="2452">
                                    <a:s r="2449">
                                       <a:s r="2448">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2449">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2451">
                                       <a:s r="2450">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2451">
                                          <a:s>&quot;Difficulty urinating&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2456">
                        <a:s r="2455">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2456">
                           <a:s>&quot;Difficulty urinating&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2469">
                     <a:s>when </a:s>
                     <a:s r="2466">
                        <a:s>exists</a:s>
                        <a:s r="2465">
                           <a:s>(</a:s>
                           <a:s r="2465">
                              <a:s>
                                 <a:s r="2459">
                                    <a:s r="2458">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2464">
                                 <a:s>where </a:s>
                                 <a:s r="2464">
                                    <a:s r="2461">
                                       <a:s r="2460">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2461">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2463">
                                       <a:s r="2462">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2463">
                                          <a:s>&quot;Excessive bleeding&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2468">
                        <a:s r="2467">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2468">
                           <a:s>&quot;Excessive bleeding&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2481">
                     <a:s>when </a:s>
                     <a:s r="2478">
                        <a:s>exists</a:s>
                        <a:s r="2477">
                           <a:s>(</a:s>
                           <a:s r="2477">
                              <a:s>
                                 <a:s r="2471">
                                    <a:s r="2470">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2476">
                                 <a:s>where </a:s>
                                 <a:s r="2476">
                                    <a:s r="2473">
                                       <a:s r="2472">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2473">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2475">
                                       <a:s r="2474">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2475">
                                          <a:s>&quot;Excessive skin removal&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2480">
                        <a:s r="2479">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2480">
                           <a:s>&quot;Excessive skin removal&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2493">
                     <a:s>when </a:s>
                     <a:s r="2490">
                        <a:s>exists</a:s>
                        <a:s r="2489">
                           <a:s>(</a:s>
                           <a:s r="2489">
                              <a:s>
                                 <a:s r="2483">
                                    <a:s r="2482">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2488">
                                 <a:s>where </a:s>
                                 <a:s r="2488">
                                    <a:s r="2485">
                                       <a:s r="2484">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2485">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2487">
                                       <a:s r="2486">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2487">
                                          <a:s>&quot;Excessive swelling&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2492">
                        <a:s r="2491">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2492">
                           <a:s>&quot;Excessive swelling&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2505">
                     <a:s>when </a:s>
                     <a:s r="2502">
                        <a:s>exists</a:s>
                        <a:s r="2501">
                           <a:s>(</a:s>
                           <a:s r="2501">
                              <a:s>
                                 <a:s r="2495">
                                    <a:s r="2494">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2500">
                                 <a:s>where </a:s>
                                 <a:s r="2500">
                                    <a:s r="2497">
                                       <a:s r="2496">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2497">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2499">
                                       <a:s r="2498">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2499">
                                          <a:s>&quot;Haematoma&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2504">
                        <a:s r="2503">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2504">
                           <a:s>&quot;Haematoma&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2517">
                     <a:s>when </a:s>
                     <a:s r="2514">
                        <a:s>exists</a:s>
                        <a:s r="2513">
                           <a:s>(</a:s>
                           <a:s r="2513">
                              <a:s>
                                 <a:s r="2507">
                                    <a:s r="2506">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2512">
                                 <a:s>where </a:s>
                                 <a:s r="2512">
                                    <a:s r="2509">
                                       <a:s r="2508">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2509">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2511">
                                       <a:s r="2510">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2511">
                                          <a:s>&quot;Infection&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2516">
                        <a:s r="2515">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2516">
                           <a:s>&quot;Infection&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2529">
                     <a:s>when </a:s>
                     <a:s r="2526">
                        <a:s>exists</a:s>
                        <a:s r="2525">
                           <a:s>(</a:s>
                           <a:s r="2525">
                              <a:s>
                                 <a:s r="2519">
                                    <a:s r="2518">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2524">
                                 <a:s>where </a:s>
                                 <a:s r="2524">
                                    <a:s r="2521">
                                       <a:s r="2520">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2521">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2523">
                                       <a:s r="2522">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2523">
                                          <a:s>&quot;Injury to glans&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2528">
                        <a:s r="2527">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2528">
                           <a:s>&quot;Injury to glans&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2541">
                     <a:s>when </a:s>
                     <a:s r="2538">
                        <a:s>exists</a:s>
                        <a:s r="2537">
                           <a:s>(</a:s>
                           <a:s r="2537">
                              <a:s>
                                 <a:s r="2531">
                                    <a:s r="2530">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2536">
                                 <a:s>where </a:s>
                                 <a:s r="2536">
                                    <a:s r="2533">
                                       <a:s r="2532">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2533">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2535">
                                       <a:s r="2534">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2535">
                                          <a:s>&quot;Scar or disfigurement&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2540">
                        <a:s r="2539">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2540">
                           <a:s>&quot;Scar or disfigurement&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2553">
                     <a:s>when </a:s>
                     <a:s r="2550">
                        <a:s>exists</a:s>
                        <a:s r="2549">
                           <a:s>(</a:s>
                           <a:s r="2549">
                              <a:s>
                                 <a:s r="2543">
                                    <a:s r="2542">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2548">
                                 <a:s>where </a:s>
                                 <a:s r="2548">
                                    <a:s r="2545">
                                       <a:s r="2544">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2545">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2547">
                                       <a:s r="2546">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2547">
                                          <a:s>&quot;Sharps injury to personnel&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2552">
                        <a:s r="2551">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2552">
                           <a:s>&quot;Sharps injury to personnel&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2565">
                     <a:s>when </a:s>
                     <a:s r="2562">
                        <a:s>exists</a:s>
                        <a:s r="2561">
                           <a:s>(</a:s>
                           <a:s r="2561">
                              <a:s>
                                 <a:s r="2555">
                                    <a:s r="2554">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2560">
                                 <a:s>where </a:s>
                                 <a:s r="2560">
                                    <a:s r="2557">
                                       <a:s r="2556">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2557">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2559">
                                       <a:s r="2558">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2559">
                                          <a:s>&quot;Wound disruption&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2564">
                        <a:s r="2563">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2564">
                           <a:s>&quot;Wound disruption&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        else </a:s>
                  <a:s r="2567">
                     <a:s r="2566">
                        <a:s>HC</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="2567">
                        <a:s>&quot;Other - HIV.B.DE222&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2568" locator="759:5-774:7" xsi:type="Case">
            <caseItem localId="2421" locator="760:9-760:105">
               <when localId="2418" locator="760:14-760:80" xsi:type="Exists">
                  <operand localId="2417" locator="760:20-760:80" xsi:type="Query">
                     <source localId="2411" locator="760:21-760:43" alias="AE">
                        <expression localId="2410" locator="760:21-760:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2416" locator="760:45-760:79" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2413" locator="760:51-760:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2415" locator="760:62-760:79" name="Abnormal pain" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2420" locator="760:88-760:105" name="Abnormal pain" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2433" locator="761:9-761:133">
               <when localId="2430" locator="761:14-761:94" xsi:type="Exists">
                  <operand localId="2429" locator="761:20-761:94" xsi:type="Query">
                     <source localId="2423" locator="761:21-761:43" alias="AE">
                        <expression localId="2422" locator="761:21-761:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2428" locator="761:45-761:93" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2425" locator="761:51-761:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2427" locator="761:62-761:93" name="Anaesthesia-related effects" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2432" locator="761:102-761:133" name="Anaesthesia-related effects" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2445" locator="762:9-762:117">
               <when localId="2442" locator="762:14-762:86" xsi:type="Exists">
                  <operand localId="2441" locator="762:20-762:86" xsi:type="Query">
                     <source localId="2435" locator="762:21-762:43" alias="AE">
                        <expression localId="2434" locator="762:21-762:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2440" locator="762:45-762:85" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2437" locator="762:51-762:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2439" locator="762:62-762:85" name="Damage to the penis" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2444" locator="762:94-762:117" name="Damage to the penis" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2457" locator="763:9-763:119">
               <when localId="2454" locator="763:14-763:87" xsi:type="Exists">
                  <operand localId="2453" locator="763:20-763:87" xsi:type="Query">
                     <source localId="2447" locator="763:21-763:43" alias="AE">
                        <expression localId="2446" locator="763:21-763:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2452" locator="763:45-763:86" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2449" locator="763:51-763:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2451" locator="763:62-763:86" name="Difficulty urinating" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2456" locator="763:95-763:119" name="Difficulty urinating" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2469" locator="764:9-764:115">
               <when localId="2466" locator="764:14-764:85" xsi:type="Exists">
                  <operand localId="2465" locator="764:20-764:85" xsi:type="Query">
                     <source localId="2459" locator="764:21-764:43" alias="AE">
                        <expression localId="2458" locator="764:21-764:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2464" locator="764:45-764:84" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2461" locator="764:51-764:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2463" locator="764:62-764:84" name="Excessive bleeding" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2468" locator="764:93-764:115" name="Excessive bleeding" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2481" locator="765:9-765:123">
               <when localId="2478" locator="765:14-765:89" xsi:type="Exists">
                  <operand localId="2477" locator="765:20-765:89" xsi:type="Query">
                     <source localId="2471" locator="765:21-765:43" alias="AE">
                        <expression localId="2470" locator="765:21-765:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2476" locator="765:45-765:88" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2473" locator="765:51-765:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2475" locator="765:62-765:88" name="Excessive skin removal" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2480" locator="765:97-765:123" name="Excessive skin removal" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2493" locator="766:9-766:115">
               <when localId="2490" locator="766:14-766:85" xsi:type="Exists">
                  <operand localId="2489" locator="766:20-766:85" xsi:type="Query">
                     <source localId="2483" locator="766:21-766:43" alias="AE">
                        <expression localId="2482" locator="766:21-766:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2488" locator="766:45-766:84" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2485" locator="766:51-766:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2487" locator="766:62-766:84" name="Excessive swelling" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2492" locator="766:93-766:115" name="Excessive swelling" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2505" locator="767:9-767:97">
               <when localId="2502" locator="767:14-767:76" xsi:type="Exists">
                  <operand localId="2501" locator="767:20-767:76" xsi:type="Query">
                     <source localId="2495" locator="767:21-767:43" alias="AE">
                        <expression localId="2494" locator="767:21-767:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2500" locator="767:45-767:75" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2497" locator="767:51-767:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2499" locator="767:62-767:75" name="Haematoma" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2504" locator="767:84-767:97" name="Haematoma" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2517" locator="768:9-768:97">
               <when localId="2514" locator="768:14-768:76" xsi:type="Exists">
                  <operand localId="2513" locator="768:20-768:76" xsi:type="Query">
                     <source localId="2507" locator="768:21-768:43" alias="AE">
                        <expression localId="2506" locator="768:21-768:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2512" locator="768:45-768:75" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2509" locator="768:51-768:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2511" locator="768:62-768:75" name="Infection" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2516" locator="768:84-768:97" name="Infection" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2529" locator="769:9-769:109">
               <when localId="2526" locator="769:14-769:82" xsi:type="Exists">
                  <operand localId="2525" locator="769:20-769:82" xsi:type="Query">
                     <source localId="2519" locator="769:21-769:43" alias="AE">
                        <expression localId="2518" locator="769:21-769:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2524" locator="769:45-769:81" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2521" locator="769:51-769:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2523" locator="769:62-769:81" name="Injury to glans" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2528" locator="769:90-769:109" name="Injury to glans" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2541" locator="770:9-770:121">
               <when localId="2538" locator="770:14-770:88" xsi:type="Exists">
                  <operand localId="2537" locator="770:20-770:88" xsi:type="Query">
                     <source localId="2531" locator="770:21-770:43" alias="AE">
                        <expression localId="2530" locator="770:21-770:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2536" locator="770:45-770:87" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2533" locator="770:51-770:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2535" locator="770:62-770:87" name="Scar or disfigurement" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2540" locator="770:96-770:121" name="Scar or disfigurement" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2553" locator="771:9-771:131">
               <when localId="2550" locator="771:14-771:93" xsi:type="Exists">
                  <operand localId="2549" locator="771:20-771:93" xsi:type="Query">
                     <source localId="2543" locator="771:21-771:43" alias="AE">
                        <expression localId="2542" locator="771:21-771:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2548" locator="771:45-771:92" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2545" locator="771:51-771:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2547" locator="771:62-771:92" name="Sharps injury to personnel" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2552" locator="771:101-771:131" name="Sharps injury to personnel" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2565" locator="772:9-772:111">
               <when localId="2562" locator="772:14-772:83" xsi:type="Exists">
                  <operand localId="2561" locator="772:20-772:83" xsi:type="Query">
                     <source localId="2555" locator="772:21-772:43" alias="AE">
                        <expression localId="2554" locator="772:21-772:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2560" locator="772:45-772:82" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2557" locator="772:51-772:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2559" locator="772:62-772:82" name="Wound disruption" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2564" locator="772:91-772:111" name="Wound disruption" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else localId="2567" locator="773:14-773:37" name="Other - HIV.B.DE222" libraryName="HC" xsi:type="CodeRef"/>
         </expression>
      </def>
      <def localId="2614" locator="776:1-784:31" name="VMMC_adverse_event_Intraoperative" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2614">
               <a:s>define &quot;VMMC_adverse_event_Intraoperative&quot;:
</a:s>
               <a:s r="2613">
                  <a:s>
                     <a:s r="2571">
                        <a:s r="2570">
                           <a:s r="2570">
                              <a:s>[AdverseEvent]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> AE</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="2608">
                     <a:s>with </a:s>
                     <a:s r="2573">
                        <a:s r="2572">
                           <a:s r="2572">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="2607">
                        <a:s r="2601">
                           <a:s r="2595">
                              <a:s r="2589">
                                 <a:s r="2583">
                                    <a:s r="2578">
                                       <a:s r="2576">
                                          <a:s r="2575">
                                             <a:s r="2574">
                                                <a:s>AE</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2575">
                                                <a:s>suspectEntity</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2576">
                                             <a:s>instance</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2578">
                                          <a:s>references(</a:s>
                                          <a:s r="2577">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> and </a:s>
                                    <a:s r="2582">
                                       <a:s r="2580">
                                          <a:s r="2579">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2580">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="2581">
                                          <a:s>'completed'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> 
      and </a:s>
                                 <a:s r="2588">
                                    <a:s r="2585">
                                       <a:s r="2584">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2585">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~  </a:s>
                                    <a:s r="2587">
                                       <a:s r="2586">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2587">
                                          <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      and </a:s>
                              <a:s r="2594">
                                 <a:s r="2591">
                                    <a:s r="2590">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2591">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="2594"> after </a:s>
                                 <a:s r="2593">
                                    <a:s>start of </a:s>
                                    <a:s r="2592">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="2600">
                              <a:s r="2597">
                                 <a:s r="2596">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2597">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2600"> before </a:s>
                              <a:s r="2599">
                                 <a:s>end of </a:s>
                                 <a:s r="2598">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="2606">
                           <a:s r="2603">
                              <a:s r="2602">
                                 <a:s>AE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2603">
                                 <a:s>date</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="2605">
                              <a:s r="2604">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2605">
                                 <a:s>performed</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2612">
                     <a:s>where </a:s>
                     <a:s r="2612">
                        <a:s r="2610">
                           <a:s r="2609">
                              <a:s>AE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2610">
                              <a:s>actuality</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="2611">
                           <a:s>'actual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2613" locator="777:1-784:31" xsi:type="Query">
            <source localId="2571" locator="777:1-777:17" alias="AE">
               <expression localId="2570" locator="777:1-777:14" dataType="fhir:AdverseEvent" templateId="http://hl7.org/fhir/StructureDefinition/AdverseEvent" xsi:type="Retrieve"/>
            </source>
            <relationship localId="2608" locator="778:3-783:31" alias="P" xsi:type="With">
               <expression localId="2572" locator="778:8-778:18" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
               <suchThat localId="2607" locator="779:17-783:31" xsi:type="And">
                  <operand localId="2601" locator="779:17-782:56" xsi:type="And">
                     <operand localId="2595" locator="779:17-781:57" xsi:type="And">
                        <operand localId="2589" locator="779:17-780:65" xsi:type="And">
                           <operand localId="2583" locator="779:17-779:82" xsi:type="And">
                              <operand localId="2578" locator="779:17-779:55" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="2576" locator="779:17-779:41" xsi:type="Query">
                                    <source alias="$this">
                                       <expression localId="2575" locator="779:17-779:32" path="suspectEntity" scope="AE" xsi:type="Property"/>
                                    </source>
                                    <where xsi:type="Not">
                                       <operand xsi:type="IsNull">
                                          <operand path="instance" xsi:type="Property">
                                             <source name="$this" xsi:type="AliasRef"/>
                                          </operand>
                                       </operand>
                                    </where>
                                    <return distinct="false">
                                       <expression path="instance" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </expression>
                                    </return>
                                 </operand>
                                 <operand localId="2577" locator="779:54" name="P" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="2582" locator="779:61-779:82" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2580" locator="779:61-779:68" path="status" scope="P" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="2581" locator="779:72-779:82" valueType="t:String" value="completed" xsi:type="Literal"/>
                              </operand>
                           </operand>
                           <operand localId="2588" locator="780:11-780:65" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2585" locator="780:11-780:16" path="code" scope="P" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="2587" locator="780:21-780:65" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2594" locator="781:11-781:57" xsi:type="After">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2591" locator="781:11-781:21" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="2593" locator="781:29-781:57" xsi:type="Start">
                                 <operand localId="2592" locator="781:38-781:57" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2600" locator="782:11-782:56" xsi:type="Before">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:dateTime" xsi:type="As">
                              <operand localId="2597" locator="782:11-782:21" path="performed" scope="P" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="2599" locator="782:30-782:56" xsi:type="End">
                              <operand localId="2598" locator="782:37-782:56" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2606" locator="783:11-783:31" xsi:type="Equal">
                     <operand localId="2603" locator="783:11-783:17" path="date" scope="AE" xsi:type="Property"/>
                     <operand asType="fhir:dateTime" xsi:type="As">
                        <operand localId="2605" locator="783:21-783:31" path="performed" scope="P" xsi:type="Property"/>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="2612" locator="784:3-784:31" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2610" locator="784:9-784:20" path="actuality" scope="AE" xsi:type="Property"/>
               </operand>
               <operand localId="2611" locator="784:24-784:31" valueType="t:String" value="actual" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="2667" locator="786:3-795:31" name="VMMC_adverse_event_Postoperative" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2667">
               <a:s>define &quot;VMMC_adverse_event_Postoperative&quot;:
</a:s>
               <a:s r="2666">
                  <a:s>
                     <a:s r="2616">
                        <a:s r="2615">
                           <a:s r="2615">
                              <a:s>[AdverseEvent]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> AE</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="2661">
                     <a:s>with </a:s>
                     <a:s r="2618">
                        <a:s r="2617">
                           <a:s r="2617">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="2660">
                        <a:s r="2654">
                           <a:s r="2646">
                              <a:s r="2640">
                                 <a:s r="2634">
                                    <a:s r="2628">
                                       <a:s r="2623">
                                          <a:s r="2621">
                                             <a:s r="2620">
                                                <a:s r="2619">
                                                   <a:s>AE</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="2620">
                                                   <a:s>suspectEntity</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2621">
                                                <a:s>instance</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2623">
                                             <a:s>references(</a:s>
                                             <a:s r="2622">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="2627">
                                          <a:s r="2625">
                                             <a:s r="2624">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2625">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="2626">
                                             <a:s>'completed'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
      and </a:s>
                                    <a:s r="2633">
                                       <a:s r="2630">
                                          <a:s r="2629">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2630">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~  </a:s>
                                       <a:s r="2632">
                                          <a:s r="2631">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2632">
                                             <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2639">
                                    <a:s r="2636">
                                       <a:s r="2635">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2636">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="2639"> after </a:s>
                                    <a:s r="2638">
                                       <a:s>start of </a:s>
                                       <a:s r="2637">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      and </a:s>
                              <a:s r="2645">
                                 <a:s r="2642">
                                    <a:s r="2641">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2642">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="2645"> before </a:s>
                                 <a:s r="2644">
                                    <a:s>end of </a:s>
                                    <a:s r="2643">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="2653">
                              <a:s r="2648">
                                 <a:s r="2647">
                                    <a:s>AE</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2648">
                                    <a:s>date</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> &lt;= </a:s>
                              <a:s r="2652">
                                 <a:s>(</a:s>
                                 <a:s r="2652">
                                    <a:s r="2650">
                                       <a:s r="2649">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2650">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="2651">
                                       <a:s>30 days</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="2659">
                           <a:s r="2656">
                              <a:s r="2655">
                                 <a:s>AE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2656">
                                 <a:s>date</a:s>
                              </a:s>
                           </a:s>
                           <a:s> > </a:s>
                           <a:s r="2658">
                              <a:s>(</a:s>
                              <a:s r="2658">
                                 <a:s r="2657">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2658">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2665">
                     <a:s>where </a:s>
                     <a:s r="2665">
                        <a:s r="2663">
                           <a:s r="2662">
                              <a:s>AE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2663">
                              <a:s>actuality</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="2664">
                           <a:s>'actual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2666" locator="787:1-795:31" xsi:type="Query">
            <source localId="2616" locator="787:1-787:17" alias="AE">
               <expression localId="2615" locator="787:1-787:14" dataType="fhir:AdverseEvent" templateId="http://hl7.org/fhir/StructureDefinition/AdverseEvent" xsi:type="Retrieve"/>
            </source>
            <relationship localId="2661" locator="788:3-794:33" alias="P" xsi:type="With">
               <expression localId="2617" locator="788:8-788:18" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
               <suchThat localId="2660" locator="789:17-794:33" xsi:type="And">
                  <operand localId="2654" locator="789:17-793:44" xsi:type="And">
                     <operand localId="2646" locator="789:17-792:56" xsi:type="And">
                        <operand localId="2640" locator="789:17-791:57" xsi:type="And">
                           <operand localId="2634" locator="789:17-790:65" xsi:type="And">
                              <operand localId="2628" locator="789:17-789:82" xsi:type="And">
                                 <operand localId="2623" locator="789:17-789:55" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                    <operand localId="2621" locator="789:17-789:41" xsi:type="Query">
                                       <source alias="$this">
                                          <expression localId="2620" locator="789:17-789:32" path="suspectEntity" scope="AE" xsi:type="Property"/>
                                       </source>
                                       <where xsi:type="Not">
                                          <operand xsi:type="IsNull">
                                             <operand path="instance" xsi:type="Property">
                                                <source name="$this" xsi:type="AliasRef"/>
                                             </operand>
                                          </operand>
                                       </where>
                                       <return distinct="false">
                                          <expression path="instance" xsi:type="Property">
                                             <source name="$this" xsi:type="AliasRef"/>
                                          </expression>
                                       </return>
                                    </operand>
                                    <operand localId="2622" locator="789:54" name="P" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand localId="2627" locator="789:61-789:82" xsi:type="Equal">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="2625" locator="789:61-789:68" path="status" scope="P" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="2626" locator="789:72-789:82" valueType="t:String" value="completed" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="2633" locator="790:11-790:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2630" locator="790:11-790:16" path="code" scope="P" xsi:type="Property"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="2632" locator="790:21-790:65" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="2639" locator="791:11-791:57" xsi:type="After">
                              <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:dateTime" xsi:type="As">
                                    <operand localId="2636" locator="791:11-791:21" path="performed" scope="P" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="2638" locator="791:29-791:57" xsi:type="Start">
                                    <operand localId="2637" locator="791:38-791:57" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2645" locator="792:11-792:56" xsi:type="Before">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2642" locator="792:11-792:21" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="2644" locator="792:30-792:56" xsi:type="End">
                                 <operand localId="2643" locator="792:37-792:56" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2653" locator="793:11-793:44" xsi:type="LessOrEqual">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2648" locator="793:11-793:17" path="date" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand localId="2652" locator="793:22-793:44" xsi:type="Add">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2650" locator="793:23-793:33" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand localId="2651" locator="793:37-793:43" value="30" unit="days" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2659" locator="794:11-794:33" xsi:type="Greater">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2656" locator="794:11-794:17" path="date" scope="AE" xsi:type="Property"/>
                     </operand>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="2658" locator="794:21-794:33" path="performed" scope="P" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="2665" locator="795:3-795:31" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2663" locator="795:9-795:20" path="actuality" scope="AE" xsi:type="Property"/>
               </operand>
               <operand localId="2664" locator="795:24-795:31" valueType="t:String" value="actual" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="2680" locator="797:3-802:7" name="VMMC_adverse_event_timing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2680">
               <a:s>define &quot;VMMC_adverse_event_timing&quot;:
    </a:s>
               <a:s r="2679">
                  <a:s>case 
        </a:s>
                  <a:s r="2672">
                     <a:s>when </a:s>
                     <a:s r="2669">
                        <a:s>exists</a:s>
                        <a:s r="2668">
                           <a:s>(</a:s>
                           <a:s r="2668">
                              <a:s>VMMC_adverse_event_Intraoperative</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2671">
                        <a:s r="2670">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2671">
                           <a:s>&quot;Intraoperative&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2677">
                     <a:s>when </a:s>
                     <a:s r="2674">
                        <a:s>exists</a:s>
                        <a:s r="2673">
                           <a:s>(</a:s>
                           <a:s r="2673">
                              <a:s>VMMC_adverse_event_Postoperative</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2676">
                        <a:s r="2675">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2676">
                           <a:s>&quot;Postoperative&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="2678">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2679" locator="798:5-802:7" xsi:type="Case">
            <caseItem localId="2672" locator="799:9-799:80">
               <when localId="2669" locator="799:14-799:54" xsi:type="Exists">
                  <operand localId="2668" locator="799:20-799:54" name="VMMC_adverse_event_Intraoperative" xsi:type="ExpressionRef"/>
               </when>
               <then localId="2671" locator="799:62-799:80" name="Intraoperative" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2677" locator="800:9-800:78">
               <when localId="2674" locator="800:14-800:53" xsi:type="Exists">
                  <operand localId="2673" locator="800:20-800:53" name="VMMC_adverse_event_Postoperative" xsi:type="ExpressionRef"/>
               </when>
               <then localId="2676" locator="800:61-800:78" name="Postoperative" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else asType="t:Code" xsi:type="As">
               <operand localId="2678" locator="801:14-801:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
   </statements>
</library>
