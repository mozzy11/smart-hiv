<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="None" xsi:type="a:CqlToElmInfo"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="87">
         <a:s>/**
 * Library: HIV.IND.16 Logic
 * Ref No: PRV.16
 * Short Name: VMMC adverse events
 *
 * Definition: a) Number or (b) % of adverse events during the reporting period
 *
 * Numerator: Number of people experiencing at least one moderate or severe adverse event during or following circumcision surgery during the reporting period
 * Numerator Calculation: COUNT of clients with &quot;VMMC procedure date&quot; in the reporting period AND &quot;Adverse event severity&quot; IN 'Moderate', 'Severe' AND &quot;Timing of adverse event&quot; LESS THAN 30 days from &quot;VMMC procedure date&quot;
 * Numerator Exclusions: 
 *
 * Denominator: a) 1 | b) Total number of individuals under going VMMC performed according to national standard during the reporting period
 * Denominator Calculation: a) 1 | b) COUNT of clients with a &quot;VMMC procedure date&quot; in the reporting period
 * Denominator Exclusions: 
 *
 * Disaggregations:
 * • Age (0–4, 5–9, 10–14, 15–19, 20–24, 25–49, 50+ years) 
 *  • Type and seriousness of adverse event 
 *  • Timing of adverse event (intraoperative, postoperative) 
 *  • Service site 
 *  • Provider type (key population-led or community-led organization, public sector provider, other entities such as private for-profit and not-for-profit organizations, including faith- based, international, nongovernmental) 
 *  • Setting: facility-based service (including hospitals, health clinics, general practice offices, etc.) or community-based service (including drop-in centres, community service delivery points, mobile clinics or vans, outreach teams, community support groups, etc.) 
 *  • Cities and other administrative regions of epidemiologic importance 
 *  
 *
 * Disaggregation Elements: Age | Adverse event severity | Timing of adverse event | Type of adverse VMMC event
 *
 * Numerator and Denominator Elements:
 * Adverse event severity 
 *  Timing of adverse event 
 *  VMMC procedure date
 *
 * Reference: Consolidated guidelines on person-centred HIV strategic information: strengthening routine data for impact. Geneva: World Health Organization; 2022
 * 
 * Data Concepts:
 * HIV.A.DE17: Age | Calculated age (number of years) of the client based on date of birth
 * HIV.B.DE198: VMMC procedure date | Date on which a voluntary medical male circumcision procedure was performed
 * HIV.B.DE201: Adverse event severity | Severity of the adverse event associated with voluntary medical male circumcision (VMMC) procedure
 * HIV.B.DE202: Moderate | Severity of the adverse event associated with VMMC procedure was moderate
 * HIV.B.DE203: Severe | Severity of the adverse event associated with VMMC procedure was severe
 * HIV.B.DE204: Timing of adverse event | When the adverse event associated with VMMC procedure occurred
 * HIV.B.DE205: Intraoperative | The adverse event associated with VMMC procedure occurred during the procedure
 * HIV.B.DE206: Postoperative | The adverse event associated with VMMC procedure occurred within the first 30 days after the procedure
 * HIV.B.DE207: Type of adverse VMMC event | Type of adverse event associated with voluntary medical male circumcision (VMMC) procedure
 * HIV.B.DE208: Abnormal pain | Client experienced abnormal pain
 * HIV.B.DE209: Anaesthesia-related effects | Client had anaesthesia-related effects
 * HIV.B.DE210: Bleeding | Client had bleeding
 * HIV.B.DE211: Damage to the penis | Client had damage to the penis
 * HIV.B.DE212: Difficulty urinating | Client had difficulty urinating
 * HIV.B.DE213: Excessive bleeding | Client experienced excessive bleeding
 * HIV.B.DE214: Excessive skin removal | Client experienced excessive skin removal
 * HIV.B.DE215: Excessive swelling | Client experienced excessive swelling
 * HIV.B.DE216: Haematoma | Client experienced haematoma
 * HIV.B.DE217: Infection | Client experienced infection
 * HIV.B.DE218: Injury to glans | Client experienced injury to glans
 * HIV.B.DE219: Scar or disfigurement | Client experienced scar or disfigurement
 * HIV.B.DE220: Sharps injury to personnel | During VMMC procedure there was sharps injury to personnel
 * HIV.B.DE221: Wound disruption | Client experienced wound disruption
 * HIV.B.DE222: Other | Client experienced other adverse VMMC event
 *
 * Additional Context
 * - what it measures: • This indicator measures whether VMMC services meet national standards of safety and effectiveness.
 * - rationale: • Staff conducting medical circumcisions must have appropriate training and access to proper equipment. | • Trends in adverse events may indicate where service providers need additional support. | • Intraoperative adverse events may include pain, excessive bleeding, anaesthesia-related effects, excessive skin removal, damage to the penis, sharps injury to personnel. Postoperative adverse events may include abnormal pain, excessive swelling, infection, haematoma, bleeding, difficulty urinating, wound disruption, scar or disfigurement, injury to glans, excessive skin removal. | • Moderate or severe adverse events include complications resulting in death or hospitalization within 30 days or permanent disability.
 * - method: Individual-level data obtained from programme records |  | This indicator can be reported as simply the absolute number of men experiencing adverse events occurring in the reporting period or can be reported as a proportion of the number of procedures conducted.
 * 
 * Suggested Scoring Method: proportion | http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm
 */

library HIVIND16Logic</a:s>
      </a:s>
   </annotation>
   <identifier id="HIVIND16Logic" system="http://smart.who.int/hiv"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="72:1-72:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>// Included Libraries
using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="74:1-74:44" localIdentifier="HIC" path="http://smart.who.int/hiv/HIVCommon" version="0.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVCommon</a:s>
               </a:s>
               <a:s> version '0.0.1' called HIC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="75:1-75:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="76:1-76:29" localIdentifier="WCom" path="http://smart.who.int/hiv/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="77:1-77:36" localIdentifier="HCC" path="http://smart.who.int/hiv/HIVConceptsCustom">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVConceptsCustom</a:s>
               </a:s>
               <a:s> called HCC</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="11" locator="80:1-80:88" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="11">
               <a:s>// Indicator Definition
parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="10">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="9">
                     <a:s>Date</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> default </a:s>
               <a:s r="8">
                  <a:s r="6">Interval[@2023-01-01, @2023-01-30]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="8" locator="80:55-80:88" lowClosed="true" highClosed="true" xsi:type="Interval">
            <low localId="6" locator="80:64-80:74" xsi:type="Date">
               <year valueType="t:Integer" value="2023" xsi:type="Literal"/>
               <month valueType="t:Integer" value="1" xsi:type="Literal"/>
               <day valueType="t:Integer" value="1" xsi:type="Literal"/>
            </low>
            <high localId="7" locator="80:77-80:87" xsi:type="Date">
               <year valueType="t:Integer" value="2023" xsi:type="Literal"/>
               <month valueType="t:Integer" value="1" xsi:type="Literal"/>
               <day valueType="t:Integer" value="30" xsi:type="Literal"/>
            </high>
         </default>
         <parameterTypeSpecifier localId="10" locator="80:32-80:45" xsi:type="IntervalTypeSpecifier">
            <pointType localId="9" locator="80:41-80:44" name="t:Date" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <contexts>
      <def locator="82:1-82:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="82:1-82:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="82:1-82:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="13" locator="89:1-90:6" name="Initial Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s r="12">/* Populations */

/*
 *Initial Population
 */

define &quot;Initial Population&quot;:
  true</a:s>
            </a:s>
         </annotation>
         <expression localId="12" locator="90:3-90:6" valueType="t:Boolean" value="true" xsi:type="Literal"/>
      </def>
      <def localId="29" locator="99:1-103:3" name="Numerator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="29">
               <a:s>/**
 * Numerator
 * 
 * Definition: Number of people experiencing at least one moderate or severe adverse event during or following circumcision surgery during the reporting period
 * Calculation: COUNT of clients with &quot;VMMC procedure date&quot; in the reporting period AND &quot;Adverse event severity&quot; IN 'Moderate', 'Severe' AND &quot;Timing of adverse event&quot; LESS THAN 30 days from &quot;VMMC procedure date&quot;
 */

define &quot;Numerator&quot;:
  </a:s>
               <a:s r="28">
                  <a:s>exists</a:s>
                  <a:s r="27">
                     <a:s>(</a:s>
                     <a:s r="27">
                        <a:s>
                           <a:s r="15">
                              <a:s r="14">
                                 <a:s>
                                    <a:s>HIC.&quot;VMMC_adverse_event&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> VMAC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="26">
                           <a:s>where </a:s>
                           <a:s r="26">
                              <a:s>(</a:s>
                              <a:s r="26">
                                 <a:s r="20">
                                    <a:s r="17">
                                       <a:s r="16">
                                          <a:s>VMAC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="17">
                                          <a:s>severity</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="19">
                                       <a:s r="18">
                                          <a:s>HCC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="19">
                                          <a:s>&quot;severe&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    or </a:s>
                                 <a:s r="25">
                                    <a:s r="22">
                                       <a:s r="21">
                                          <a:s>VMAC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="22">
                                          <a:s>severity</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="24">
                                       <a:s r="23">
                                          <a:s>HCC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="24">
                                          <a:s>&quot;moderate&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="28" locator="100:3-103:3" xsi:type="Exists">
            <operand localId="27" locator="100:9-103:3" xsi:type="Query">
               <source localId="15" locator="100:10-100:38" alias="VMAC">
                  <expression localId="14" locator="100:10-100:33" name="VMMC_adverse_event" libraryName="HIC" xsi:type="ExpressionRef"/>
               </source>
               <where localId="26" locator="101:5-102:38" xsi:type="Or">
                  <operand localId="20" locator="101:12-101:39" xsi:type="Equal">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="17" locator="101:12-101:24" path="severity" scope="VMAC" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="19" locator="101:28-101:39" name="severe" libraryName="HCC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand localId="25" locator="102:8-102:37" xsi:type="Equal">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="22" locator="102:8-102:20" path="severity" scope="VMAC" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="24" locator="102:24-102:37" name="moderate" libraryName="HCC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="38" locator="113:1-116:3" name="Denominator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="38">
               <a:s>/**
 * Denominator
 *
 * Definition: a) 1 | b) Total number of individuals under going VMMC performed according to national standard during the reporting period
 * Calculation: a) 1 | b) COUNT of clients with a &quot;VMMC procedure date&quot; in the reporting period
 */

define &quot;Denominator&quot;:
  </a:s>
               <a:s r="37">
                  <a:s>exists</a:s>
                  <a:s r="36">
                     <a:s>(</a:s>
                     <a:s r="36">
                        <a:s>
                           <a:s r="31">
                              <a:s r="30">
                                 <a:s>
                                    <a:s>HIC.&quot;VMMC_done&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> VM</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        </a:s>
                        <a:s r="35">
                           <a:s>where </a:s>
                           <a:s r="35">
                              <a:s>(</a:s>
                              <a:s r="35">
                                 <a:s r="33">
                                    <a:s r="32">
                                       <a:s>VM</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="33">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="35"> during </a:s>
                                 <a:s r="34">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="37" locator="114:3-116:3" xsi:type="Exists">
            <operand localId="36" locator="114:9-116:3" xsi:type="Query">
               <source localId="31" locator="114:10-114:27" alias="VM">
                  <expression localId="30" locator="114:10-114:24" name="VMMC_done" libraryName="HIC" xsi:type="ExpressionRef"/>
               </source>
               <where localId="35" locator="115:9-115:56" xsi:type="IncludedIn">
                  <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:Period" xsi:type="As">
                        <operand localId="33" locator="115:16-115:27" path="performed" scope="VM" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="Interval">
                     <low xsi:type="ToDateTime">
                        <operand path="low" xsi:type="Property">
                           <source localId="34" locator="115:36-115:55" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </low>
                     <lowClosedExpression path="lowClosed" xsi:type="Property">
                        <source localId="34" locator="115:36-115:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </lowClosedExpression>
                     <high xsi:type="ToDateTime">
                        <operand path="high" xsi:type="Property">
                           <source localId="34" locator="115:36-115:55" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </high>
                     <highClosedExpression path="highClosed" xsi:type="Property">
                        <source localId="34" locator="115:36-115:55" name="Measurement Period" xsi:type="ParameterRef"/>
                     </highClosedExpression>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="41" locator="127:1-128:42" name="Administrative Gender Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="41">
               <a:s>/* end Populations */



/*
 * Disaggregators
 */

define &quot;Administrative Gender Stratifier&quot;:
	</a:s>
               <a:s r="40">
                  <a:s r="39">
                     <a:s>HIC</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="40">
                     <a:s>&quot;By Administrative Gender Stratifier&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="40" locator="128:2-128:42" name="By Administrative Gender Stratifier" libraryName="HIC" xsi:type="ExpressionRef"/>
      </def>
      <def localId="44" locator="130:1-131:26" name="Age Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="44">
               <a:s>define &quot;Age Stratifier&quot;:
	</a:s>
               <a:s r="43">
                  <a:s r="42">
                     <a:s>HIC</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="43">
                     <a:s>&quot;By Age Stratifier 3&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="43" locator="131:2-131:26" name="By Age Stratifier 3" libraryName="HIC" xsi:type="ExpressionRef"/>
      </def>
      <def localId="47" locator="133:1-134:38" name="Geographic Region Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="47">
               <a:s>define &quot;Geographic Region Stratifier&quot;:
	</a:s>
               <a:s r="46">
                  <a:s r="45">
                     <a:s>HIC</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="46">
                     <a:s>&quot;By Geographic Region Stratifier&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="46" locator="134:2-134:38" name="By Geographic Region Stratifier" libraryName="HIC" xsi:type="ExpressionRef"/>
      </def>
      <def localId="50" locator="136:1-137:17" name="Setting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="50">
               <a:s>define &quot;Setting&quot;:
    </a:s>
               <a:s r="49">
                  <a:s r="48">
                     <a:s>HIC</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="49">
                     <a:s>&quot;setting&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="49" locator="137:5-137:17" name="setting" libraryName="HIC" xsi:type="ExpressionRef"/>
      </def>
      <def localId="53" locator="139:1-140:33" name="VMMC_adverse_event_type" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="53">
               <a:s>define &quot;VMMC_adverse_event_type&quot;:
    </a:s>
               <a:s r="52">
                  <a:s r="51">
                     <a:s>HIC</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="52">
                     <a:s>&quot;VMMC_adverse_event_type&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="52" locator="140:5-140:33" name="VMMC_adverse_event_type" libraryName="HIC" xsi:type="ExpressionRef"/>
      </def>
      <def localId="56" locator="142:1-143:33" name="VMMC_adverse_event_timing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="56">
               <a:s>define &quot;VMMC_adverse_event_timing&quot;:
    </a:s>
               <a:s r="55">
                  <a:s r="54">
                     <a:s>HIC</a:s>
                  </a:s>
                  <a:s>.</a:s>
                  <a:s r="55">
                     <a:s>VMMC_adverse_event_timing</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="55" locator="143:5-143:33" name="VMMC_adverse_event_timing" libraryName="HIC" xsi:type="ExpressionRef"/>
      </def>
      <def localId="87" locator="149:1-155:44" name="Stratification" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="87">
               <a:s>//provider type not provided?
//service site not provided?

define &quot;Stratification&quot;:
 </a:s>
               <a:s r="86">
                  <a:s r="82">
                     <a:s r="80">
                        <a:s r="76">
                           <a:s r="74">
                              <a:s r="69">
                                 <a:s r="66">
                                    <a:s r="64">
                                       <a:s r="61">
                                          <a:s r="59">
                                             <a:s r="58">
                                                <a:s r="57">
                                                   <a:s>HIC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="58">
                                                   <a:s>&quot;By Administrative Gender Stratifier&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="59">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> 
  + </a:s>
                                          <a:s r="60">
                                             <a:s>':'</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="63">
                                          <a:s r="62">
                                             <a:s>HIC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="63">
                                             <a:s>&quot;By Age Stratifier&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
+ </a:s>
                                    <a:s r="65">
                                       <a:s>':'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="68">
                                    <a:s r="67">
                                       <a:s>HIC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="68">
                                       <a:s>&quot;By Geographic Region Stratifier&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
+ </a:s>
                              <a:s r="73">
                                 <a:s>Combine(</a:s>
                                 <a:s r="71">
                                    <a:s r="70">
                                       <a:s>HIC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="71">
                                       <a:s>setting</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="72">
                                    <a:s>':'</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
+ </a:s>
                           <a:s r="75">
                              <a:s>':'</a:s>
                           </a:s>
                        </a:s>
                        <a:s> + </a:s>
                        <a:s r="79">
                           <a:s r="78">
                              <a:s r="77">
                                 <a:s>HIC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="78">
                                 <a:s>&quot;VMMC_adverse_event_type&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="79">
                              <a:s>code</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
+ </a:s>
                     <a:s r="81">
                        <a:s>':'</a:s>
                     </a:s>
                  </a:s>
                  <a:s> + </a:s>
                  <a:s r="85">
                     <a:s r="84">
                        <a:s r="83">
                           <a:s>HIC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="84">
                           <a:s>&quot;VMMC_adverse_event_timing&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="85">
                        <a:s>code</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="86" locator="150:2-155:44" xsi:type="Concatenate">
            <operand localId="82" locator="150:2-155:5" xsi:type="Concatenate">
               <operand localId="80" locator="150:2-154:42" xsi:type="Concatenate">
                  <operand localId="76" locator="150:2-154:5" xsi:type="Concatenate">
                     <operand localId="74" locator="150:2-153:27" xsi:type="Concatenate">
                        <operand localId="69" locator="150:2-152:45" xsi:type="Concatenate">
                           <operand localId="66" locator="150:2-152:5" xsi:type="Concatenate">
                              <operand localId="64" locator="150:2-151:33" xsi:type="Concatenate">
                                 <operand localId="61" locator="150:2-151:7" xsi:type="Concatenate">
                                    <operand localId="59" locator="150:2-150:47" path="code" xsi:type="Property">
                                       <source localId="58" locator="150:2-150:42" name="By Administrative Gender Stratifier" libraryName="HIC" xsi:type="ExpressionRef"/>
                                    </operand>
                                    <operand localId="60" locator="151:5-151:7" valueType="t:String" value=":" xsi:type="Literal"/>
                                 </operand>
                                 <operand localId="63" locator="151:11-151:33" name="By Age Stratifier" libraryName="HIC" xsi:type="ExpressionRef"/>
                              </operand>
                              <operand localId="65" locator="152:3-152:5" valueType="t:String" value=":" xsi:type="Literal"/>
                           </operand>
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="68" locator="152:9-152:45" name="By Geographic Region Stratifier" libraryName="HIC" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                        <operand localId="73" locator="153:3-153:27" xsi:type="Combine">
                           <source localId="71" locator="153:11-153:21" name="setting" libraryName="HIC" xsi:type="ExpressionRef"/>
                           <separator localId="72" locator="153:24-153:26" valueType="t:String" value=":" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="75" locator="154:3-154:5" valueType="t:String" value=":" xsi:type="Literal"/>
                  </operand>
                  <operand localId="79" locator="154:9-154:42" path="code" xsi:type="Property">
                     <source localId="78" locator="154:9-154:37" name="VMMC_adverse_event_type" libraryName="HIC" xsi:type="ExpressionRef"/>
                  </operand>
               </operand>
               <operand localId="81" locator="155:3-155:5" valueType="t:String" value=":" xsi:type="Literal"/>
            </operand>
            <operand localId="85" locator="155:9-155:44" path="code" xsi:type="Property">
               <source localId="84" locator="155:9-155:39" name="VMMC_adverse_event_timing" libraryName="HIC" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
   </statements>
</library>
