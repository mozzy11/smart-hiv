<?xml version="1.0" encoding="UTF-8"?>

<Library xmlns="http://hl7.org/fhir">
  <id value="HIVIND40Logic"/>
  <meta>
    <profile value="http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary"/>
    <profile value="http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary"/>
    <profile value="http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library"/>
    <profile value="http://hl7.org/fhir/uv/cql/StructureDefinition/cql-module"/>
  </meta>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><p class="res-header-id"><b>Generated Narrative: Library HIVIND40Logic</b></p><a name="HIVIND40Logic"> </a><a name="hcHIVIND40Logic"> </a><a name="hcHIVIND40Logic-en-US"> </a><h2>Contents</h2><p><code>text/cql</code></p><pre><code class="language-sql">/*
 * Library: HIV.IND.40 Logic
 * Ref No: VER.4
 * Short Name: ART coverage in pregnant women
 *
 * Definition: % of HIV-positive pregnant women who received ART during pregnancy and/or at labour and delivery
 *
 * Numerator: Number of HIV-positive pregnant women who delivered during the reporting period and received ART during pregnancy and/or at labour and delivery
 * Numerator Calculation: COUNT of women with &quot;HIV status&quot;='HIV-positive' AND &quot;Delivery date&quot; in the reporting period AND ((&quot;On ART&quot;=True at labour and delivery) OR (&quot;On ART&quot;=True during pregnancy, for this pregnancy))
 * Numerator Exclusions: 
 *
 * Denominator: a) Programme-based/service delivery denominator | Number of HIV-positive pregnant women who delivered during the reporting period and attended ANC or had a facility-based delivery | b) Population-based denominator | Number of HIV-positive pregnant women who delivered during the reporting period
 * Denominator Calculation: Programme-based/service delivery denominator: | COUNT of women with &quot;HIV status&quot;='HIV-positive' AND &quot;Delivery date&quot; in the reporting period AND (had an &quot;ANC contact date&quot; during reporting period OR &quot;Place of delivery&quot; was a 'Health facility') |  | Population-based denominator: | *Number of HIV-positive pregnant women who delivered during the reporting period
 * Denominator Exclusions: 
 *
 * Disaggregations:
 * Numerator:
 * • Timing of ART initiation (1. already on ART at first ANC visit, 2. newly on ART during pregnancy, 3. newly on ART during labour and delivery, 4. on non-recommended ART regimen)
 * 
 * The primary indicator calculation should include ART status categories 1, 2 and 3. Removing the women in category 1 &quot;already on ART at first ANC visit&quot; from the numerator and denominator gives a measure of ART coverage among HIV-positive pregnant women newly diagnosed during ANC. Dividing category 2 by the sum of categories 2 and 3 gives the proportion of new ART initiations occurring during pregnancy rather than at delivery. Calculating the indicator with those in category 4 (non-recommended ARV regimen) included in the numerator gives a broader measure, that is, coverage of HIV-positive pregnant women receiving any ARV drug.
 * 
 * Disaggregation Elements: Timing of ART initiation
 *
 * Numerator and Denominator Elements:
 * ANC contact date | Delivery date | HIV status | On ART | Place of delivery
 *
 * Reference: Consolidated guidelines on person-centred HIV strategic information: strengthening routine data for impact. Geneva: World Health Organization; 2022
 * 
 * Data Concepts:
 *  
 * HIV.B.DE115: HIV status | HIV status reported after applying the national HIV testing algorithm. No single HIV test can provide an HIV-positive diagnosis. 
 * HIV.B.DE116: HIV-positive | Client is HIV-positive 
 * HIV.B.DE117: HIV-negative | Client is HIV-negative 
 * HIV.B.DE118: Unknown | Client has unknown HIV status 
 * HIV.D.DE38: On ART | Client is currently taking ART 
 * HIV.E.DE41: Timing of ART initiation | When the pregnant woman or mother initiated ART, for women living with HIV. 
 * HIV.E.DE42: Already on ART at first antenatal care visit | The pregnant woman was already on antiretroviral therapy (ART) at first antenatal care visit 
 * HIV.E.DE43: Newly on ART during pregnancy | The pregnant woman started ART during her pregnancy 
 * HIV.E.DE44: Newly on ART during labour and delivery | The woman started ART during labour and delivery 
 * HIV.E.DE46: Delivery date | Date on which the woman delivered 
 * HIV.E.DE67: Place of delivery | The type of place where the woman delivered 
 * HIV.E.DE68: Health facility | The woman delivered at a health facility 
 * HIV.E.DE69: Home | The woman delivered at home 
 * HIV.E.DE70: Other | The woman delivered at another location that is not at home or at a health facility 
 * HIV.E.DE85: ANC contact date | The date and time of the client's ANC contact (in the ANC DAK this is called 'Contact date') 
 * HIV.H.DE47: On ART | Client is currently taking ART 
 *
 * Additional Context
 * - what it measures: This indicator measures whether a recommended course of ART has been provided to HIV-positive pregnant women.
 * - rationale: • Providing ART for HIV-positive pregnant women is a critical strategy for preventing vertical transmission of HIV. | • In an era of &quot;Treat All&quot;, all HIV-positive pregnant women should be given a recommended regimen of ART as soon as possible after diagnosis, including during labour and delivery.
 * - method: a) For the numerator and programme-based/service delivery denominator: Programme records (for example, PMTCT registers, ARV registers, labour and delivery registers) |  | b) For the population-based denominator: Modelling-based estimates (for example, Spectrum AIM) |  | The recommended reporting period is 12 months.
 * 
 * Suggested Scoring Method: proportion | http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm
 */

library HIVIND40Logic

// Included Libraries
using FHIR version '4.0.1'

include HIVIndicatorCommon version '0.0.1' called HIC
include FHIRHelpers version '4.0.1'
include WHOCommon called WCom
include FHIRCommon called FC

// Indicator Definition
</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>
  </text>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability">
    <valueCode value="computable"/>
  </extension>
  <url value="http://smart.who.int/HIV/Library/HIVIND40Logic"/>
  <version value="0.1.0"/>
  <name value="HIVIND40Logic"/>
  <title value="HIV.IND.40 Logic"/>
  <status value="draft"/>
  <experimental value="true"/>
  <type>
    <coding>
      <system value="http://terminology.hl7.org/CodeSystem/library-type"/>
      <code value="logic-library"/>
    </coding>
  </type>
  <date value="2024-07-01T05:12:03+00:00"/>
  <publisher value="WHO"/>
  <contact>
    <name value="WHO"/>
    <telecom>
      <system value="url"/>
      <value value="http://who.int"/>
    </telecom>
  </contact>
  <description value="% of HIV-positive pregnant women who received ART during pregnancy and/or at labour and delivery"/>
  <content>
    <contentType value="text/cql"/>
    <data value="LyoKICogTGlicmFyeTogSElWLklORC40MCBMb2dpYwogKiBSZWYgTm86IFZFUi40CiAqIFNob3J0IE5hbWU6IEFSVCBjb3ZlcmFnZSBpbiBwcmVnbmFudCB3b21lbgogKgogKiBEZWZpbml0aW9uOiAlIG9mIEhJVi1wb3NpdGl2ZSBwcmVnbmFudCB3b21lbiB3aG8gcmVjZWl2ZWQgQVJUIGR1cmluZyBwcmVnbmFuY3kgYW5kL29yIGF0IGxhYm91ciBhbmQgZGVsaXZlcnkKICoKICogTnVtZXJhdG9yOiBOdW1iZXIgb2YgSElWLXBvc2l0aXZlIHByZWduYW50IHdvbWVuIHdobyBkZWxpdmVyZWQgZHVyaW5nIHRoZSByZXBvcnRpbmcgcGVyaW9kIGFuZCByZWNlaXZlZCBBUlQgZHVyaW5nIHByZWduYW5jeSBhbmQvb3IgYXQgbGFib3VyIGFuZCBkZWxpdmVyeQogKiBOdW1lcmF0b3IgQ2FsY3VsYXRpb246IENPVU5UIG9mIHdvbWVuIHdpdGggIkhJViBzdGF0dXMiPSdISVYtcG9zaXRpdmUnIEFORCAiRGVsaXZlcnkgZGF0ZSIgaW4gdGhlIHJlcG9ydGluZyBwZXJpb2QgQU5EICgoIk9uIEFSVCI9VHJ1ZSBhdCBsYWJvdXIgYW5kIGRlbGl2ZXJ5KSBPUiAoIk9uIEFSVCI9VHJ1ZSBkdXJpbmcgcHJlZ25hbmN5LCBmb3IgdGhpcyBwcmVnbmFuY3kpKQogKiBOdW1lcmF0b3IgRXhjbHVzaW9uczogCiAqCiAqIERlbm9taW5hdG9yOiBhKSBQcm9ncmFtbWUtYmFzZWQvc2VydmljZSBkZWxpdmVyeSBkZW5vbWluYXRvciB8IE51bWJlciBvZiBISVYtcG9zaXRpdmUgcHJlZ25hbnQgd29tZW4gd2hvIGRlbGl2ZXJlZCBkdXJpbmcgdGhlIHJlcG9ydGluZyBwZXJpb2QgYW5kIGF0dGVuZGVkIEFOQyBvciBoYWQgYSBmYWNpbGl0eS1iYXNlZCBkZWxpdmVyeSB8IGIpIFBvcHVsYXRpb24tYmFzZWQgZGVub21pbmF0b3IgfCBOdW1iZXIgb2YgSElWLXBvc2l0aXZlIHByZWduYW50IHdvbWVuIHdobyBkZWxpdmVyZWQgZHVyaW5nIHRoZSByZXBvcnRpbmcgcGVyaW9kCiAqIERlbm9taW5hdG9yIENhbGN1bGF0aW9uOiBQcm9ncmFtbWUtYmFzZWQvc2VydmljZSBkZWxpdmVyeSBkZW5vbWluYXRvcjogfCBDT1VOVCBvZiB3b21lbiB3aXRoICJISVYgc3RhdHVzIj0nSElWLXBvc2l0aXZlJyBBTkQgIkRlbGl2ZXJ5IGRhdGUiIGluIHRoZSByZXBvcnRpbmcgcGVyaW9kIEFORCAoaGFkIGFuICJBTkMgY29udGFjdCBkYXRlIiBkdXJpbmcgcmVwb3J0aW5nIHBlcmlvZCBPUiAiUGxhY2Ugb2YgZGVsaXZlcnkiIHdhcyBhICdIZWFsdGggZmFjaWxpdHknKSB8ICB8IFBvcHVsYXRpb24tYmFzZWQgZGVub21pbmF0b3I6IHwgKk51bWJlciBvZiBISVYtcG9zaXRpdmUgcHJlZ25hbnQgd29tZW4gd2hvIGRlbGl2ZXJlZCBkdXJpbmcgdGhlIHJlcG9ydGluZyBwZXJpb2QKICogRGVub21pbmF0b3IgRXhjbHVzaW9uczogCiAqCiAqIERpc2FnZ3JlZ2F0aW9uczoKICogTnVtZXJhdG9yOgogKiDigKLCoFRpbWluZyBvZiBBUlQgaW5pdGlhdGlvbiAoMS4gYWxyZWFkeSBvbiBBUlQgYXQgZmlyc3QgQU5DIHZpc2l0LCAyLiBuZXdseSBvbiBBUlQgZHVyaW5nIHByZWduYW5jeSwgMy4gbmV3bHkgb24gQVJUIGR1cmluZyBsYWJvdXIgYW5kIGRlbGl2ZXJ5LCA0LiBvbiBub24tcmVjb21tZW5kZWQgQVJUIHJlZ2ltZW4pCiAqIAogKiBUaGUgcHJpbWFyeSBpbmRpY2F0b3IgY2FsY3VsYXRpb24gc2hvdWxkIGluY2x1ZGUgQVJUIHN0YXR1cyBjYXRlZ29yaWVzIDEsIDIgYW5kIDMuIFJlbW92aW5nIHRoZSB3b21lbiBpbiBjYXRlZ29yeSAxICJhbHJlYWR5IG9uIEFSVCBhdCBmaXJzdCBBTkMgdmlzaXQiIGZyb20gdGhlIG51bWVyYXRvciBhbmQgZGVub21pbmF0b3IgZ2l2ZXMgYSBtZWFzdXJlIG9mIEFSVCBjb3ZlcmFnZSBhbW9uZyBISVYtcG9zaXRpdmUgcHJlZ25hbnQgd29tZW4gbmV3bHkgZGlhZ25vc2VkIGR1cmluZyBBTkMuIERpdmlkaW5nIGNhdGVnb3J5IDIgYnkgdGhlIHN1bSBvZiBjYXRlZ29yaWVzIDIgYW5kIDMgZ2l2ZXMgdGhlIHByb3BvcnRpb24gb2YgbmV3IEFSVCBpbml0aWF0aW9ucyBvY2N1cnJpbmcgZHVyaW5nIHByZWduYW5jeSByYXRoZXIgdGhhbiBhdCBkZWxpdmVyeS4gQ2FsY3VsYXRpbmcgdGhlIGluZGljYXRvciB3aXRoIHRob3NlIGluIGNhdGVnb3J5IDQgKG5vbi1yZWNvbW1lbmRlZCBBUlYgcmVnaW1lbikgaW5jbHVkZWQgaW4gdGhlIG51bWVyYXRvciBnaXZlcyBhIGJyb2FkZXIgbWVhc3VyZSwgdGhhdCBpcywgY292ZXJhZ2Ugb2YgSElWLXBvc2l0aXZlIHByZWduYW50IHdvbWVuIHJlY2VpdmluZyBhbnkgQVJWIGRydWcuCiAqIAogKiBEaXNhZ2dyZWdhdGlvbiBFbGVtZW50czogVGltaW5nIG9mIEFSVCBpbml0aWF0aW9uCiAqCiAqIE51bWVyYXRvciBhbmQgRGVub21pbmF0b3IgRWxlbWVudHM6CiAqIEFOQyBjb250YWN0IGRhdGUgfCBEZWxpdmVyeSBkYXRlIHwgSElWIHN0YXR1cyB8IE9uIEFSVCB8IFBsYWNlIG9mIGRlbGl2ZXJ5CiAqCiAqIFJlZmVyZW5jZTogQ29uc29saWRhdGVkIGd1aWRlbGluZXMgb24gcGVyc29uLWNlbnRyZWQgSElWIHN0cmF0ZWdpYyBpbmZvcm1hdGlvbjogc3RyZW5ndGhlbmluZyByb3V0aW5lIGRhdGEgZm9yIGltcGFjdC4gR2VuZXZhOiBXb3JsZCBIZWFsdGggT3JnYW5pemF0aW9uOyAyMDIyCiAqIAogKiBEYXRhIENvbmNlcHRzOgogKiAgCiAqIEhJVi5CLkRFMTE1OiBISVYgc3RhdHVzIHwgSElWIHN0YXR1cyByZXBvcnRlZCBhZnRlciBhcHBseWluZyB0aGUgbmF0aW9uYWwgSElWIHRlc3RpbmcgYWxnb3JpdGhtLiBObyBzaW5nbGUgSElWIHRlc3QgY2FuIHByb3ZpZGUgYW4gSElWLXBvc2l0aXZlIGRpYWdub3Npcy4gCiAqIEhJVi5CLkRFMTE2OiBISVYtcG9zaXRpdmUgfCBDbGllbnQgaXMgSElWLXBvc2l0aXZlIAogKiBISVYuQi5ERTExNzogSElWLW5lZ2F0aXZlIHwgQ2xpZW50IGlzIEhJVi1uZWdhdGl2ZSAKICogSElWLkIuREUxMTg6IFVua25vd24gfCBDbGllbnQgaGFzIHVua25vd24gSElWIHN0YXR1cyAKICogSElWLkQuREUzODogT24gQVJUIHwgQ2xpZW50IGlzIGN1cnJlbnRseSB0YWtpbmcgQVJUIAogKiBISVYuRS5ERTQxOiBUaW1pbmcgb2YgQVJUIGluaXRpYXRpb24gfCBXaGVuIHRoZSBwcmVnbmFudCB3b21hbiBvciBtb3RoZXIgaW5pdGlhdGVkIEFSVCwgZm9yIHdvbWVuIGxpdmluZyB3aXRoIEhJVi4gCiAqIEhJVi5FLkRFNDI6IEFscmVhZHkgb24gQVJUIGF0IGZpcnN0IGFudGVuYXRhbCBjYXJlIHZpc2l0IHwgVGhlIHByZWduYW50IHdvbWFuIHdhcyBhbHJlYWR5IG9uIGFudGlyZXRyb3ZpcmFsIHRoZXJhcHkgKEFSVCkgYXQgZmlyc3QgYW50ZW5hdGFsIGNhcmUgdmlzaXQgCiAqIEhJVi5FLkRFNDM6IE5ld2x5IG9uIEFSVCBkdXJpbmcgcHJlZ25hbmN5IHwgVGhlIHByZWduYW50IHdvbWFuIHN0YXJ0ZWQgQVJUIGR1cmluZyBoZXIgcHJlZ25hbmN5IAogKiBISVYuRS5ERTQ0OiBOZXdseSBvbiBBUlQgZHVyaW5nIGxhYm91ciBhbmQgZGVsaXZlcnkgfCBUaGUgd29tYW4gc3RhcnRlZCBBUlQgZHVyaW5nIGxhYm91ciBhbmQgZGVsaXZlcnkgCiAqIEhJVi5FLkRFNDY6IERlbGl2ZXJ5IGRhdGUgfCBEYXRlIG9uIHdoaWNoIHRoZSB3b21hbiBkZWxpdmVyZWQgCiAqIEhJVi5FLkRFNjc6IFBsYWNlIG9mIGRlbGl2ZXJ5IHwgVGhlIHR5cGUgb2YgcGxhY2Ugd2hlcmUgdGhlIHdvbWFuIGRlbGl2ZXJlZCAKICogSElWLkUuREU2ODogSGVhbHRoIGZhY2lsaXR5IHwgVGhlIHdvbWFuIGRlbGl2ZXJlZCBhdCBhIGhlYWx0aCBmYWNpbGl0eSAKICogSElWLkUuREU2OTogSG9tZSB8IFRoZSB3b21hbiBkZWxpdmVyZWQgYXQgaG9tZSAKICogSElWLkUuREU3MDogT3RoZXIgfCBUaGUgd29tYW4gZGVsaXZlcmVkIGF0IGFub3RoZXIgbG9jYXRpb24gdGhhdCBpcyBub3QgYXQgaG9tZSBvciBhdCBhIGhlYWx0aCBmYWNpbGl0eSAKICogSElWLkUuREU4NTogQU5DIGNvbnRhY3QgZGF0ZSB8IFRoZSBkYXRlIGFuZCB0aW1lIG9mIHRoZSBjbGllbnQncyBBTkMgY29udGFjdCAoaW4gdGhlIEFOQyBEQUsgdGhpcyBpcyBjYWxsZWQgJ0NvbnRhY3QgZGF0ZScpIAogKiBISVYuSC5ERTQ3OiBPbiBBUlQgfCBDbGllbnQgaXMgY3VycmVudGx5IHRha2luZyBBUlQgCiAqCiAqIEFkZGl0aW9uYWwgQ29udGV4dAogKiAtIHdoYXQgaXQgbWVhc3VyZXM6IFRoaXMgaW5kaWNhdG9yIG1lYXN1cmVzIHdoZXRoZXIgYSByZWNvbW1lbmRlZCBjb3Vyc2Ugb2YgQVJUIGhhcyBiZWVuIHByb3ZpZGVkIHRvIEhJVi1wb3NpdGl2ZSBwcmVnbmFudCB3b21lbi4KICogLSByYXRpb25hbGU6IOKAoiBQcm92aWRpbmcgQVJUIGZvciBISVYtcG9zaXRpdmUgcHJlZ25hbnQgd29tZW4gaXMgYSBjcml0aWNhbCBzdHJhdGVneSBmb3IgcHJldmVudGluZyB2ZXJ0aWNhbCB0cmFuc21pc3Npb24gb2YgSElWLiB8IOKAoiBJbiBhbiBlcmEgb2YgIlRyZWF0IEFsbCIsIGFsbCBISVYtcG9zaXRpdmUgcHJlZ25hbnQgd29tZW4gc2hvdWxkIGJlIGdpdmVuIGEgcmVjb21tZW5kZWQgcmVnaW1lbiBvZiBBUlQgYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciBkaWFnbm9zaXMsIGluY2x1ZGluZyBkdXJpbmcgbGFib3VyIGFuZCBkZWxpdmVyeS4KICogLSBtZXRob2Q6IGEpIEZvciB0aGUgbnVtZXJhdG9yIGFuZCBwcm9ncmFtbWUtYmFzZWQvc2VydmljZSBkZWxpdmVyeSBkZW5vbWluYXRvcjogUHJvZ3JhbW1lIHJlY29yZHMgKGZvciBleGFtcGxlLCBQTVRDVCByZWdpc3RlcnMsIEFSViByZWdpc3RlcnMsIGxhYm91ciBhbmQgZGVsaXZlcnkgcmVnaXN0ZXJzKSB8ICB8IGIpIEZvciB0aGUgcG9wdWxhdGlvbi1iYXNlZCBkZW5vbWluYXRvcjogTW9kZWxsaW5nLWJhc2VkIGVzdGltYXRlcyAoZm9yIGV4YW1wbGUsIFNwZWN0cnVtIEFJTSkgfCAgfCBUaGUgcmVjb21tZW5kZWQgcmVwb3J0aW5nIHBlcmlvZCBpcyAxMiBtb250aHMuCiAqIAogKiBTdWdnZXN0ZWQgU2NvcmluZyBNZXRob2Q6IHByb3BvcnRpb24gfCBodHRwOi8vaGw3Lm9yZy9maGlyL3VzL2NxZm1lYXN1cmVzL1N0cnVjdHVyZURlZmluaXRpb24vcHJvcG9ydGlvbi1tZWFzdXJlLWNxZm0KICovCgpsaWJyYXJ5IEhJVklORDQwTG9naWMKCi8vIEluY2x1ZGVkIExpYnJhcmllcwp1c2luZyBGSElSIHZlcnNpb24gJzQuMC4xJwoKaW5jbHVkZSBISVZJbmRpY2F0b3JDb21tb24gdmVyc2lvbiAnMC4wLjEnIGNhbGxlZCBISUMKaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICc0LjAuMScKaW5jbHVkZSBXSE9Db21tb24gY2FsbGVkIFdDb20KaW5jbHVkZSBGSElSQ29tbW9uIGNhbGxlZCBGQwoKLy8gSW5kaWNhdG9yIERlZmluaXRpb24K"/>
  </content>
  <content>
    <contentType value="application/elm+xml"/>
  </content>
</Library>