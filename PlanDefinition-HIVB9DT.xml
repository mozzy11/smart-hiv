<?xml version="1.0" encoding="UTF-8"?>

<PlanDefinition xmlns="http://hl7.org/fhir">
  <id value="HIVB9DT"/>
  <meta>
    <profile value="http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-recommendationdefinition"/>
    <profile value="http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareableplandefinition"/>
    <profile value="http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishableplandefinition"/>
  </meta>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><p class="res-header-id"><b>Generated Narrative: PlanDefinition HIVB9DT</b></p><a name="HIVB9DT"> </a><a name="hcHIVB9DT"> </a><a name="HIVB9DT-en-US"> </a><p><b>url</b>: <a href="PlanDefinition-HIVB9DT.html">PlanDefinition HIV.B9.DT Determine retest recommendation</a></p><p><b>version</b>: 0.2.0</p><p><b>name</b>: HIVB9DT</p><p><b>title</b>: HIV.B9.DT Determine retest recommendation</p><p><b>type</b>: <span title="Codes:{http://terminology.hl7.org/CodeSystem/plan-definition-type eca-rule}">ECA Rule</span></p><p><b>status</b>: Draft</p><p><b>experimental</b>: true</p><p><b>date</b>: 2024-08-06 17:04:54+0000</p><p><b>publisher</b>: WHO</p><p><b>contact</b>: WHO: <a href="http://who.int">http://who.int</a></p><p><b>description</b>: </p><div><p>HIV restesting recommendations</p>
</div><h3>RelatedArtifacts</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Type</b></td><td><b>Citation</b></td></tr><tr><td style="display: none">*</td><td>Citation</td><td><div><p>Consolidated Guidelines on HIV Testing Services (2019)</p>
</div></td></tr></table><p><b>library</b>: <a href="Library-HIVB9DTLogic.html">HIV.B9.DT Logic</a></p><blockquote><p><b>action</b></p><p><b>textEquivalent</b>: Schedule an annual follow-up test</p><blockquote><p><b>condition</b></p><p><b>kind</b>: Applicability</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>text/cql-identifier</td><td>Schedule an annual follow-up test</td></tr></table></blockquote><p><b>type</b>: <span title="Codes:">create</span></p><p><b>definition</b>: <a href="ActivityDefinition-HIVB9DTScheduleFollowUp.html">HIV.B9.DT Schedule Follow-up Test</a></p><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: intent</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>Intent = 'plan'</td><td>CQL</td><td>'plan' from &quot;http://hl7.org/fhir/request-intent&quot;</td></tr></table></blockquote><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: code.coding</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>HIV Screening</td><td>CQL</td><td>'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'</td></tr></table></blockquote><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: occurrenceDateTime</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>At the recommended interval</td><td>text/cql-identifier</td><td>Schedule Date</td></tr></table></blockquote></blockquote><blockquote><p><b>action</b></p><p><b>textEquivalent</b>: Schedule quarterly retesting for PrEP users</p><blockquote><p><b>condition</b></p><p><b>kind</b>: Applicability</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>text/cql-identifier</td><td>Schedule quarterly retesting for PrEP users</td></tr></table></blockquote><p><b>type</b>: <span title="Codes:">create</span></p><p><b>definition</b>: <a href="ActivityDefinition-HIVB9DTScheduleFollowUp.html">HIV.B9.DT Schedule Follow-up Test</a></p><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: intent</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>Intent = 'plan'</td><td>CQL</td><td>'plan' from &quot;http://hl7.org/fhir/request-intent&quot;</td></tr></table></blockquote><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: code.coding</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>HIV Screening</td><td>CQL</td><td>'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'</td></tr></table></blockquote><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: occurrenceDateTime</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>At the recommended interval</td><td>text/cql-identifier</td><td>Schedule Date</td></tr></table></blockquote></blockquote><blockquote><p><b>action</b></p><p><b>textEquivalent</b>: Follow-up test recommended</p><blockquote><p><b>condition</b></p><p><b>kind</b>: Applicability</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>text/cql-identifier</td><td>Follow-up test recommended</td></tr></table></blockquote><p><b>type</b>: <span title="Codes:">create</span></p><p><b>definition</b>: <a href="ActivityDefinition-HIVB9DTScheduleFollowUp.html">HIV.B9.DT Schedule Follow-up Test</a></p><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: intent</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>Intent = 'proposal'</td><td>CQL</td><td>'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;</td></tr></table></blockquote><blockquote><p><b>dynamicValue</b></p><p><b>path</b>: code.coding</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Description</b></td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>HIV Screening</td><td>CQL</td><td>'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'</td></tr></table></blockquote></blockquote><blockquote><p><b>action</b></p><p><b>textEquivalent</b>: Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy</p><blockquote><p><b>condition</b></p><p><b>kind</b>: Applicability</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>text/cql-identifier</td><td>Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy</td></tr></table></blockquote><p><b>type</b>: <span title="Codes:">create</span></p><blockquote><p><b>action</b></p></blockquote><blockquote><p><b>action</b></p></blockquote><blockquote><p><b>action</b></p></blockquote></blockquote><blockquote><p><b>action</b></p><p><b>textEquivalent</b>: Schedule a follow-up tests for pregnant persons</p><blockquote><p><b>condition</b></p><p><b>kind</b>: Applicability</p><h3>Expressions</h3><table class="grid"><tr><td style="display: none">-</td><td><b>Language</b></td><td><b>Expression</b></td></tr><tr><td style="display: none">*</td><td>text/cql-identifier</td><td>Schedule a 'Follow-up test recommended date' at first ANC contact date</td></tr></table></blockquote><p><b>type</b>: <span title="Codes:">create</span></p><blockquote><p><b>action</b></p></blockquote><blockquote><p><b>action</b></p></blockquote><blockquote><p><b>action</b></p></blockquote></blockquote></div>
  </text>
  <extension url="http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability">
    <valueCode value="computable"/>
  </extension>
  <url value="http://smart.who.int/hiv/PlanDefinition/HIVB9DT"/>
  <version value="0.2.0"/>
  <name value="HIVB9DT"/>
  <title value="HIV.B9.DT Determine retest recommendation"/>
  <type>
    <coding>
      <system value="http://terminology.hl7.org/CodeSystem/plan-definition-type"/>
      <code value="eca-rule"/>
    </coding>
  </type>
  <status value="draft"/>
  <experimental value="true"/>
  <date value="2024-08-06T17:04:54+00:00"/>
  <publisher value="WHO"/>
  <contact>
    <name value="WHO"/>
    <telecom>
      <system value="url"/>
      <value value="http://who.int"/>
    </telecom>
  </contact>
  <description value="HIV restesting recommendations"/>
  <relatedArtifact>
    <type value="citation"/>
    <citation value="Consolidated Guidelines on HIV Testing Services (2019)"/>
  </relatedArtifact>
  <library value="http://smart.who.int/HIV/Library/HIVB2DTLogic"/>
  <action>
    <textEquivalent value="Schedule an annual follow-up test"/>
    <condition>
      <kind value="applicability"/>
      <expression>
        <language value="text/cql-identifier"/>
        <expression value="Schedule an annual follow-up test"/>
      </expression>
    </condition>
    <type>
      <coding>
        <code value="create"/>
      </coding>
    </type>
    <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
    <dynamicValue>
      <path value="intent"/>
      <expression>
        <description value="Intent = 'plan'"/>
        <language value="text/cql"/>
        <expression value="'plan' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
      </expression>
    </dynamicValue>
    <dynamicValue>
      <path value="code.coding"/>
      <expression>
        <description value="HIV Screening"/>
        <language value="text/cql"/>
        <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'"/>
      </expression>
    </dynamicValue>
    <dynamicValue>
      <path value="occurrenceDateTime"/>
      <expression>
        <description value="At the recommended interval"/>
        <language value="text/cql-identifier"/>
        <expression value="Schedule Date"/>
      </expression>
    </dynamicValue>
  </action>
  <action>
    <textEquivalent value="Schedule quarterly retesting for PrEP users"/>
    <condition>
      <kind value="applicability"/>
      <expression>
        <language value="text/cql-identifier"/>
        <expression value="Schedule quarterly retesting for PrEP users"/>
      </expression>
    </condition>
    <type>
      <coding>
        <code value="create"/>
      </coding>
    </type>
    <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
    <dynamicValue>
      <path value="intent"/>
      <expression>
        <description value="Intent = 'plan'"/>
        <language value="text/cql"/>
        <expression value="'plan' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
      </expression>
    </dynamicValue>
    <dynamicValue>
      <path value="code.coding"/>
      <expression>
        <description value="HIV Screening"/>
        <language value="text/cql"/>
        <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'"/>
      </expression>
    </dynamicValue>
    <dynamicValue>
      <path value="occurrenceDateTime"/>
      <expression>
        <description value="At the recommended interval"/>
        <language value="text/cql-identifier"/>
        <expression value="Schedule Date"/>
      </expression>
    </dynamicValue>
  </action>
  <action>
    <textEquivalent value="Follow-up test recommended"/>
    <condition>
      <kind value="applicability"/>
      <expression>
        <language value="text/cql-identifier"/>
        <expression value="Follow-up test recommended"/>
      </expression>
    </condition>
    <type>
      <coding>
        <code value="create"/>
      </coding>
    </type>
    <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
    <dynamicValue>
      <path value="intent"/>
      <expression>
        <description value="Intent = 'proposal'"/>
        <language value="text/cql"/>
        <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
      </expression>
    </dynamicValue>
    <dynamicValue>
      <path value="code.coding"/>
      <expression>
        <description value="HIV Screening"/>
        <language value="text/cql"/>
        <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'"/>
      </expression>
    </dynamicValue>
  </action>
  <action>
    <textEquivalent value="Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy"/>
    <condition>
      <kind value="applicability"/>
      <expression>
        <language value="text/cql-identifier"/>
        <expression value="Schedule an HIV test, syphilis test, hepatitis B test as early as possible during this pregnancy"/>
      </expression>
    </condition>
    <type>
      <coding>
        <code value="create"/>
      </coding>
    </type>
    <action>
      <textEquivalent value="Schedule an HIV test as early as possible"/>
      <type>
        <coding>
          <code value="create"/>
        </coding>
      </type>
      <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
      <dynamicValue>
        <path value="intent"/>
        <expression>
          <description value="Intent = 'proposal'"/>
          <language value="text/cql"/>
          <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
        </expression>
      </dynamicValue>
      <dynamicValue>
        <path value="code.coding"/>
        <expression>
          <description value="HIV test"/>
          <language value="text/cql"/>
          <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV test'"/>
        </expression>
      </dynamicValue>
    </action>
    <action>
      <textEquivalent value="Schedule a Syphilis test as early as possible"/>
      <type>
        <coding>
          <code value="create"/>
        </coding>
      </type>
      <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
      <dynamicValue>
        <path value="intent"/>
        <expression>
          <description value="Intent = 'proposal'"/>
          <language value="text/cql"/>
          <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
        </expression>
      </dynamicValue>
      <dynamicValue>
        <path value="code.coding"/>
        <expression>
          <description value="Syphilis test"/>
          <language value="text/cql"/>
          <expression value="'40675008' from &quot;SNOMED-CT&quot; display 'Syphilis test'"/>
        </expression>
      </dynamicValue>
    </action>
    <action>
      <textEquivalent value="Schedule a Heptatitis test as early as possible"/>
      <type>
        <coding>
          <code value="create"/>
        </coding>
      </type>
      <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
      <dynamicValue>
        <path value="intent"/>
        <expression>
          <description value="Intent = 'proposal'"/>
          <language value="text/cql"/>
          <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
        </expression>
      </dynamicValue>
      <dynamicValue>
        <path value="code.coding"/>
        <expression>
          <description value="Heptatitis B test"/>
          <language value="text/cql"/>
          <expression value="'313476009' from &quot;SNOMED-CT&quot; display 'Heptatitis B test'"/>
        </expression>
      </dynamicValue>
    </action>
  </action>
  <action>
    <textEquivalent value="Schedule a follow-up tests for pregnant persons"/>
    <condition>
      <kind value="applicability"/>
      <expression>
        <language value="text/cql-identifier"/>
        <expression value="Schedule a 'Follow-up test recommended date' at first ANC contact date"/>
      </expression>
    </condition>
    <type>
      <coding>
        <code value="create"/>
      </coding>
    </type>
    <action>
      <textEquivalent value="Schedule a follow-up test recommended date at first ANC contact date"/>
      <type>
        <coding>
          <code value="create"/>
        </coding>
      </type>
      <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
      <dynamicValue>
        <path value="intent"/>
        <expression>
          <description value="Intent = 'proposal'"/>
          <language value="text/cql"/>
          <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
        </expression>
      </dynamicValue>
      <dynamicValue>
        <path value="code.coding"/>
        <expression>
          <description value="HIV Screening"/>
          <language value="text/cql"/>
          <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'"/>
        </expression>
      </dynamicValue>
    </action>
    <action>
      <textEquivalent value="Schedule a follow-up test recommended date during a third trimester visit"/>
      <type>
        <coding>
          <code value="create"/>
        </coding>
      </type>
      <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
      <dynamicValue>
        <path value="intent"/>
        <expression>
          <description value="Intent = 'proposal'"/>
          <language value="text/cql"/>
          <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
        </expression>
      </dynamicValue>
      <dynamicValue>
        <path value="code.coding"/>
        <expression>
          <description value="HIV Screening"/>
          <language value="text/cql"/>
          <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'"/>
        </expression>
      </dynamicValue>
    </action>
    <action>
      <textEquivalent value="Schedule a follow-up test recommended date either two-weeks, 6 months or 9 months post delivery"/>
      <type>
        <coding>
          <code value="create"/>
        </coding>
      </type>
      <definitionCanonical value="http://smart.who.int/hiv/ActivityDefinition/HIVB9DTScheduleFollowUp"/>
      <dynamicValue>
        <path value="intent"/>
        <expression>
          <description value="Intent = 'proposal'"/>
          <language value="text/cql"/>
          <expression value="'proposal' from &quot;http://hl7.org/fhir/request-intent&quot;"/>
        </expression>
      </dynamicValue>
      <dynamicValue>
        <path value="code.coding"/>
        <expression>
          <description value="HIV Screening"/>
          <language value="text/cql"/>
          <expression value="'171121004' from &quot;SNOMED-CT&quot; display 'HIV screening'"/>
        </expression>
      </dynamicValue>
    </action>
  </action>
</PlanDefinition>