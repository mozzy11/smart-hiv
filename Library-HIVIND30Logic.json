{
  "resourceType" : "Library",
  "id" : "HIVIND30Logic",
  "meta" : {
    "profile" : ["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary",
    "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary",
    "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library",
    "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-module"]
  },
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: Library HIVIND30Logic</b></p><a name=\"HIVIND30Logic\"> </a><a name=\"hcHIVIND30Logic\"> </a><a name=\"hcHIVIND30Logic-en-US\"> </a><h2>Contents</h2><p><code>text/cql</code></p><pre><code class=\"language-sql\">/*\n * Library: HIV.IND.30 Logic\n * Ref No: ART.4\n * Short Name: New ART patients\n *\n * Definition: Number of people living with HIV who initiated ART\n *\n * Numerator: Number of people living with HIV who initiated ART in accordance with national treatment guidelines during the reporting period\n * Numerator Calculation: COUNT of clients with &quot;HIV status&quot;='HIV-positive' AND &quot;On ART&quot;=True AND &quot;ART start date&quot; is within reporting period\n * Numerator Exclusions: \n *\n * Denominator: 1\n * Denominator Calculation: 1\n * Denominator Exclusions: \n *\n * Disaggregations:\n * •\u00a0Gender (female, male, other*)\n * • Age (0–4, 5–9, 10–14, 15–19, 20–24, 25–49, 50+ years)**\n * •\u00a0Key populations (men who have sex with men, people living in prisons and other closed settings, people who inject drugs, sex workers, trans and gender diverse people)***\n * • Other priority populations\n * •\u00a0Cities and other administrative regions of epidemiologic importance\n * \n * Disaggregation Elements: Gender | Age | Key population member type | Other priority populations\n *\n * Numerator and Denominator Elements:\n * ART start date | HIV status | On ART\n *\n * Reference: Consolidated guidelines on person-centred HIV strategic information: strengthening routine data for impact. Geneva: World Health Organization; 2022\n * \n * Data Concepts:\n *  \n * HIV.A.DE17: Age | Calculated age (number of years) of the client based on date of birth \n * HIV.A.DE18: Gender* | Gender of the client* \n * HIV.A.DE19: Female | Client identifies as female \n * HIV.A.DE20: Male | Client identifies as male \n * HIV.A.DE21: Transgender male | Client identifies as transgender male \n * HIV.A.DE22: Transgender female | Client identifies as transgender female \n * HIV.A.DE23: Other | Additional category \n * HIV.B.DE50: Key population member type* | The type of key population that the client is included in \n * HIV.B.DE51: Sex worker | Client is a sex worker \n * HIV.B.DE52: Men who have sex with men | Client is a man who has sex with men \n * HIV.B.DE53: Trans and gender-diverse people | Client identifies as trans and gender-diverse \n * HIV.B.DE54: People who inject drugs | Client is a person who injects drugs \n * HIV.B.DE55: People living in prisons and other closed settings | Client lives in a prison or another closed setting \n * HIV.B.DE72: ART start date | The date on which the client started or restarted antiretroviral therapy (ART) \n * HIV.B.DE115: HIV status | HIV status reported after applying the national HIV testing algorithm. No single HIV test can provide an HIV-positive diagnosis. \n * HIV.B.DE116: HIV-positive | Client is HIV-positive \n * HIV.B.DE117: HIV-negative | Client is HIV-negative \n * HIV.B.DE118: Unknown | Client has unknown HIV status \n * HIV.D.DE38: On ART | Client is currently taking ART \n * HIV.D.DE39: ART start date | The date on which the client started or restarted ART \n * HIV.E.DE114: Key population member type* | The type of key population that the infant's mother is included in \n * HIV.E.DE115: Sex worker | Infant's mother is a sex worker \n * HIV.E.DE116: People who inject drugs | Infant's mother is a person who injects drugs \n * HIV.E.DE117: Trans and gender-diverse people | Infant's mother identifies as trans and gender-diverse \n * HIV.E.DE118: People living in prisons and other closed setting | Infant's mother is in a prison or closed setting \n * HIV.H.DE47: On ART | Client is currently taking ART  \n * HIV.Config.DE19: Other priority populations | Other populations of priority of HIV prevention and care in local context (provided during adaptation)\n *\n * Additional Context\n * - what it measures: This indicator measures the expansion of ART programmes.\n * - rationale: •\u00a0Monitoring trends in new ART patients provides managers with important information for forecasting the need for ARV and allocation of staff to ensure quality of care for ART. | •\u00a0Initiation of ART is one of the sentinel events for HIV surveillance.\n * - method: HIV patient monitoring tools (for example, patient records/EMRs, ART registers).  |  | The recommended reporting period is 12 months. \n * \n * Suggested Scoring Method: continuous-variable | http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cv-measure-cqfm\n */\n\nlibrary HIVIND30Logic\n\n// Included Libraries\nusing FHIR version '4.0.1'\n\ninclude HIVIndicatorCommon version '0.0.1' called HIC\ninclude FHIRHelpers version '4.0.1'\ninclude WHOCommon called WCom\ninclude FHIRCommon called FC\n\n// Indicator Definition\n\nparameter &quot;Measurement Period&quot; Interval&lt;Date&gt; default Interval[@2020-01-01, @2020-01-31]\n \ncontext Patient\n\n define &quot;numerator&quot;:\n   (exists(HIC.&quot;HIV Positive Condition&quot; C\n\twhere C.onset before end of &quot;Measurement Period&quot;)\n\tor \n\texists(HIC.&quot;HIV Positive Observation&quot; O\n\twhere (O.issued before end of &quot;Measurement Period&quot;)\n\t)) and \n\texists(HIC.&quot;HIV Treatment Active&quot; H\n   where H.effective starts during &quot;Measurement Period&quot;)\n\n\n\n/*\n * Disaggregators\n */\n\ndefine &quot;Administrative Gender Stratifier&quot;:\n\tHIC.&quot;By Administrative Gender Stratifier&quot;\n\ndefine &quot;Age Stratifier&quot;:\n\tHIC.&quot;By Age Stratifier&quot;\n\ndefine &quot;Geographic Region Stratifier&quot;:\n\tHIC.&quot;By Geographic Region Stratifier&quot;\n\ndefine &quot;patientGroups Stratifier&quot;:\n\tHIC.&quot;patientGroups&quot;\n</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>"
  },
  "extension" : [{
    "url" : "http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability",
    "valueCode" : "computable"
  }],
  "url" : "http://smart.who.int/HIV/Library/HIVIND30Logic",
  "version" : "0.1.0",
  "name" : "HIVIND30Logic",
  "title" : "HIV.IND.30 Logic",
  "status" : "draft",
  "experimental" : true,
  "type" : {
    "coding" : [{
      "system" : "http://terminology.hl7.org/CodeSystem/library-type",
      "code" : "logic-library"
    }]
  },
  "date" : "2024-07-01T05:12:03+00:00",
  "publisher" : "WHO",
  "contact" : [{
    "name" : "WHO",
    "telecom" : [{
      "system" : "url",
      "value" : "http://who.int"
    }]
  }],
  "description" : "Number of people living with HIV who initiated ART",
  "content" : [{
    "contentType" : "text/cql",
    "data" : "LyoKICogTGlicmFyeTogSElWLklORC4zMCBMb2dpYwogKiBSZWYgTm86IEFSVC40CiAqIFNob3J0IE5hbWU6IE5ldyBBUlQgcGF0aWVudHMKICoKICogRGVmaW5pdGlvbjogTnVtYmVyIG9mIHBlb3BsZSBsaXZpbmcgd2l0aCBISVYgd2hvIGluaXRpYXRlZCBBUlQKICoKICogTnVtZXJhdG9yOiBOdW1iZXIgb2YgcGVvcGxlIGxpdmluZyB3aXRoIEhJViB3aG8gaW5pdGlhdGVkIEFSVCBpbiBhY2NvcmRhbmNlIHdpdGggbmF0aW9uYWwgdHJlYXRtZW50IGd1aWRlbGluZXMgZHVyaW5nIHRoZSByZXBvcnRpbmcgcGVyaW9kCiAqIE51bWVyYXRvciBDYWxjdWxhdGlvbjogQ09VTlQgb2YgY2xpZW50cyB3aXRoICJISVYgc3RhdHVzIj0nSElWLXBvc2l0aXZlJyBBTkQgIk9uIEFSVCI9VHJ1ZSBBTkQgIkFSVCBzdGFydCBkYXRlIiBpcyB3aXRoaW4gcmVwb3J0aW5nIHBlcmlvZAogKiBOdW1lcmF0b3IgRXhjbHVzaW9uczogCiAqCiAqIERlbm9taW5hdG9yOiAxCiAqIERlbm9taW5hdG9yIENhbGN1bGF0aW9uOiAxCiAqIERlbm9taW5hdG9yIEV4Y2x1c2lvbnM6IAogKgogKiBEaXNhZ2dyZWdhdGlvbnM6CiAqIOKAosKgR2VuZGVyIChmZW1hbGUsIG1hbGUsIG90aGVyKikKICog4oCiIEFnZSAoMOKAkzQsIDXigJM5LCAxMOKAkzE0LCAxNeKAkzE5LCAyMOKAkzI0LCAyNeKAkzQ5LCA1MCsgeWVhcnMpKioKICog4oCiwqBLZXkgcG9wdWxhdGlvbnMgKG1lbiB3aG8gaGF2ZSBzZXggd2l0aCBtZW4sIHBlb3BsZSBsaXZpbmcgaW4gcHJpc29ucyBhbmQgb3RoZXIgY2xvc2VkIHNldHRpbmdzLCBwZW9wbGUgd2hvIGluamVjdCBkcnVncywgc2V4IHdvcmtlcnMsIHRyYW5zIGFuZCBnZW5kZXIgZGl2ZXJzZSBwZW9wbGUpKioqCiAqIOKAoiBPdGhlciBwcmlvcml0eSBwb3B1bGF0aW9ucwogKiDigKLCoENpdGllcyBhbmQgb3RoZXIgYWRtaW5pc3RyYXRpdmUgcmVnaW9ucyBvZiBlcGlkZW1pb2xvZ2ljIGltcG9ydGFuY2UKICogCiAqIERpc2FnZ3JlZ2F0aW9uIEVsZW1lbnRzOiBHZW5kZXIgfCBBZ2UgfCBLZXkgcG9wdWxhdGlvbiBtZW1iZXIgdHlwZSB8IE90aGVyIHByaW9yaXR5IHBvcHVsYXRpb25zCiAqCiAqIE51bWVyYXRvciBhbmQgRGVub21pbmF0b3IgRWxlbWVudHM6CiAqIEFSVCBzdGFydCBkYXRlIHwgSElWIHN0YXR1cyB8IE9uIEFSVAogKgogKiBSZWZlcmVuY2U6IENvbnNvbGlkYXRlZCBndWlkZWxpbmVzIG9uIHBlcnNvbi1jZW50cmVkIEhJViBzdHJhdGVnaWMgaW5mb3JtYXRpb246IHN0cmVuZ3RoZW5pbmcgcm91dGluZSBkYXRhIGZvciBpbXBhY3QuIEdlbmV2YTogV29ybGQgSGVhbHRoIE9yZ2FuaXphdGlvbjsgMjAyMgogKiAKICogRGF0YSBDb25jZXB0czoKICogIAogKiBISVYuQS5ERTE3OiBBZ2UgfCBDYWxjdWxhdGVkIGFnZSAobnVtYmVyIG9mIHllYXJzKSBvZiB0aGUgY2xpZW50IGJhc2VkIG9uIGRhdGUgb2YgYmlydGggCiAqIEhJVi5BLkRFMTg6IEdlbmRlciogfCBHZW5kZXIgb2YgdGhlIGNsaWVudCogCiAqIEhJVi5BLkRFMTk6IEZlbWFsZSB8IENsaWVudCBpZGVudGlmaWVzIGFzIGZlbWFsZSAKICogSElWLkEuREUyMDogTWFsZSB8IENsaWVudCBpZGVudGlmaWVzIGFzIG1hbGUgCiAqIEhJVi5BLkRFMjE6IFRyYW5zZ2VuZGVyIG1hbGUgfCBDbGllbnQgaWRlbnRpZmllcyBhcyB0cmFuc2dlbmRlciBtYWxlIAogKiBISVYuQS5ERTIyOiBUcmFuc2dlbmRlciBmZW1hbGUgfCBDbGllbnQgaWRlbnRpZmllcyBhcyB0cmFuc2dlbmRlciBmZW1hbGUgCiAqIEhJVi5BLkRFMjM6IE90aGVyIHwgQWRkaXRpb25hbCBjYXRlZ29yeSAKICogSElWLkIuREU1MDogS2V5IHBvcHVsYXRpb24gbWVtYmVyIHR5cGUqIHwgVGhlIHR5cGUgb2Yga2V5IHBvcHVsYXRpb24gdGhhdCB0aGUgY2xpZW50IGlzIGluY2x1ZGVkIGluIAogKiBISVYuQi5ERTUxOiBTZXggd29ya2VyIHwgQ2xpZW50IGlzIGEgc2V4IHdvcmtlciAKICogSElWLkIuREU1MjogTWVuIHdobyBoYXZlIHNleCB3aXRoIG1lbiB8IENsaWVudCBpcyBhIG1hbiB3aG8gaGFzIHNleCB3aXRoIG1lbiAKICogSElWLkIuREU1MzogVHJhbnMgYW5kIGdlbmRlci1kaXZlcnNlIHBlb3BsZSB8IENsaWVudCBpZGVudGlmaWVzIGFzIHRyYW5zIGFuZCBnZW5kZXItZGl2ZXJzZSAKICogSElWLkIuREU1NDogUGVvcGxlIHdobyBpbmplY3QgZHJ1Z3MgfCBDbGllbnQgaXMgYSBwZXJzb24gd2hvIGluamVjdHMgZHJ1Z3MgCiAqIEhJVi5CLkRFNTU6IFBlb3BsZSBsaXZpbmcgaW4gcHJpc29ucyBhbmQgb3RoZXIgY2xvc2VkIHNldHRpbmdzIHwgQ2xpZW50IGxpdmVzIGluIGEgcHJpc29uIG9yIGFub3RoZXIgY2xvc2VkIHNldHRpbmcgCiAqIEhJVi5CLkRFNzI6IEFSVCBzdGFydCBkYXRlIHwgVGhlIGRhdGUgb24gd2hpY2ggdGhlIGNsaWVudCBzdGFydGVkIG9yIHJlc3RhcnRlZCBhbnRpcmV0cm92aXJhbCB0aGVyYXB5IChBUlQpIAogKiBISVYuQi5ERTExNTogSElWIHN0YXR1cyB8IEhJViBzdGF0dXMgcmVwb3J0ZWQgYWZ0ZXIgYXBwbHlpbmcgdGhlIG5hdGlvbmFsIEhJViB0ZXN0aW5nIGFsZ29yaXRobS4gTm8gc2luZ2xlIEhJViB0ZXN0IGNhbiBwcm92aWRlIGFuIEhJVi1wb3NpdGl2ZSBkaWFnbm9zaXMuIAogKiBISVYuQi5ERTExNjogSElWLXBvc2l0aXZlIHwgQ2xpZW50IGlzIEhJVi1wb3NpdGl2ZSAKICogSElWLkIuREUxMTc6IEhJVi1uZWdhdGl2ZSB8IENsaWVudCBpcyBISVYtbmVnYXRpdmUgCiAqIEhJVi5CLkRFMTE4OiBVbmtub3duIHwgQ2xpZW50IGhhcyB1bmtub3duIEhJViBzdGF0dXMgCiAqIEhJVi5ELkRFMzg6IE9uIEFSVCB8IENsaWVudCBpcyBjdXJyZW50bHkgdGFraW5nIEFSVCAKICogSElWLkQuREUzOTogQVJUIHN0YXJ0IGRhdGUgfCBUaGUgZGF0ZSBvbiB3aGljaCB0aGUgY2xpZW50IHN0YXJ0ZWQgb3IgcmVzdGFydGVkIEFSVCAKICogSElWLkUuREUxMTQ6IEtleSBwb3B1bGF0aW9uIG1lbWJlciB0eXBlKiB8IFRoZSB0eXBlIG9mIGtleSBwb3B1bGF0aW9uIHRoYXQgdGhlIGluZmFudCdzIG1vdGhlciBpcyBpbmNsdWRlZCBpbiAKICogSElWLkUuREUxMTU6IFNleCB3b3JrZXIgfCBJbmZhbnQncyBtb3RoZXIgaXMgYSBzZXggd29ya2VyIAogKiBISVYuRS5ERTExNjogUGVvcGxlIHdobyBpbmplY3QgZHJ1Z3MgfCBJbmZhbnQncyBtb3RoZXIgaXMgYSBwZXJzb24gd2hvIGluamVjdHMgZHJ1Z3MgCiAqIEhJVi5FLkRFMTE3OiBUcmFucyBhbmQgZ2VuZGVyLWRpdmVyc2UgcGVvcGxlIHwgSW5mYW50J3MgbW90aGVyIGlkZW50aWZpZXMgYXMgdHJhbnMgYW5kIGdlbmRlci1kaXZlcnNlIAogKiBISVYuRS5ERTExODogUGVvcGxlIGxpdmluZyBpbiBwcmlzb25zIGFuZCBvdGhlciBjbG9zZWQgc2V0dGluZyB8IEluZmFudCdzIG1vdGhlciBpcyBpbiBhIHByaXNvbiBvciBjbG9zZWQgc2V0dGluZyAKICogSElWLkguREU0NzogT24gQVJUIHwgQ2xpZW50IGlzIGN1cnJlbnRseSB0YWtpbmcgQVJUICAKICogSElWLkNvbmZpZy5ERTE5OiBPdGhlciBwcmlvcml0eSBwb3B1bGF0aW9ucyB8IE90aGVyIHBvcHVsYXRpb25zIG9mIHByaW9yaXR5IG9mIEhJViBwcmV2ZW50aW9uIGFuZCBjYXJlIGluIGxvY2FsIGNvbnRleHQgKHByb3ZpZGVkIGR1cmluZyBhZGFwdGF0aW9uKQogKgogKiBBZGRpdGlvbmFsIENvbnRleHQKICogLSB3aGF0IGl0IG1lYXN1cmVzOiBUaGlzIGluZGljYXRvciBtZWFzdXJlcyB0aGUgZXhwYW5zaW9uIG9mIEFSVCBwcm9ncmFtbWVzLgogKiAtIHJhdGlvbmFsZTog4oCiwqBNb25pdG9yaW5nIHRyZW5kcyBpbiBuZXcgQVJUIHBhdGllbnRzIHByb3ZpZGVzIG1hbmFnZXJzIHdpdGggaW1wb3J0YW50IGluZm9ybWF0aW9uIGZvciBmb3JlY2FzdGluZyB0aGUgbmVlZCBmb3IgQVJWIGFuZCBhbGxvY2F0aW9uIG9mIHN0YWZmIHRvIGVuc3VyZSBxdWFsaXR5IG9mIGNhcmUgZm9yIEFSVC4gfCDigKLCoEluaXRpYXRpb24gb2YgQVJUIGlzIG9uZSBvZiB0aGUgc2VudGluZWwgZXZlbnRzIGZvciBISVYgc3VydmVpbGxhbmNlLgogKiAtIG1ldGhvZDogSElWIHBhdGllbnQgbW9uaXRvcmluZyB0b29scyAoZm9yIGV4YW1wbGUsIHBhdGllbnQgcmVjb3Jkcy9FTVJzLCBBUlQgcmVnaXN0ZXJzKS4gIHwgIHwgVGhlIHJlY29tbWVuZGVkIHJlcG9ydGluZyBwZXJpb2QgaXMgMTIgbW9udGhzLiAKICogCiAqIFN1Z2dlc3RlZCBTY29yaW5nIE1ldGhvZDogY29udGludW91cy12YXJpYWJsZSB8IGh0dHA6Ly9obDcub3JnL2ZoaXIvdXMvY3FmbWVhc3VyZXMvU3RydWN0dXJlRGVmaW5pdGlvbi9jdi1tZWFzdXJlLWNxZm0KICovCgpsaWJyYXJ5IEhJVklORDMwTG9naWMKCi8vIEluY2x1ZGVkIExpYnJhcmllcwp1c2luZyBGSElSIHZlcnNpb24gJzQuMC4xJwoKaW5jbHVkZSBISVZJbmRpY2F0b3JDb21tb24gdmVyc2lvbiAnMC4wLjEnIGNhbGxlZCBISUMKaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICc0LjAuMScKaW5jbHVkZSBXSE9Db21tb24gY2FsbGVkIFdDb20KaW5jbHVkZSBGSElSQ29tbW9uIGNhbGxlZCBGQwoKLy8gSW5kaWNhdG9yIERlZmluaXRpb24KCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlPiBkZWZhdWx0IEludGVydmFsW0AyMDIwLTAxLTAxLCBAMjAyMC0wMS0zMV0KIApjb250ZXh0IFBhdGllbnQKCiBkZWZpbmUgIm51bWVyYXRvciI6CiAgIChleGlzdHMoSElDLiJISVYgUG9zaXRpdmUgQ29uZGl0aW9uIiBDCgl3aGVyZSBDLm9uc2V0IGJlZm9yZSBlbmQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIpCglvciAKCWV4aXN0cyhISUMuIkhJViBQb3NpdGl2ZSBPYnNlcnZhdGlvbiIgTwoJd2hlcmUgKE8uaXNzdWVkIGJlZm9yZSBlbmQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIpCgkpKSBhbmQgCglleGlzdHMoSElDLiJISVYgVHJlYXRtZW50IEFjdGl2ZSIgSAogICB3aGVyZSBILmVmZmVjdGl2ZSBzdGFydHMgZHVyaW5nICJNZWFzdXJlbWVudCBQZXJpb2QiKQoKCgovKgogKiBEaXNhZ2dyZWdhdG9ycwogKi8KCmRlZmluZSAiQWRtaW5pc3RyYXRpdmUgR2VuZGVyIFN0cmF0aWZpZXIiOgoJSElDLiJCeSBBZG1pbmlzdHJhdGl2ZSBHZW5kZXIgU3RyYXRpZmllciIKCmRlZmluZSAiQWdlIFN0cmF0aWZpZXIiOgoJSElDLiJCeSBBZ2UgU3RyYXRpZmllciIKCmRlZmluZSAiR2VvZ3JhcGhpYyBSZWdpb24gU3RyYXRpZmllciI6CglISUMuIkJ5IEdlb2dyYXBoaWMgUmVnaW9uIFN0cmF0aWZpZXIiCgpkZWZpbmUgInBhdGllbnRHcm91cHMgU3RyYXRpZmllciI6CglISUMuInBhdGllbnRHcm91cHMiCg=="
  },
  {
    "contentType" : "application/elm+xml"
  }]
}