{
  "resourceType" : "Library",
  "id" : "HIVIND44Logic",
  "meta" : {
    "profile" : ["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary",
    "http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary",
    "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library",
    "http://hl7.org/fhir/uv/cql/StructureDefinition/cql-module"]
  },
  "text" : {
    "status" : "generated",
    "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: Library HIVIND44Logic</b></p><a name=\"HIVIND44Logic\"> </a><a name=\"hcHIVIND44Logic\"> </a><a name=\"hcHIVIND44Logic-en-US\"> </a><h2>Contents</h2><p><code>text/cql</code></p><pre><code class=\"language-sql\">/*\n * Library: HIV.IND.44 Logic\n * Ref No: TBH.1\n * Short Name: TPT initiation\n *\n * Definition: Number and % of eligible people living with HIV on ART who initiated TB preventive treatment\n *\n * Numerator: Number of ART patients who initiated TPT during the reporting period\n * Numerator Calculation: COUNT of clients with &quot;HIV status&quot;='HIV-positive' AND &quot;On ART&quot;=True AND &quot;TB preventive treatment (TPT) start date&quot; in the reporting period\n * Numerator Exclusions: \n *\n * Denominator: Number of ART patients who are eligible for TPT during the reporting period\n * Denominator Calculation: COUNT of clients with &quot;HIV status&quot;='HIV-positive' AND &quot;On ART&quot;=True at end of last reporting period AND &quot;Eligible for TB preventive treatment&quot;=True\n * Denominator Exclusions: \n *\n * Disaggregations:\n * •\u00a0Gender (female, male, other*)\n * •\u00a0Age (0–4, 5–9, 10–14, 15–19, 20–24, 25–29, 30–34, 35–39, 40–44, 45–49, 50+ years)**\n * •\u00a0Type of TPT regimen\n * •\u00a0Cities and other administrative regions of epidemiologic importance\n * \n * Disaggregation Elements: Gender | Age | TPT regimen type\n *\n * Numerator and Denominator Elements:\n * Eligible for TB preventive treatment | HIV status | On ART | TB preventive treatment (TPT) start date\n *\n * Reference: Consolidated guidelines on person-centred HIV strategic information: strengthening routine data for impact. Geneva: World Health Organization; 2022\n * \n * Data Concepts:\n *  \n * HIV.A.DE17: Age | Calculated age (number of years) of the client based on date of birth \n * HIV.A.DE18: Gender* | Gender of the client* \n * HIV.A.DE19: Female | Client identifies as female \n * HIV.A.DE20: Male | Client identifies as male \n * HIV.A.DE21: Transgender male | Client identifies as transgender male \n * HIV.A.DE22: Transgender female | Client identifies as transgender female \n * HIV.A.DE23: Other | Additional category \n * HIV.B.DE115: HIV status | HIV status reported after applying the national HIV testing algorithm. No single HIV test can provide an HIV-positive diagnosis. \n * HIV.B.DE116: HIV-positive | Client is HIV-positive \n * HIV.B.DE117: HIV-negative | Client is HIV-negative \n * HIV.B.DE118: Unknown | Client has unknown HIV status \n * HIV.D.DE38: On ART | Client is currently taking ART \n * HIV.D.DE954: TB preventive treatment (TPT) start date | The date on which the client began taking TPT \n * HIV.D.DE1017: Eligible for TB preventive treatment | Client is eligible for tuberculosis preventive treatment (TPT) \n * HIV.D.DE1028: TPT regimen type | Type of TPT regimen the client is currently on \n * HIV.D.DE1029: 3HP | The client's current TPT regimen is 3HP \n * HIV.D.DE1030: 1HP | The client's current TPT regimen is 1HP \n * HIV.D.DE1031: 6H | The client's current TPT regimen is 6H \n * HIV.D.DE1032: Six months of levofloxacin daily | The client's current TPT regimen is six months of levofloxacin daily \n * HIV.D.DE1033: Other TB preventive treatment (TPT) regimen | The client's current TPT regimen is another regimen than those listed above \n * HIV.H.DE47: On ART | Client is currently taking ART \n *\n * Additional Context\n * - what it measures: This indicator measures the extent to which people on ART initiated treatment for latent TB infection.\n * - rationale: • TB preventive treatment (TPT) is a critical component of preventing TB-related morbidity and mortality among people living with HIV. | •\u00a0In the wake of recent high-level global commitments and targets, this is a critical period to track the progress that countries have made in scaling up TPT coverage.\n * - method: For the numerator: Programme records (for example, ART registers) | For the denominator: Formula for determining the number of ART patients who are eligible for TPT during the reporting period | Number of people living with HIV on ART at end of last reporting period | minus | Number of notified HIV-positive TB patients in last reporting period | also minus, where possible | Number of people living with HIV who previously received TPT – actual, if available, or based on country estimate | also minus, where possible number/estimate of people living with HIV not eligible for TPT due to co-morbidities, including active hepatitis, chronic alcoholism and/or neuropathy\n * \n * Suggested Scoring Method: proportion | http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm\n */\n\nlibrary HIVIND44Logic\n\n// Included Libraries\nusing FHIR version '4.0.1'\n\ninclude HIVIndicatorCommon version '0.0.1' called HIC\ninclude FHIRHelpers version '4.0.1'\ninclude WHOCommon called WCom\ninclude FHIRCommon called FC\n\n// Indicator Definition\n</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>"
  },
  "extension" : [{
    "url" : "http://hl7.org/fhir/StructureDefinition/cqf-knowledgeCapability",
    "valueCode" : "computable"
  }],
  "url" : "http://smart.who.int/HIV/Library/HIVIND44Logic",
  "version" : "0.1.0",
  "name" : "HIVIND44Logic",
  "title" : "HIV.IND.44 Logic",
  "status" : "draft",
  "experimental" : true,
  "type" : {
    "coding" : [{
      "system" : "http://terminology.hl7.org/CodeSystem/library-type",
      "code" : "logic-library"
    }]
  },
  "date" : "2024-07-01T05:12:03+00:00",
  "publisher" : "WHO",
  "contact" : [{
    "name" : "WHO",
    "telecom" : [{
      "system" : "url",
      "value" : "http://who.int"
    }]
  }],
  "description" : "Number and % of eligible people living with HIV on ART who initiated TB preventive treatment",
  "content" : [{
    "contentType" : "text/cql",
    "data" : "LyoKICogTGlicmFyeTogSElWLklORC40NCBMb2dpYwogKiBSZWYgTm86IFRCSC4xCiAqIFNob3J0IE5hbWU6IFRQVCBpbml0aWF0aW9uCiAqCiAqIERlZmluaXRpb246IE51bWJlciBhbmQgJSBvZiBlbGlnaWJsZSBwZW9wbGUgbGl2aW5nIHdpdGggSElWIG9uIEFSVCB3aG8gaW5pdGlhdGVkIFRCIHByZXZlbnRpdmUgdHJlYXRtZW50CiAqCiAqIE51bWVyYXRvcjogTnVtYmVyIG9mIEFSVCBwYXRpZW50cyB3aG8gaW5pdGlhdGVkIFRQVCBkdXJpbmcgdGhlIHJlcG9ydGluZyBwZXJpb2QKICogTnVtZXJhdG9yIENhbGN1bGF0aW9uOiBDT1VOVCBvZiBjbGllbnRzIHdpdGggIkhJViBzdGF0dXMiPSdISVYtcG9zaXRpdmUnIEFORCAiT24gQVJUIj1UcnVlIEFORCAiVEIgcHJldmVudGl2ZSB0cmVhdG1lbnQgKFRQVCkgc3RhcnQgZGF0ZSIgaW4gdGhlIHJlcG9ydGluZyBwZXJpb2QKICogTnVtZXJhdG9yIEV4Y2x1c2lvbnM6IAogKgogKiBEZW5vbWluYXRvcjogTnVtYmVyIG9mIEFSVCBwYXRpZW50cyB3aG8gYXJlIGVsaWdpYmxlIGZvciBUUFQgZHVyaW5nIHRoZSByZXBvcnRpbmcgcGVyaW9kCiAqIERlbm9taW5hdG9yIENhbGN1bGF0aW9uOiBDT1VOVCBvZiBjbGllbnRzIHdpdGggIkhJViBzdGF0dXMiPSdISVYtcG9zaXRpdmUnIEFORCAiT24gQVJUIj1UcnVlIGF0IGVuZCBvZiBsYXN0IHJlcG9ydGluZyBwZXJpb2QgQU5EICJFbGlnaWJsZSBmb3IgVEIgcHJldmVudGl2ZSB0cmVhdG1lbnQiPVRydWUKICogRGVub21pbmF0b3IgRXhjbHVzaW9uczogCiAqCiAqIERpc2FnZ3JlZ2F0aW9uczoKICog4oCiwqBHZW5kZXIgKGZlbWFsZSwgbWFsZSwgb3RoZXIqKQogKiDigKLCoEFnZSAoMOKAkzQsIDXigJM5LCAxMOKAkzE0LCAxNeKAkzE5LCAyMOKAkzI0LCAyNeKAkzI5LCAzMOKAkzM0LCAzNeKAkzM5LCA0MOKAkzQ0LCA0NeKAkzQ5LCA1MCsgeWVhcnMpKioKICog4oCiwqBUeXBlIG9mIFRQVCByZWdpbWVuCiAqIOKAosKgQ2l0aWVzIGFuZCBvdGhlciBhZG1pbmlzdHJhdGl2ZSByZWdpb25zIG9mIGVwaWRlbWlvbG9naWMgaW1wb3J0YW5jZQogKiAKICogRGlzYWdncmVnYXRpb24gRWxlbWVudHM6IEdlbmRlciB8IEFnZSB8IFRQVCByZWdpbWVuIHR5cGUKICoKICogTnVtZXJhdG9yIGFuZCBEZW5vbWluYXRvciBFbGVtZW50czoKICogRWxpZ2libGUgZm9yIFRCIHByZXZlbnRpdmUgdHJlYXRtZW50IHwgSElWIHN0YXR1cyB8IE9uIEFSVCB8IFRCIHByZXZlbnRpdmUgdHJlYXRtZW50IChUUFQpIHN0YXJ0IGRhdGUKICoKICogUmVmZXJlbmNlOiBDb25zb2xpZGF0ZWQgZ3VpZGVsaW5lcyBvbiBwZXJzb24tY2VudHJlZCBISVYgc3RyYXRlZ2ljIGluZm9ybWF0aW9uOiBzdHJlbmd0aGVuaW5nIHJvdXRpbmUgZGF0YSBmb3IgaW1wYWN0LiBHZW5ldmE6IFdvcmxkIEhlYWx0aCBPcmdhbml6YXRpb247IDIwMjIKICogCiAqIERhdGEgQ29uY2VwdHM6CiAqICAKICogSElWLkEuREUxNzogQWdlIHwgQ2FsY3VsYXRlZCBhZ2UgKG51bWJlciBvZiB5ZWFycykgb2YgdGhlIGNsaWVudCBiYXNlZCBvbiBkYXRlIG9mIGJpcnRoIAogKiBISVYuQS5ERTE4OiBHZW5kZXIqIHwgR2VuZGVyIG9mIHRoZSBjbGllbnQqIAogKiBISVYuQS5ERTE5OiBGZW1hbGUgfCBDbGllbnQgaWRlbnRpZmllcyBhcyBmZW1hbGUgCiAqIEhJVi5BLkRFMjA6IE1hbGUgfCBDbGllbnQgaWRlbnRpZmllcyBhcyBtYWxlIAogKiBISVYuQS5ERTIxOiBUcmFuc2dlbmRlciBtYWxlIHwgQ2xpZW50IGlkZW50aWZpZXMgYXMgdHJhbnNnZW5kZXIgbWFsZSAKICogSElWLkEuREUyMjogVHJhbnNnZW5kZXIgZmVtYWxlIHwgQ2xpZW50IGlkZW50aWZpZXMgYXMgdHJhbnNnZW5kZXIgZmVtYWxlIAogKiBISVYuQS5ERTIzOiBPdGhlciB8IEFkZGl0aW9uYWwgY2F0ZWdvcnkgCiAqIEhJVi5CLkRFMTE1OiBISVYgc3RhdHVzIHwgSElWIHN0YXR1cyByZXBvcnRlZCBhZnRlciBhcHBseWluZyB0aGUgbmF0aW9uYWwgSElWIHRlc3RpbmcgYWxnb3JpdGhtLiBObyBzaW5nbGUgSElWIHRlc3QgY2FuIHByb3ZpZGUgYW4gSElWLXBvc2l0aXZlIGRpYWdub3Npcy4gCiAqIEhJVi5CLkRFMTE2OiBISVYtcG9zaXRpdmUgfCBDbGllbnQgaXMgSElWLXBvc2l0aXZlIAogKiBISVYuQi5ERTExNzogSElWLW5lZ2F0aXZlIHwgQ2xpZW50IGlzIEhJVi1uZWdhdGl2ZSAKICogSElWLkIuREUxMTg6IFVua25vd24gfCBDbGllbnQgaGFzIHVua25vd24gSElWIHN0YXR1cyAKICogSElWLkQuREUzODogT24gQVJUIHwgQ2xpZW50IGlzIGN1cnJlbnRseSB0YWtpbmcgQVJUIAogKiBISVYuRC5ERTk1NDogVEIgcHJldmVudGl2ZSB0cmVhdG1lbnQgKFRQVCkgc3RhcnQgZGF0ZSB8IFRoZSBkYXRlIG9uIHdoaWNoIHRoZSBjbGllbnQgYmVnYW4gdGFraW5nIFRQVCAKICogSElWLkQuREUxMDE3OiBFbGlnaWJsZSBmb3IgVEIgcHJldmVudGl2ZSB0cmVhdG1lbnQgfCBDbGllbnQgaXMgZWxpZ2libGUgZm9yIHR1YmVyY3Vsb3NpcyBwcmV2ZW50aXZlIHRyZWF0bWVudCAoVFBUKSAKICogSElWLkQuREUxMDI4OiBUUFQgcmVnaW1lbiB0eXBlIHwgVHlwZSBvZiBUUFQgcmVnaW1lbiB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBvbiAKICogSElWLkQuREUxMDI5OiAzSFAgfCBUaGUgY2xpZW50J3MgY3VycmVudCBUUFQgcmVnaW1lbiBpcyAzSFAgCiAqIEhJVi5ELkRFMTAzMDogMUhQIHwgVGhlIGNsaWVudCdzIGN1cnJlbnQgVFBUIHJlZ2ltZW4gaXMgMUhQIAogKiBISVYuRC5ERTEwMzE6IDZIIHwgVGhlIGNsaWVudCdzIGN1cnJlbnQgVFBUIHJlZ2ltZW4gaXMgNkggCiAqIEhJVi5ELkRFMTAzMjogU2l4IG1vbnRocyBvZiBsZXZvZmxveGFjaW4gZGFpbHkgfCBUaGUgY2xpZW50J3MgY3VycmVudCBUUFQgcmVnaW1lbiBpcyBzaXggbW9udGhzIG9mIGxldm9mbG94YWNpbiBkYWlseSAKICogSElWLkQuREUxMDMzOiBPdGhlciBUQiBwcmV2ZW50aXZlIHRyZWF0bWVudCAoVFBUKSByZWdpbWVuIHwgVGhlIGNsaWVudCdzIGN1cnJlbnQgVFBUIHJlZ2ltZW4gaXMgYW5vdGhlciByZWdpbWVuIHRoYW4gdGhvc2UgbGlzdGVkIGFib3ZlIAogKiBISVYuSC5ERTQ3OiBPbiBBUlQgfCBDbGllbnQgaXMgY3VycmVudGx5IHRha2luZyBBUlQgCiAqCiAqIEFkZGl0aW9uYWwgQ29udGV4dAogKiAtIHdoYXQgaXQgbWVhc3VyZXM6IFRoaXMgaW5kaWNhdG9yIG1lYXN1cmVzIHRoZSBleHRlbnQgdG8gd2hpY2ggcGVvcGxlIG9uIEFSVCBpbml0aWF0ZWQgdHJlYXRtZW50IGZvciBsYXRlbnQgVEIgaW5mZWN0aW9uLgogKiAtIHJhdGlvbmFsZTog4oCiIFRCIHByZXZlbnRpdmUgdHJlYXRtZW50IChUUFQpIGlzIGEgY3JpdGljYWwgY29tcG9uZW50IG9mIHByZXZlbnRpbmcgVEItcmVsYXRlZCBtb3JiaWRpdHkgYW5kIG1vcnRhbGl0eSBhbW9uZyBwZW9wbGUgbGl2aW5nIHdpdGggSElWLiB8IOKAosKgSW4gdGhlIHdha2Ugb2YgcmVjZW50IGhpZ2gtbGV2ZWwgZ2xvYmFsIGNvbW1pdG1lbnRzIGFuZCB0YXJnZXRzLCB0aGlzIGlzIGEgY3JpdGljYWwgcGVyaW9kIHRvIHRyYWNrIHRoZSBwcm9ncmVzcyB0aGF0IGNvdW50cmllcyBoYXZlIG1hZGUgaW4gc2NhbGluZyB1cCBUUFQgY292ZXJhZ2UuCiAqIC0gbWV0aG9kOiBGb3IgdGhlIG51bWVyYXRvcjogUHJvZ3JhbW1lIHJlY29yZHMgKGZvciBleGFtcGxlLCBBUlQgcmVnaXN0ZXJzKSB8IEZvciB0aGUgZGVub21pbmF0b3I6IEZvcm11bGEgZm9yIGRldGVybWluaW5nIHRoZSBudW1iZXIgb2YgQVJUIHBhdGllbnRzIHdobyBhcmUgZWxpZ2libGUgZm9yIFRQVCBkdXJpbmcgdGhlIHJlcG9ydGluZyBwZXJpb2QgfCBOdW1iZXIgb2YgcGVvcGxlIGxpdmluZyB3aXRoIEhJViBvbiBBUlQgYXQgZW5kIG9mIGxhc3QgcmVwb3J0aW5nIHBlcmlvZCB8IG1pbnVzIHwgTnVtYmVyIG9mIG5vdGlmaWVkIEhJVi1wb3NpdGl2ZSBUQiBwYXRpZW50cyBpbiBsYXN0IHJlcG9ydGluZyBwZXJpb2QgfCBhbHNvIG1pbnVzLCB3aGVyZSBwb3NzaWJsZSB8IE51bWJlciBvZiBwZW9wbGUgbGl2aW5nIHdpdGggSElWIHdobyBwcmV2aW91c2x5IHJlY2VpdmVkIFRQVCDigJMgYWN0dWFsLCBpZiBhdmFpbGFibGUsIG9yIGJhc2VkIG9uIGNvdW50cnkgZXN0aW1hdGUgfCBhbHNvIG1pbnVzLCB3aGVyZSBwb3NzaWJsZSBudW1iZXIvZXN0aW1hdGUgb2YgcGVvcGxlIGxpdmluZyB3aXRoIEhJViBub3QgZWxpZ2libGUgZm9yIFRQVCBkdWUgdG8gY28tbW9yYmlkaXRpZXMsIGluY2x1ZGluZyBhY3RpdmUgaGVwYXRpdGlzLCBjaHJvbmljIGFsY29ob2xpc20gYW5kL29yIG5ldXJvcGF0aHkKICogCiAqIFN1Z2dlc3RlZCBTY29yaW5nIE1ldGhvZDogcHJvcG9ydGlvbiB8IGh0dHA6Ly9obDcub3JnL2ZoaXIvdXMvY3FmbWVhc3VyZXMvU3RydWN0dXJlRGVmaW5pdGlvbi9wcm9wb3J0aW9uLW1lYXN1cmUtY3FmbQogKi8KCmxpYnJhcnkgSElWSU5ENDRMb2dpYwoKLy8gSW5jbHVkZWQgTGlicmFyaWVzCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEhJVkluZGljYXRvckNvbW1vbiB2ZXJzaW9uICcwLjAuMScgY2FsbGVkIEhJQwppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4xJwppbmNsdWRlIFdIT0NvbW1vbiBjYWxsZWQgV0NvbQppbmNsdWRlIEZISVJDb21tb24gY2FsbGVkIEZDCgovLyBJbmRpY2F0b3IgRGVmaW5pdGlvbgo="
  },
  {
    "contentType" : "application/elm+xml"
  }]
}